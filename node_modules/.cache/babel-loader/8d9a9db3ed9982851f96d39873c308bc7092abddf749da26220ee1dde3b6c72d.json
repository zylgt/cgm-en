{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2024 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PermissionsProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nvar _browserCdpClient = /*#__PURE__*/new WeakMap();\nclass PermissionsProcessor {\n  constructor(browserCdpClient) {\n    _classPrivateFieldInitSpec(this, _browserCdpClient, void 0);\n    _classPrivateFieldSet(_browserCdpClient, this, browserCdpClient);\n  }\n  async setPermissions(params) {\n    try {\n      const userContextId = params['goog:userContext'] || params.userContext;\n      await _classPrivateFieldGet(_browserCdpClient, this).sendCommand('Browser.setPermission', {\n        origin: params.origin,\n        browserContextId: userContextId && userContextId !== 'default' ? userContextId : undefined,\n        permission: {\n          name: params.descriptor.name\n        },\n        setting: params.state\n      });\n    } catch (err) {\n      if (err.message === `Permission can't be granted to opaque origins.`) {\n        // Return success if the origin is not valid (does not match any\n        // existing origins).\n        return {};\n      }\n      throw new protocol_js_1.InvalidArgumentException(err.message);\n    }\n    return {};\n  }\n}\nexports.PermissionsProcessor = PermissionsProcessor;","map":{"version":3,"names":["_classPrivateFieldInitSpec","require","default","_classPrivateFieldGet","_classPrivateFieldSet","protocol_js_1","_browserCdpClient","WeakMap","PermissionsProcessor","constructor","browserCdpClient","setPermissions","params","userContextId","userContext","sendCommand","origin","browserContextId","undefined","permission","name","descriptor","setting","state","err","message","InvalidArgumentException","exports"],"sources":["../../../../../src/bidiMapper/modules/permissions/PermissionsProcessor.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAAA,IAAAA,0BAAA,GAAAC,OAAA,8GAAAC,OAAA;AAAA,IAAAC,qBAAA,GAAAF,OAAA,0GAAAC,OAAA;AAAA,IAAAE,qBAAA,GAAAH,OAAA,0GAAAC,OAAA;;;;;AAkBA,MAAAG,aAAA,GAAAJ,OAAA;AAIuC,IAAAK,iBAAA,oBAAAC,OAAA;AAEvC,MAAaC,oBAAoB;EAG/BC,YAAYC,gBAA2B;IAAAV,0BAAA,OAAAM,iBAAA;IACrCF,qBAAA,CAAAE,iBAAA,MAAI,EAAqBI,gBAAgB;EAC3C;EAEA,MAAMC,cAAcA,CAClBC,MAA2C;IAE3C,IAAI;MACF,MAAMC,aAAa,GAChBD,MAAwC,CAAC,kBAAkB,CAAC,IAC7DA,MAAM,CAACE,WAAW;MACpB,MAAMX,qBAAA,CAAAG,iBAAA,MAAI,EAAmBS,WAAW,CAAC,uBAAuB,EAAE;QAChEC,MAAM,EAAEJ,MAAM,CAACI,MAAM;QACrBC,gBAAgB,EACdJ,aAAa,IAAIA,aAAa,KAAK,SAAS,GACxCA,aAAa,GACbK,SAAS;QACfC,UAAU,EAAE;UACVC,IAAI,EAAER,MAAM,CAACS,UAAU,CAACD;SACzB;QACDE,OAAO,EAAEV,MAAM,CAACW;OACjB,CAAC;IACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ,IACGA,GAAa,CAACC,OAAO,KACtB,gDAAgD,EAChD;QACA;QACA;QACA,OAAO,EAAE;MACX;MACA,MAAM,IAAIpB,aAAA,CAAAqB,wBAAwB,CAAEF,GAAa,CAACC,OAAO,CAAC;IAC5D;IACA,OAAO,EAAE;EACX;;AArCFE,OAAA,CAAAnB,oBAAA,GAAAA,oBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}