{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiBrowserContext = void 0;\nconst Browser_js_1 = require(\"../api/Browser.js\");\nconst BrowserContext_js_1 = require(\"../api/BrowserContext.js\");\nconst EventEmitter_js_1 = require(\"../common/EventEmitter.js\");\nconst util_js_1 = require(\"../common/util.js\");\nconst decorators_js_1 = require(\"../util/decorators.js\");\nconst UserContext_js_1 = require(\"./core/UserContext.js\");\nconst Page_js_1 = require(\"./Page.js\");\nconst Target_js_1 = require(\"./Target.js\");\nconst Target_js_2 = require(\"./Target.js\");\n/**\n * @internal\n */\nlet BidiBrowserContext = ((_BidiBrowserContext, _trustedEmitter_accessor_storage, _browser, _defaultViewport, _pages, _targets, _overrides, _BidiBrowserContext_brand) => {\n  let _classSuper = BrowserContext_js_1.BrowserContext;\n  let _instanceExtraInitializers = [];\n  let _trustedEmitter_decorators;\n  let _trustedEmitter_initializers = [];\n  return _trustedEmitter_accessor_storage = /*#__PURE__*/new WeakMap(), _browser = /*#__PURE__*/new WeakMap(), _defaultViewport = /*#__PURE__*/new WeakMap(), _pages = /*#__PURE__*/new WeakMap(), _targets = /*#__PURE__*/new WeakMap(), _overrides = /*#__PURE__*/new WeakMap(), _BidiBrowserContext_brand = /*#__PURE__*/new WeakSet(), (_BidiBrowserContext = class BidiBrowserContext extends _classSuper {\n    static from(browser, userContext, options) {\n      const context = new BidiBrowserContext(browser, userContext, options);\n      _assertClassBrand(_BidiBrowserContext_brand, context, _initialize).call(context);\n      return context;\n    }\n    get trustedEmitter() {\n      return _classPrivateFieldGet(_trustedEmitter_accessor_storage, this);\n    }\n    set trustedEmitter(value) {\n      _classPrivateFieldSet(_trustedEmitter_accessor_storage, this, value);\n    }\n    constructor(browser, userContext, options) {\n      super();\n      _classPrivateMethodInitSpec(this, _BidiBrowserContext_brand);\n      _classPrivateFieldInitSpec(this, _trustedEmitter_accessor_storage, (__runInitializers(this, _instanceExtraInitializers), __runInitializers(this, _trustedEmitter_initializers, new EventEmitter_js_1.EventEmitter())));\n      _classPrivateFieldInitSpec(this, _browser, void 0);\n      _classPrivateFieldInitSpec(this, _defaultViewport, void 0);\n      // This is public because of cookies.\n      _defineProperty(this, \"userContext\", void 0);\n      _classPrivateFieldInitSpec(this, _pages, new WeakMap());\n      _classPrivateFieldInitSpec(this, _targets, new Map());\n      _classPrivateFieldInitSpec(this, _overrides, []);\n      _classPrivateFieldSet(_browser, this, browser);\n      this.userContext = userContext;\n      _classPrivateFieldSet(_defaultViewport, this, options.defaultViewport);\n    }\n    targets() {\n      return [..._classPrivateFieldGet(_targets, this).values()].flatMap(([target, frames]) => {\n        return [target, ...frames.values()];\n      });\n    }\n    async newPage() {\n      const context = await this.userContext.createBrowsingContext(\"tab\" /* Bidi.BrowsingContext.CreateType.Tab */);\n      const page = _classPrivateFieldGet(_pages, this).get(context);\n      if (!page) {\n        throw new Error('Page is not found');\n      }\n      if (_classPrivateFieldGet(_defaultViewport, this)) {\n        try {\n          await page.setViewport(_classPrivateFieldGet(_defaultViewport, this));\n        } catch {\n          // No support for setViewport in Firefox.\n        }\n      }\n      return page;\n    }\n    async close() {\n      if (!this.isIncognito()) {\n        throw new Error('Default context cannot be closed!');\n      }\n      try {\n        await this.userContext.remove();\n      } catch (error) {\n        (0, util_js_1.debugError)(error);\n      }\n    }\n    browser() {\n      return _classPrivateFieldGet(_browser, this);\n    }\n    async pages() {\n      return [...this.userContext.browsingContexts].map(context => {\n        return _classPrivateFieldGet(_pages, this).get(context);\n      });\n    }\n    isIncognito() {\n      return this.userContext.id !== UserContext_js_1.UserContext.DEFAULT;\n    }\n    async overridePermissions(origin, permissions) {\n      const permissionsSet = new Set(permissions.map(permission => {\n        const protocolPermission = Browser_js_1.WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n        if (!protocolPermission) {\n          throw new Error('Unknown permission: ' + permission);\n        }\n        return permission;\n      }));\n      await Promise.all(Array.from(Browser_js_1.WEB_PERMISSION_TO_PROTOCOL_PERMISSION.keys()).map(permission => {\n        const result = this.userContext.setPermissions(origin, {\n          name: permission\n        }, permissionsSet.has(permission) ? \"granted\" /* Bidi.Permissions.PermissionState.Granted */ : \"denied\" /* Bidi.Permissions.PermissionState.Denied */);\n        _classPrivateFieldGet(_overrides, this).push({\n          origin,\n          permission\n        });\n        // TODO: some permissions are outdated and setting them to denied does\n        // not work.\n        if (!permissionsSet.has(permission)) {\n          return result.catch(util_js_1.debugError);\n        }\n        return result;\n      }));\n    }\n    async clearPermissionOverrides() {\n      const promises = _classPrivateFieldGet(_overrides, this).map(({\n        permission,\n        origin\n      }) => {\n        return this.userContext.setPermissions(origin, {\n          name: permission\n        }, \"prompt\" /* Bidi.Permissions.PermissionState.Prompt */).catch(util_js_1.debugError);\n      });\n      _classPrivateFieldSet(_overrides, this, []);\n      await Promise.all(promises);\n    }\n    get id() {\n      if (this.userContext.id === UserContext_js_1.UserContext.DEFAULT) {\n        return undefined;\n      }\n      return this.userContext.id;\n    }\n  }, (() => {\n    const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n    _trustedEmitter_decorators = [(0, decorators_js_1.bubble)()];\n    __esDecorate(_BidiBrowserContext, null, _trustedEmitter_decorators, {\n      kind: \"accessor\",\n      name: \"trustedEmitter\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"trustedEmitter\" in obj,\n        get: obj => obj.trustedEmitter,\n        set: (obj, value) => {\n          obj.trustedEmitter = value;\n        }\n      },\n      metadata: _metadata\n    }, _trustedEmitter_initializers, _instanceExtraInitializers);\n    if (_metadata) Object.defineProperty(_BidiBrowserContext, Symbol.metadata, {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _metadata\n    });\n  })(), _BidiBrowserContext);\n  function _initialize() {\n    // Create targets for existing browsing contexts.\n    for (const browsingContext of this.userContext.browsingContexts) {\n      _assertClassBrand(_BidiBrowserContext_brand, this, _createPage).call(this, browsingContext);\n    }\n    this.userContext.on('browsingcontext', ({\n      browsingContext\n    }) => {\n      _assertClassBrand(_BidiBrowserContext_brand, this, _createPage).call(this, browsingContext);\n    });\n    this.userContext.on('closed', () => {\n      this.trustedEmitter.removeAllListeners();\n    });\n  }\n  function _createPage(browsingContext) {\n    const page = Page_js_1.BidiPage.from(this, browsingContext);\n    _classPrivateFieldGet(_pages, this).set(browsingContext, page);\n    page.trustedEmitter.on(\"close\" /* PageEvent.Close */, () => {\n      _classPrivateFieldGet(_pages, this).delete(browsingContext);\n    });\n    // -- Target stuff starts here --\n    const pageTarget = new Target_js_2.BidiPageTarget(page);\n    const pageTargets = new Map();\n    _classPrivateFieldGet(_targets, this).set(page, [pageTarget, pageTargets]);\n    page.trustedEmitter.on(\"frameattached\" /* PageEvent.FrameAttached */, frame => {\n      const bidiFrame = frame;\n      const target = new Target_js_2.BidiFrameTarget(bidiFrame);\n      pageTargets.set(bidiFrame, target);\n      this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n    });\n    page.trustedEmitter.on(\"framenavigated\" /* PageEvent.FrameNavigated */, frame => {\n      const bidiFrame = frame;\n      const target = pageTargets.get(bidiFrame);\n      // If there is no target, then this is the page's frame.\n      if (target === undefined) {\n        this.trustedEmitter.emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, pageTarget);\n      } else {\n        this.trustedEmitter.emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, target);\n      }\n    });\n    page.trustedEmitter.on(\"framedetached\" /* PageEvent.FrameDetached */, frame => {\n      const bidiFrame = frame;\n      const target = pageTargets.get(bidiFrame);\n      if (target === undefined) {\n        return;\n      }\n      pageTargets.delete(bidiFrame);\n      this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n    });\n    page.trustedEmitter.on(\"workercreated\" /* PageEvent.WorkerCreated */, worker => {\n      const bidiWorker = worker;\n      const target = new Target_js_1.BidiWorkerTarget(bidiWorker);\n      pageTargets.set(bidiWorker, target);\n      this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n    });\n    page.trustedEmitter.on(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker => {\n      const bidiWorker = worker;\n      const target = pageTargets.get(bidiWorker);\n      if (target === undefined) {\n        return;\n      }\n      pageTargets.delete(worker);\n      this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n    });\n    page.trustedEmitter.on(\"close\" /* PageEvent.Close */, () => {\n      _classPrivateFieldGet(_targets, this).delete(page);\n      this.trustedEmitter.emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, pageTarget);\n    });\n    this.trustedEmitter.emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, pageTarget);\n    // -- Target stuff ends here --\n    return page;\n  }\n})();\nexports.BidiBrowserContext = BidiBrowserContext;","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_defineProperty","_classPrivateFieldInitSpec","_classPrivateFieldSet","_classPrivateFieldGet","_assertClassBrand","Browser_js_1","BrowserContext_js_1","EventEmitter_js_1","util_js_1","decorators_js_1","UserContext_js_1","Page_js_1","Target_js_1","Target_js_2","BidiBrowserContext","_BidiBrowserContext","_trustedEmitter_accessor_storage","_browser","_defaultViewport","_pages","_targets","_overrides","_BidiBrowserContext_brand","BrowserContext","_classSuper","from","browser","userContext","options","context","_initialize","call","trustedEmitter","value","constructor","__runInitializers","_instanceExtraInitializers","_trustedEmitter_initializers","EventEmitter","WeakMap","Map","defaultViewport","targets","values","flatMap","target","frames","newPage","createBrowsingContext","page","get","Error","setViewport","close","isIncognito","remove","error","debugError","pages","browsingContexts","map","id","UserContext","DEFAULT","overridePermissions","origin","permissions","permissionsSet","Set","permission","protocolPermission","WEB_PERMISSION_TO_PROTOCOL_PERMISSION","Promise","all","Array","keys","result","setPermissions","name","has","push","catch","clearPermissionOverrides","promises","undefined","bubble","__esDecorate","_trustedEmitter_decorators","kind","static","private","access","obj","set","metadata","_metadata","browsingContext","_createPage","on","removeAllListeners","BidiPage","delete","pageTarget","BidiPageTarget","pageTargets","frame","bidiFrame","BidiFrameTarget","emit","worker","bidiWorker","BidiWorkerTarget","exports"],"sources":["../../../../src/bidi/BrowserContext.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}