{"ast":null,"code":"import _classPrivateMethodInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateFieldInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _classPrivateFieldSet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport _classPrivateFieldGet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport _assertClassBrand from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";\nimport \"core-js/modules/es.array.push.js\";\n/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { firstValueFrom, from, raceWith } from '../../third_party/rxjs/rxjs.js';\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { Page } from '../api/Page.js';\nimport { ConsoleMessage } from '../common/ConsoleMessage.js';\nimport { TargetCloseError } from '../common/Errors.js';\nimport { FileChooser } from '../common/FileChooser.js';\nimport { NetworkManagerEvent } from '../common/NetworkManagerEvents.js';\nimport { debugError, evaluationString, getReadableAsBuffer, getReadableFromProtocolStream, parsePDFOptions, timeout, validateDialogType } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { AsyncDisposableStack } from '../util/disposable.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { Accessibility } from './Accessibility.js';\nimport { Binding } from './Binding.js';\nimport { CdpCDPSession } from './CDPSession.js';\nimport { isTargetClosedError } from './Connection.js';\nimport { Coverage } from './Coverage.js';\nimport { CdpDialog } from './Dialog.js';\nimport { EmulationManager } from './EmulationManager.js';\nimport { FirefoxTargetManager } from './FirefoxTargetManager.js';\nimport { FrameManager } from './FrameManager.js';\nimport { FrameManagerEvent } from './FrameManagerEvents.js';\nimport { CdpKeyboard, CdpMouse, CdpTouchscreen } from './Input.js';\nimport { MAIN_WORLD } from './IsolatedWorlds.js';\nimport { releaseObject } from './JSHandle.js';\nimport { Tracing } from './Tracing.js';\nimport { createClientError, pageBindingInitString, valueFromRemoteObject } from './utils.js';\nimport { CdpWebWorker } from './WebWorker.js';\nfunction convertConsoleMessageLevel(method) {\n  switch (method) {\n    case 'warning':\n      return 'warn';\n    default:\n      return method;\n  }\n}\n/**\n * @internal\n */\nvar _closed = /*#__PURE__*/new WeakMap();\nvar _targetManager = /*#__PURE__*/new WeakMap();\nvar _primaryTargetClient = /*#__PURE__*/new WeakMap();\nvar _primaryTarget = /*#__PURE__*/new WeakMap();\nvar _tabTargetClient = /*#__PURE__*/new WeakMap();\nvar _tabTarget = /*#__PURE__*/new WeakMap();\nvar _keyboard = /*#__PURE__*/new WeakMap();\nvar _mouse = /*#__PURE__*/new WeakMap();\nvar _touchscreen = /*#__PURE__*/new WeakMap();\nvar _accessibility = /*#__PURE__*/new WeakMap();\nvar _frameManager = /*#__PURE__*/new WeakMap();\nvar _emulationManager = /*#__PURE__*/new WeakMap();\nvar _tracing = /*#__PURE__*/new WeakMap();\nvar _bindings = /*#__PURE__*/new WeakMap();\nvar _exposedFunctions = /*#__PURE__*/new WeakMap();\nvar _coverage = /*#__PURE__*/new WeakMap();\nvar _viewport = /*#__PURE__*/new WeakMap();\nvar _workers = /*#__PURE__*/new WeakMap();\nvar _fileChooserDeferreds = /*#__PURE__*/new WeakMap();\nvar _sessionCloseDeferred = /*#__PURE__*/new WeakMap();\nvar _serviceWorkerBypassed = /*#__PURE__*/new WeakMap();\nvar _userDragInterceptionEnabled = /*#__PURE__*/new WeakMap();\nvar _frameManagerHandlers = /*#__PURE__*/new WeakMap();\nvar _networkManagerHandlers = /*#__PURE__*/new WeakMap();\nvar _sessionHandlers = /*#__PURE__*/new WeakMap();\nvar _CdpPage_brand = /*#__PURE__*/new WeakSet();\nvar _onDetachedFromTarget = /*#__PURE__*/new WeakMap();\nvar _onAttachedToTarget = /*#__PURE__*/new WeakMap();\nexport class CdpPage extends Page {\n  static async _create(client, target, defaultViewport) {\n    const page = new CdpPage(client, target);\n    await _assertClassBrand(_CdpPage_brand, page, _initialize).call(page);\n    if (defaultViewport) {\n      try {\n        await page.setViewport(defaultViewport);\n      } catch (err) {\n        if (isErrorLike(err) && isTargetClosedError(err)) {\n          debugError(err);\n        } else {\n          throw err;\n        }\n      }\n    }\n    return page;\n  }\n  constructor(client, _target) {\n    super();\n    _classPrivateMethodInitSpec(this, _CdpPage_brand);\n    _classPrivateFieldInitSpec(this, _closed, false);\n    _classPrivateFieldInitSpec(this, _targetManager, void 0);\n    _classPrivateFieldInitSpec(this, _primaryTargetClient, void 0);\n    _classPrivateFieldInitSpec(this, _primaryTarget, void 0);\n    _classPrivateFieldInitSpec(this, _tabTargetClient, void 0);\n    _classPrivateFieldInitSpec(this, _tabTarget, void 0);\n    _classPrivateFieldInitSpec(this, _keyboard, void 0);\n    _classPrivateFieldInitSpec(this, _mouse, void 0);\n    _classPrivateFieldInitSpec(this, _touchscreen, void 0);\n    _classPrivateFieldInitSpec(this, _accessibility, void 0);\n    _classPrivateFieldInitSpec(this, _frameManager, void 0);\n    _classPrivateFieldInitSpec(this, _emulationManager, void 0);\n    _classPrivateFieldInitSpec(this, _tracing, void 0);\n    _classPrivateFieldInitSpec(this, _bindings, new Map());\n    _classPrivateFieldInitSpec(this, _exposedFunctions, new Map());\n    _classPrivateFieldInitSpec(this, _coverage, void 0);\n    _classPrivateFieldInitSpec(this, _viewport, void 0);\n    _classPrivateFieldInitSpec(this, _workers, new Map());\n    _classPrivateFieldInitSpec(this, _fileChooserDeferreds, new Set());\n    _classPrivateFieldInitSpec(this, _sessionCloseDeferred, Deferred.create());\n    _classPrivateFieldInitSpec(this, _serviceWorkerBypassed, false);\n    _classPrivateFieldInitSpec(this, _userDragInterceptionEnabled, false);\n    _classPrivateFieldInitSpec(this, _frameManagerHandlers, [[FrameManagerEvent.FrameAttached, frame => {\n      this.emit(\"frameattached\" /* PageEvent.FrameAttached */, frame);\n    }], [FrameManagerEvent.FrameDetached, frame => {\n      this.emit(\"framedetached\" /* PageEvent.FrameDetached */, frame);\n    }], [FrameManagerEvent.FrameNavigated, frame => {\n      this.emit(\"framenavigated\" /* PageEvent.FrameNavigated */, frame);\n    }]]);\n    _classPrivateFieldInitSpec(this, _networkManagerHandlers, [[NetworkManagerEvent.Request, request => {\n      this.emit(\"request\" /* PageEvent.Request */, request);\n    }], [NetworkManagerEvent.RequestServedFromCache, request => {\n      this.emit(\"requestservedfromcache\" /* PageEvent.RequestServedFromCache */, request);\n    }], [NetworkManagerEvent.Response, response => {\n      this.emit(\"response\" /* PageEvent.Response */, response);\n    }], [NetworkManagerEvent.RequestFailed, request => {\n      this.emit(\"requestfailed\" /* PageEvent.RequestFailed */, request);\n    }], [NetworkManagerEvent.RequestFinished, request => {\n      this.emit(\"requestfinished\" /* PageEvent.RequestFinished */, request);\n    }]]);\n    _classPrivateFieldInitSpec(this, _sessionHandlers, [[CDPSessionEvent.Disconnected, () => {\n      _classPrivateFieldGet(_sessionCloseDeferred, this).reject(new TargetCloseError('Target closed'));\n    }], ['Page.domContentEventFired', () => {\n      return this.emit(\"domcontentloaded\" /* PageEvent.DOMContentLoaded */, undefined);\n    }], ['Page.loadEventFired', () => {\n      return this.emit(\"load\" /* PageEvent.Load */, undefined);\n    }], ['Page.javascriptDialogOpening', _assertClassBrand(_CdpPage_brand, this, _onDialog).bind(this)], ['Runtime.exceptionThrown', _assertClassBrand(_CdpPage_brand, this, _handleException).bind(this)], ['Inspector.targetCrashed', _assertClassBrand(_CdpPage_brand, this, _onTargetCrashed).bind(this)], ['Performance.metrics', _assertClassBrand(_CdpPage_brand, this, _emitMetrics).bind(this)], ['Log.entryAdded', _assertClassBrand(_CdpPage_brand, this, _onLogEntryAdded).bind(this)], ['Page.fileChooserOpened', _assertClassBrand(_CdpPage_brand, this, _onFileChooser).bind(this)]]);\n    _classPrivateFieldInitSpec(this, _onDetachedFromTarget, target => {\n      const sessionId = target._session()?.id();\n      const worker = _classPrivateFieldGet(_workers, this).get(sessionId);\n      if (!worker) {\n        return;\n      }\n      _classPrivateFieldGet(_workers, this).delete(sessionId);\n      this.emit(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker);\n    });\n    _classPrivateFieldInitSpec(this, _onAttachedToTarget, session => {\n      assert(session instanceof CdpCDPSession);\n      _classPrivateFieldGet(_frameManager, this).onAttachedToTarget(session._target());\n      if (session._target()._getTargetInfo().type === 'worker') {\n        const worker = new CdpWebWorker(session, session._target().url(), session._target()._targetId, session._target().type(), _assertClassBrand(_CdpPage_brand, this, _addConsoleMessage).bind(this), _assertClassBrand(_CdpPage_brand, this, _handleException).bind(this));\n        _classPrivateFieldGet(_workers, this).set(session.id(), worker);\n        this.emit(\"workercreated\" /* PageEvent.WorkerCreated */, worker);\n      }\n      session.on(CDPSessionEvent.Ready, _classPrivateFieldGet(_onAttachedToTarget, this));\n    });\n    _classPrivateFieldSet(_primaryTargetClient, this, client);\n    _classPrivateFieldSet(_tabTargetClient, this, client.parentSession());\n    assert(_classPrivateFieldGet(_tabTargetClient, this), 'Tab target session is not defined.');\n    _classPrivateFieldSet(_tabTarget, this, _classPrivateFieldGet(_tabTargetClient, this)._target());\n    assert(_classPrivateFieldGet(_tabTarget, this), 'Tab target is not defined.');\n    _classPrivateFieldSet(_primaryTarget, this, _target);\n    _classPrivateFieldSet(_targetManager, this, _target._targetManager());\n    _classPrivateFieldSet(_keyboard, this, new CdpKeyboard(client));\n    _classPrivateFieldSet(_mouse, this, new CdpMouse(client, _classPrivateFieldGet(_keyboard, this)));\n    _classPrivateFieldSet(_touchscreen, this, new CdpTouchscreen(client, _classPrivateFieldGet(_keyboard, this)));\n    _classPrivateFieldSet(_accessibility, this, new Accessibility(client));\n    _classPrivateFieldSet(_frameManager, this, new FrameManager(client, this, this._timeoutSettings));\n    _classPrivateFieldSet(_emulationManager, this, new EmulationManager(client));\n    _classPrivateFieldSet(_tracing, this, new Tracing(client));\n    _classPrivateFieldSet(_coverage, this, new Coverage(client));\n    _classPrivateFieldSet(_viewport, this, null);\n    for (const [eventName, handler] of _classPrivateFieldGet(_frameManagerHandlers, this)) {\n      _classPrivateFieldGet(_frameManager, this).on(eventName, handler);\n    }\n    _classPrivateFieldGet(_frameManager, this).on(FrameManagerEvent.ConsoleApiCalled, ([world, event]) => {\n      _assertClassBrand(_CdpPage_brand, this, _onConsoleAPI).call(this, world, event);\n    });\n    _classPrivateFieldGet(_frameManager, this).on(FrameManagerEvent.BindingCalled, ([world, event]) => {\n      void _assertClassBrand(_CdpPage_brand, this, _onBindingCalled).call(this, world, event);\n    });\n    for (const [eventName, handler] of _classPrivateFieldGet(_networkManagerHandlers, this)) {\n      // TODO: Remove any.\n      _classPrivateFieldGet(_frameManager, this).networkManager.on(eventName, handler);\n    }\n    _classPrivateFieldGet(_tabTargetClient, this).on(CDPSessionEvent.Swapped, _assertClassBrand(_CdpPage_brand, this, _onActivation).bind(this));\n    _classPrivateFieldGet(_tabTargetClient, this).on(CDPSessionEvent.Ready, _assertClassBrand(_CdpPage_brand, this, _onSecondaryTarget).bind(this));\n    _classPrivateFieldGet(_targetManager, this).on(\"targetGone\" /* TargetManagerEvent.TargetGone */, _classPrivateFieldGet(_onDetachedFromTarget, this));\n    _classPrivateFieldGet(_tabTarget, this)._isClosedDeferred.valueOrThrow().then(() => {\n      _classPrivateFieldGet(_targetManager, this).off(\"targetGone\" /* TargetManagerEvent.TargetGone */, _classPrivateFieldGet(_onDetachedFromTarget, this));\n      this.emit(\"close\" /* PageEvent.Close */, undefined);\n      _classPrivateFieldSet(_closed, this, true);\n    }).catch(debugError);\n    _assertClassBrand(_CdpPage_brand, this, _setupPrimaryTargetListeners).call(this);\n  }\n  _client() {\n    return _classPrivateFieldGet(_primaryTargetClient, this);\n  }\n  isServiceWorkerBypassed() {\n    return _classPrivateFieldGet(_serviceWorkerBypassed, this);\n  }\n  isDragInterceptionEnabled() {\n    return _classPrivateFieldGet(_userDragInterceptionEnabled, this);\n  }\n  isJavaScriptEnabled() {\n    return _classPrivateFieldGet(_emulationManager, this).javascriptEnabled;\n  }\n  async waitForFileChooser(options = {}) {\n    const needsEnable = _classPrivateFieldGet(_fileChooserDeferreds, this).size === 0;\n    const {\n      timeout = this._timeoutSettings.timeout()\n    } = options;\n    const deferred = Deferred.create({\n      message: `Waiting for \\`FileChooser\\` failed: ${timeout}ms exceeded`,\n      timeout\n    });\n    _classPrivateFieldGet(_fileChooserDeferreds, this).add(deferred);\n    let enablePromise;\n    if (needsEnable) {\n      enablePromise = _classPrivateFieldGet(_primaryTargetClient, this).send('Page.setInterceptFileChooserDialog', {\n        enabled: true\n      });\n    }\n    try {\n      const [result] = await Promise.all([deferred.valueOrThrow(), enablePromise]);\n      return result;\n    } catch (error) {\n      _classPrivateFieldGet(_fileChooserDeferreds, this).delete(deferred);\n      throw error;\n    }\n  }\n  async setGeolocation(options) {\n    return await _classPrivateFieldGet(_emulationManager, this).setGeolocation(options);\n  }\n  target() {\n    return _classPrivateFieldGet(_primaryTarget, this);\n  }\n  browser() {\n    return _classPrivateFieldGet(_primaryTarget, this).browser();\n  }\n  browserContext() {\n    return _classPrivateFieldGet(_primaryTarget, this).browserContext();\n  }\n  mainFrame() {\n    return _classPrivateFieldGet(_frameManager, this).mainFrame();\n  }\n  get keyboard() {\n    return _classPrivateFieldGet(_keyboard, this);\n  }\n  get touchscreen() {\n    return _classPrivateFieldGet(_touchscreen, this);\n  }\n  get coverage() {\n    return _classPrivateFieldGet(_coverage, this);\n  }\n  get tracing() {\n    return _classPrivateFieldGet(_tracing, this);\n  }\n  get accessibility() {\n    return _classPrivateFieldGet(_accessibility, this);\n  }\n  frames() {\n    return _classPrivateFieldGet(_frameManager, this).frames();\n  }\n  workers() {\n    return Array.from(_classPrivateFieldGet(_workers, this).values());\n  }\n  async setRequestInterception(value) {\n    return await _classPrivateFieldGet(_frameManager, this).networkManager.setRequestInterception(value);\n  }\n  async setBypassServiceWorker(bypass) {\n    _classPrivateFieldSet(_serviceWorkerBypassed, this, bypass);\n    return await _classPrivateFieldGet(_primaryTargetClient, this).send('Network.setBypassServiceWorker', {\n      bypass\n    });\n  }\n  async setDragInterception(enabled) {\n    _classPrivateFieldSet(_userDragInterceptionEnabled, this, enabled);\n    return await _classPrivateFieldGet(_primaryTargetClient, this).send('Input.setInterceptDrags', {\n      enabled\n    });\n  }\n  async setOfflineMode(enabled) {\n    return await _classPrivateFieldGet(_frameManager, this).networkManager.setOfflineMode(enabled);\n  }\n  async emulateNetworkConditions(networkConditions) {\n    return await _classPrivateFieldGet(_frameManager, this).networkManager.emulateNetworkConditions(networkConditions);\n  }\n  setDefaultNavigationTimeout(timeout) {\n    this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n  }\n  setDefaultTimeout(timeout) {\n    this._timeoutSettings.setDefaultTimeout(timeout);\n  }\n  getDefaultTimeout() {\n    return this._timeoutSettings.timeout();\n  }\n  async queryObjects(prototypeHandle) {\n    assert(!prototypeHandle.disposed, 'Prototype JSHandle is disposed!');\n    assert(prototypeHandle.id, 'Prototype JSHandle must not be referencing primitive value');\n    const response = await this.mainFrame().client.send('Runtime.queryObjects', {\n      prototypeObjectId: prototypeHandle.id\n    });\n    return this.mainFrame().mainRealm().createCdpHandle(response.objects);\n  }\n  async cookies(...urls) {\n    const originalCookies = (await _classPrivateFieldGet(_primaryTargetClient, this).send('Network.getCookies', {\n      urls: urls.length ? urls : [this.url()]\n    })).cookies;\n    const unsupportedCookieAttributes = ['sourcePort'];\n    const filterUnsupportedAttributes = cookie => {\n      for (const attr of unsupportedCookieAttributes) {\n        delete cookie[attr];\n      }\n      return cookie;\n    };\n    return originalCookies.map(filterUnsupportedAttributes);\n  }\n  async deleteCookie(...cookies) {\n    const pageURL = this.url();\n    for (const cookie of cookies) {\n      const item = Object.assign({}, cookie);\n      if (!cookie.url && pageURL.startsWith('http')) {\n        item.url = pageURL;\n      }\n      await _classPrivateFieldGet(_primaryTargetClient, this).send('Network.deleteCookies', item);\n    }\n  }\n  async setCookie(...cookies) {\n    const pageURL = this.url();\n    const startsWithHTTP = pageURL.startsWith('http');\n    const items = cookies.map(cookie => {\n      const item = Object.assign({}, cookie);\n      if (!item.url && startsWithHTTP) {\n        item.url = pageURL;\n      }\n      assert(item.url !== 'about:blank', `Blank page can not have cookie \"${item.name}\"`);\n      assert(!String.prototype.startsWith.call(item.url || '', 'data:'), `Data URL page can not have cookie \"${item.name}\"`);\n      return item;\n    });\n    await this.deleteCookie(...items);\n    if (items.length) {\n      await _classPrivateFieldGet(_primaryTargetClient, this).send('Network.setCookies', {\n        cookies: items\n      });\n    }\n  }\n  async exposeFunction(name, pptrFunction) {\n    if (_classPrivateFieldGet(_bindings, this).has(name)) {\n      throw new Error(`Failed to add page binding with name ${name}: window['${name}'] already exists!`);\n    }\n    let binding;\n    switch (typeof pptrFunction) {\n      case 'function':\n        binding = new Binding(name, pptrFunction);\n        break;\n      default:\n        binding = new Binding(name, pptrFunction.default);\n        break;\n    }\n    _classPrivateFieldGet(_bindings, this).set(name, binding);\n    const expression = pageBindingInitString('exposedFun', name);\n    await _classPrivateFieldGet(_primaryTargetClient, this).send('Runtime.addBinding', {\n      name\n    });\n    // TODO: investigate this as it appears to only apply to the main frame and\n    // local subframes instead of the entire frame tree (including future\n    // frame).\n    const {\n      identifier\n    } = await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.addScriptToEvaluateOnNewDocument', {\n      source: expression\n    });\n    _classPrivateFieldGet(_exposedFunctions, this).set(name, identifier);\n    await Promise.all(this.frames().map(frame => {\n      // If a frame has not started loading, it might never start. Rely on\n      // addScriptToEvaluateOnNewDocument in that case.\n      if (frame !== this.mainFrame() && !frame._hasStartedLoading) {\n        return;\n      }\n      return frame.evaluate(expression).catch(debugError);\n    }));\n  }\n  async removeExposedFunction(name) {\n    const exposedFun = _classPrivateFieldGet(_exposedFunctions, this).get(name);\n    if (!exposedFun) {\n      throw new Error(`Failed to remove page binding with name ${name}: window['${name}'] does not exists!`);\n    }\n    await _classPrivateFieldGet(_primaryTargetClient, this).send('Runtime.removeBinding', {\n      name\n    });\n    await this.removeScriptToEvaluateOnNewDocument(exposedFun);\n    await Promise.all(this.frames().map(frame => {\n      // If a frame has not started loading, it might never start. Rely on\n      // addScriptToEvaluateOnNewDocument in that case.\n      if (frame !== this.mainFrame() && !frame._hasStartedLoading) {\n        return;\n      }\n      return frame.evaluate(name => {\n        // Removes the dangling Puppeteer binding wrapper.\n        // @ts-expect-error: In a different context.\n        globalThis[name] = undefined;\n      }, name).catch(debugError);\n    }));\n    _classPrivateFieldGet(_exposedFunctions, this).delete(name);\n    _classPrivateFieldGet(_bindings, this).delete(name);\n  }\n  async authenticate(credentials) {\n    return await _classPrivateFieldGet(_frameManager, this).networkManager.authenticate(credentials);\n  }\n  async setExtraHTTPHeaders(headers) {\n    return await _classPrivateFieldGet(_frameManager, this).networkManager.setExtraHTTPHeaders(headers);\n  }\n  async setUserAgent(userAgent, userAgentMetadata) {\n    return await _classPrivateFieldGet(_frameManager, this).networkManager.setUserAgent(userAgent, userAgentMetadata);\n  }\n  async metrics() {\n    const response = await _classPrivateFieldGet(_primaryTargetClient, this).send('Performance.getMetrics');\n    return _assertClassBrand(_CdpPage_brand, this, _buildMetricsObject).call(this, response.metrics);\n  }\n  async reload(options) {\n    const [result] = await Promise.all([this.waitForNavigation({\n      ...options,\n      ignoreSameDocumentNavigation: true\n    }), _classPrivateFieldGet(_primaryTargetClient, this).send('Page.reload')]);\n    return result;\n  }\n  async createCDPSession() {\n    return await this.target().createCDPSession();\n  }\n  async goBack(options = {}) {\n    return await _assertClassBrand(_CdpPage_brand, this, _go).call(this, -1, options);\n  }\n  async goForward(options = {}) {\n    return await _assertClassBrand(_CdpPage_brand, this, _go).call(this, +1, options);\n  }\n  async bringToFront() {\n    await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.bringToFront');\n  }\n  async setJavaScriptEnabled(enabled) {\n    return await _classPrivateFieldGet(_emulationManager, this).setJavaScriptEnabled(enabled);\n  }\n  async setBypassCSP(enabled) {\n    await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.setBypassCSP', {\n      enabled\n    });\n  }\n  async emulateMediaType(type) {\n    return await _classPrivateFieldGet(_emulationManager, this).emulateMediaType(type);\n  }\n  async emulateCPUThrottling(factor) {\n    return await _classPrivateFieldGet(_emulationManager, this).emulateCPUThrottling(factor);\n  }\n  async emulateMediaFeatures(features) {\n    return await _classPrivateFieldGet(_emulationManager, this).emulateMediaFeatures(features);\n  }\n  async emulateTimezone(timezoneId) {\n    return await _classPrivateFieldGet(_emulationManager, this).emulateTimezone(timezoneId);\n  }\n  async emulateIdleState(overrides) {\n    return await _classPrivateFieldGet(_emulationManager, this).emulateIdleState(overrides);\n  }\n  async emulateVisionDeficiency(type) {\n    return await _classPrivateFieldGet(_emulationManager, this).emulateVisionDeficiency(type);\n  }\n  async setViewport(viewport) {\n    const needsReload = await _classPrivateFieldGet(_emulationManager, this).emulateViewport(viewport);\n    _classPrivateFieldSet(_viewport, this, viewport);\n    if (needsReload) {\n      await this.reload();\n    }\n  }\n  viewport() {\n    return _classPrivateFieldGet(_viewport, this);\n  }\n  async evaluateOnNewDocument(pageFunction, ...args) {\n    const source = evaluationString(pageFunction, ...args);\n    const {\n      identifier\n    } = await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.addScriptToEvaluateOnNewDocument', {\n      source\n    });\n    return {\n      identifier\n    };\n  }\n  async removeScriptToEvaluateOnNewDocument(identifier) {\n    await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.removeScriptToEvaluateOnNewDocument', {\n      identifier\n    });\n  }\n  async setCacheEnabled(enabled = true) {\n    await _classPrivateFieldGet(_frameManager, this).networkManager.setCacheEnabled(enabled);\n  }\n  async _screenshot(options) {\n    const env_2 = {\n      stack: [],\n      error: void 0,\n      hasError: false\n    };\n    try {\n      const {\n        fromSurface,\n        omitBackground,\n        optimizeForSpeed,\n        quality,\n        clip: userClip,\n        type,\n        captureBeyondViewport\n      } = options;\n      const isFirefox = this.target()._targetManager() instanceof FirefoxTargetManager;\n      const stack = __addDisposableResource(env_2, new AsyncDisposableStack(), true);\n      // Firefox omits background by default; it's not configurable.\n      if (!isFirefox && omitBackground && (type === 'png' || type === 'webp')) {\n        await _classPrivateFieldGet(_emulationManager, this).setTransparentBackgroundColor();\n        stack.defer(async () => {\n          await _classPrivateFieldGet(_emulationManager, this).resetDefaultBackgroundColor().catch(debugError);\n        });\n      }\n      let clip = userClip;\n      if (clip && !captureBeyondViewport) {\n        const viewport = await this.mainFrame().isolatedRealm().evaluate(() => {\n          const {\n            height,\n            pageLeft: x,\n            pageTop: y,\n            width\n          } = window.visualViewport;\n          return {\n            x,\n            y,\n            height,\n            width\n          };\n        });\n        clip = getIntersectionRect(clip, viewport);\n      }\n      // We need to do these spreads because Firefox doesn't allow unknown options.\n      const {\n        data\n      } = await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.captureScreenshot', {\n        format: type,\n        ...(optimizeForSpeed ? {\n          optimizeForSpeed\n        } : {}),\n        ...(quality !== undefined ? {\n          quality: Math.round(quality)\n        } : {}),\n        ...(clip ? {\n          clip: {\n            ...clip,\n            scale: clip.scale ?? 1\n          }\n        } : {}),\n        ...(!fromSurface ? {\n          fromSurface\n        } : {}),\n        captureBeyondViewport\n      });\n      return data;\n    } catch (e_2) {\n      env_2.error = e_2;\n      env_2.hasError = true;\n    } finally {\n      const result_1 = __disposeResources(env_2);\n      if (result_1) await result_1;\n    }\n  }\n  async createPDFStream(options = {}) {\n    const {\n      timeout: ms = this._timeoutSettings.timeout()\n    } = options;\n    const {\n      landscape,\n      displayHeaderFooter,\n      headerTemplate,\n      footerTemplate,\n      printBackground,\n      scale,\n      width: paperWidth,\n      height: paperHeight,\n      margin,\n      pageRanges,\n      preferCSSPageSize,\n      omitBackground,\n      tagged: generateTaggedPDF,\n      outline: generateDocumentOutline\n    } = parsePDFOptions(options);\n    if (omitBackground) {\n      await _classPrivateFieldGet(_emulationManager, this).setTransparentBackgroundColor();\n    }\n    await firstValueFrom(from(this.mainFrame().isolatedRealm().evaluate(() => {\n      return document.fonts.ready;\n    })).pipe(raceWith(timeout(ms))));\n    const printCommandPromise = _classPrivateFieldGet(_primaryTargetClient, this).send('Page.printToPDF', {\n      transferMode: 'ReturnAsStream',\n      landscape,\n      displayHeaderFooter,\n      headerTemplate,\n      footerTemplate,\n      printBackground,\n      scale,\n      paperWidth,\n      paperHeight,\n      marginTop: margin.top,\n      marginBottom: margin.bottom,\n      marginLeft: margin.left,\n      marginRight: margin.right,\n      pageRanges,\n      preferCSSPageSize,\n      generateTaggedPDF,\n      generateDocumentOutline\n    });\n    const result = await firstValueFrom(from(printCommandPromise).pipe(raceWith(timeout(ms))));\n    if (omitBackground) {\n      await _classPrivateFieldGet(_emulationManager, this).resetDefaultBackgroundColor();\n    }\n    assert(result.stream, '`stream` is missing from `Page.printToPDF');\n    return await getReadableFromProtocolStream(_classPrivateFieldGet(_primaryTargetClient, this), result.stream);\n  }\n  async pdf(options = {}) {\n    const {\n      path = undefined\n    } = options;\n    const readable = await this.createPDFStream(options);\n    const buffer = await getReadableAsBuffer(readable, path);\n    assert(buffer, 'Could not create buffer');\n    return buffer;\n  }\n  async close(options = {\n    runBeforeUnload: undefined\n  }) {\n    const connection = _classPrivateFieldGet(_primaryTargetClient, this).connection();\n    assert(connection, 'Protocol error: Connection closed. Most likely the page has been closed.');\n    const runBeforeUnload = !!options.runBeforeUnload;\n    if (runBeforeUnload) {\n      await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.close');\n    } else {\n      await connection.send('Target.closeTarget', {\n        targetId: _classPrivateFieldGet(_primaryTarget, this)._targetId\n      });\n      await _classPrivateFieldGet(_tabTarget, this)._isClosedDeferred.valueOrThrow();\n    }\n  }\n  isClosed() {\n    return _classPrivateFieldGet(_closed, this);\n  }\n  get mouse() {\n    return _classPrivateFieldGet(_mouse, this);\n  }\n  /**\n   * This method is typically coupled with an action that triggers a device\n   * request from an api such as WebBluetooth.\n   *\n   * :::caution\n   *\n   * This must be called before the device request is made. It will not return a\n   * currently active device prompt.\n   *\n   * :::\n   *\n   * @example\n   *\n   * ```ts\n   * const [devicePrompt] = Promise.all([\n   *   page.waitForDevicePrompt(),\n   *   page.click('#connect-bluetooth'),\n   * ]);\n   * await devicePrompt.select(\n   *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n   * );\n   * ```\n   */\n  async waitForDevicePrompt(options = {}) {\n    return await this.mainFrame().waitForDevicePrompt(options);\n  }\n}\nasync function _onActivation(newSession) {\n  _classPrivateFieldSet(_primaryTargetClient, this, newSession);\n  assert(_classPrivateFieldGet(_primaryTargetClient, this) instanceof CdpCDPSession, 'CDPSession is not instance of CDPSessionImpl');\n  _classPrivateFieldSet(_primaryTarget, this, _classPrivateFieldGet(_primaryTargetClient, this)._target());\n  assert(_classPrivateFieldGet(_primaryTarget, this), 'Missing target on swap');\n  _classPrivateFieldGet(_keyboard, this).updateClient(newSession);\n  _classPrivateFieldGet(_mouse, this).updateClient(newSession);\n  _classPrivateFieldGet(_touchscreen, this).updateClient(newSession);\n  _classPrivateFieldGet(_accessibility, this).updateClient(newSession);\n  _classPrivateFieldGet(_emulationManager, this).updateClient(newSession);\n  _classPrivateFieldGet(_tracing, this).updateClient(newSession);\n  _classPrivateFieldGet(_coverage, this).updateClient(newSession);\n  await _classPrivateFieldGet(_frameManager, this).swapFrameTree(newSession);\n  _assertClassBrand(_CdpPage_brand, this, _setupPrimaryTargetListeners).call(this);\n}\nasync function _onSecondaryTarget(session) {\n  assert(session instanceof CdpCDPSession);\n  if (session._target()._subtype() !== 'prerender') {\n    return;\n  }\n  _classPrivateFieldGet(_frameManager, this).registerSpeculativeSession(session).catch(debugError);\n  _classPrivateFieldGet(_emulationManager, this).registerSpeculativeSession(session).catch(debugError);\n}\n/**\n * Sets up listeners for the primary target. The primary target can change\n * during a navigation to a prerended page.\n */\nfunction _setupPrimaryTargetListeners() {\n  _classPrivateFieldGet(_primaryTargetClient, this).on(CDPSessionEvent.Ready, _classPrivateFieldGet(_onAttachedToTarget, this));\n  for (const [eventName, handler] of _classPrivateFieldGet(_sessionHandlers, this)) {\n    // TODO: Remove any.\n    _classPrivateFieldGet(_primaryTargetClient, this).on(eventName, handler);\n  }\n}\nasync function _initialize() {\n  try {\n    await Promise.all([_classPrivateFieldGet(_frameManager, this).initialize(_classPrivateFieldGet(_primaryTargetClient, this)), _classPrivateFieldGet(_primaryTargetClient, this).send('Performance.enable'), _classPrivateFieldGet(_primaryTargetClient, this).send('Log.enable')]);\n  } catch (err) {\n    if (isErrorLike(err) && isTargetClosedError(err)) {\n      debugError(err);\n    } else {\n      throw err;\n    }\n  }\n}\nasync function _onFileChooser(event) {\n  const env_1 = {\n    stack: [],\n    error: void 0,\n    hasError: false\n  };\n  try {\n    if (!_classPrivateFieldGet(_fileChooserDeferreds, this).size) {\n      return;\n    }\n    const frame = _classPrivateFieldGet(_frameManager, this).frame(event.frameId);\n    assert(frame, 'This should never happen.');\n    // This is guaranteed to be an HTMLInputElement handle by the event.\n    const handle = __addDisposableResource(env_1, await frame.worlds[MAIN_WORLD].adoptBackendNode(event.backendNodeId), false);\n    const fileChooser = new FileChooser(handle.move(), event);\n    for (const promise of _classPrivateFieldGet(_fileChooserDeferreds, this)) {\n      promise.resolve(fileChooser);\n    }\n    _classPrivateFieldGet(_fileChooserDeferreds, this).clear();\n  } catch (e_1) {\n    env_1.error = e_1;\n    env_1.hasError = true;\n  } finally {\n    __disposeResources(env_1);\n  }\n}\nfunction _onTargetCrashed() {\n  this.emit(\"error\" /* PageEvent.Error */, new Error('Page crashed!'));\n}\nfunction _onLogEntryAdded(event) {\n  const {\n    level,\n    text,\n    args,\n    source,\n    url,\n    lineNumber\n  } = event.entry;\n  if (args) {\n    args.map(arg => {\n      void releaseObject(_classPrivateFieldGet(_primaryTargetClient, this), arg);\n    });\n  }\n  if (source !== 'worker') {\n    this.emit(\"console\" /* PageEvent.Console */, new ConsoleMessage(convertConsoleMessageLevel(level), text, [], [{\n      url,\n      lineNumber\n    }]));\n  }\n}\nfunction _emitMetrics(event) {\n  this.emit(\"metrics\" /* PageEvent.Metrics */, {\n    title: event.title,\n    metrics: _assertClassBrand(_CdpPage_brand, this, _buildMetricsObject).call(this, event.metrics)\n  });\n}\nfunction _buildMetricsObject(metrics) {\n  const result = {};\n  for (const metric of metrics || []) {\n    if (supportedMetrics.has(metric.name)) {\n      result[metric.name] = metric.value;\n    }\n  }\n  return result;\n}\nfunction _handleException(exception) {\n  this.emit(\"pageerror\" /* PageEvent.PageError */, createClientError(exception.exceptionDetails));\n}\nfunction _onConsoleAPI(world, event) {\n  const values = event.args.map(arg => {\n    return world.createCdpHandle(arg);\n  });\n  _assertClassBrand(_CdpPage_brand, this, _addConsoleMessage).call(this, convertConsoleMessageLevel(event.type), values, event.stackTrace);\n}\nasync function _onBindingCalled(world, event) {\n  let payload;\n  try {\n    payload = JSON.parse(event.payload);\n  } catch {\n    // The binding was either called by something in the page or it was\n    // called before our wrapper was initialized.\n    return;\n  }\n  const {\n    type,\n    name,\n    seq,\n    args,\n    isTrivial\n  } = payload;\n  if (type !== 'exposedFun') {\n    return;\n  }\n  const context = world.context;\n  if (!context) {\n    return;\n  }\n  const binding = _classPrivateFieldGet(_bindings, this).get(name);\n  await binding?.run(context, seq, args, isTrivial);\n}\nfunction _addConsoleMessage(eventType, args, stackTrace) {\n  if (!this.listenerCount(\"console\" /* PageEvent.Console */)) {\n    args.forEach(arg => {\n      return arg.dispose();\n    });\n    return;\n  }\n  const textTokens = [];\n  // eslint-disable-next-line max-len -- The comment is long.\n  // eslint-disable-next-line rulesdir/use-using -- These are not owned by this function.\n  for (const arg of args) {\n    const remoteObject = arg.remoteObject();\n    if (remoteObject.objectId) {\n      textTokens.push(arg.toString());\n    } else {\n      textTokens.push(valueFromRemoteObject(remoteObject));\n    }\n  }\n  const stackTraceLocations = [];\n  if (stackTrace) {\n    for (const callFrame of stackTrace.callFrames) {\n      stackTraceLocations.push({\n        url: callFrame.url,\n        lineNumber: callFrame.lineNumber,\n        columnNumber: callFrame.columnNumber\n      });\n    }\n  }\n  const message = new ConsoleMessage(convertConsoleMessageLevel(eventType), textTokens.join(' '), args, stackTraceLocations);\n  this.emit(\"console\" /* PageEvent.Console */, message);\n}\nfunction _onDialog(event) {\n  const type = validateDialogType(event.type);\n  const dialog = new CdpDialog(_classPrivateFieldGet(_primaryTargetClient, this), type, event.message, event.defaultPrompt);\n  this.emit(\"dialog\" /* PageEvent.Dialog */, dialog);\n}\nasync function _go(delta, options) {\n  const history = await _classPrivateFieldGet(_primaryTargetClient, this).send('Page.getNavigationHistory');\n  const entry = history.entries[history.currentIndex + delta];\n  if (!entry) {\n    return null;\n  }\n  const result = await Promise.all([this.waitForNavigation(options), _classPrivateFieldGet(_primaryTargetClient, this).send('Page.navigateToHistoryEntry', {\n    entryId: entry.id\n  })]);\n  return result[0];\n}\nconst supportedMetrics = new Set(['Timestamp', 'Documents', 'Frames', 'JSEventListeners', 'Nodes', 'LayoutCount', 'RecalcStyleCount', 'LayoutDuration', 'RecalcStyleDuration', 'ScriptDuration', 'TaskDuration', 'JSHeapUsedSize', 'JSHeapTotalSize']);\n/** @see https://w3c.github.io/webdriver-bidi/#rectangle-intersection */\nfunction getIntersectionRect(clip, viewport) {\n  // Note these will already be normalized.\n  const x = Math.max(clip.x, viewport.x);\n  const y = Math.max(clip.y, viewport.y);\n  return {\n    x,\n    y,\n    width: Math.max(Math.min(clip.x + clip.width, viewport.x + viewport.width) - x, 0),\n    height: Math.max(Math.min(clip.y + clip.height, viewport.y + viewport.height) - y, 0)\n  };\n}","map":{"version":3,"names":["firstValueFrom","from","raceWith","CDPSessionEvent","Page","ConsoleMessage","TargetCloseError","FileChooser","NetworkManagerEvent","debugError","evaluationString","getReadableAsBuffer","getReadableFromProtocolStream","parsePDFOptions","timeout","validateDialogType","assert","Deferred","AsyncDisposableStack","isErrorLike","Accessibility","Binding","CdpCDPSession","isTargetClosedError","Coverage","CdpDialog","EmulationManager","FirefoxTargetManager","FrameManager","FrameManagerEvent","CdpKeyboard","CdpMouse","CdpTouchscreen","MAIN_WORLD","releaseObject","Tracing","createClientError","pageBindingInitString","valueFromRemoteObject","CdpWebWorker","convertConsoleMessageLevel","method","_closed","WeakMap","_targetManager","_primaryTargetClient","_primaryTarget","_tabTargetClient","_tabTarget","_keyboard","_mouse","_touchscreen","_accessibility","_frameManager","_emulationManager","_tracing","_bindings","_exposedFunctions","_coverage","_viewport","_workers","_fileChooserDeferreds","_sessionCloseDeferred","_serviceWorkerBypassed","_userDragInterceptionEnabled","_frameManagerHandlers","_networkManagerHandlers","_sessionHandlers","_CdpPage_brand","WeakSet","_onDetachedFromTarget","_onAttachedToTarget","CdpPage","_create","client","target","defaultViewport","page","_assertClassBrand","_initialize","call","setViewport","err","constructor","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","Map","Set","create","FrameAttached","frame","emit","FrameDetached","FrameNavigated","Request","request","RequestServedFromCache","Response","response","RequestFailed","RequestFinished","Disconnected","_classPrivateFieldGet","reject","undefined","_onDialog","bind","_handleException","_onTargetCrashed","_emitMetrics","_onLogEntryAdded","_onFileChooser","sessionId","_session","id","worker","get","delete","session","onAttachedToTarget","_target","_getTargetInfo","type","url","_targetId","_addConsoleMessage","set","on","Ready","_classPrivateFieldSet","parentSession","_timeoutSettings","eventName","handler","ConsoleApiCalled","world","event","_onConsoleAPI","BindingCalled","_onBindingCalled","networkManager","Swapped","_onActivation","_onSecondaryTarget","_isClosedDeferred","valueOrThrow","then","off","catch","_setupPrimaryTargetListeners","_client","isServiceWorkerBypassed","isDragInterceptionEnabled","isJavaScriptEnabled","javascriptEnabled","waitForFileChooser","options","needsEnable","size","deferred","message","add","enablePromise","send","enabled","result","Promise","all","error","setGeolocation","browser","browserContext","mainFrame","keyboard","touchscreen","coverage","tracing","accessibility","frames","workers","Array","values","setRequestInterception","value","setBypassServiceWorker","bypass","setDragInterception","setOfflineMode","emulateNetworkConditions","networkConditions","setDefaultNavigationTimeout","setDefaultTimeout","getDefaultTimeout","queryObjects","prototypeHandle","disposed","prototypeObjectId","mainRealm","createCdpHandle","objects","cookies","urls","originalCookies","length","unsupportedCookieAttributes","filterUnsupportedAttributes","cookie","attr","map","deleteCookie","pageURL","item","Object","assign","startsWith","setCookie","startsWithHTTP","items","name","String","prototype","exposeFunction","pptrFunction","has","Error","binding","default","expression","identifier","source","_hasStartedLoading","evaluate","removeExposedFunction","exposedFun","removeScriptToEvaluateOnNewDocument","globalThis","authenticate","credentials","setExtraHTTPHeaders","headers","setUserAgent","userAgent","userAgentMetadata","metrics","_buildMetricsObject","reload","waitForNavigation","ignoreSameDocumentNavigation","createCDPSession","goBack","_go","goForward","bringToFront","setJavaScriptEnabled","setBypassCSP","emulateMediaType","emulateCPUThrottling","factor","emulateMediaFeatures","features","emulateTimezone","timezoneId","emulateIdleState","overrides","emulateVisionDeficiency","viewport","needsReload","emulateViewport","evaluateOnNewDocument","pageFunction","args","setCacheEnabled","_screenshot","fromSurface","omitBackground","optimizeForSpeed","quality","clip","userClip","captureBeyondViewport","isFirefox","stack","__addDisposableResource","env_2","setTransparentBackgroundColor","defer","resetDefaultBackgroundColor","isolatedRealm","height","pageLeft","x","pageTop","y","width","window","visualViewport","getIntersectionRect","data","format","Math","round","scale","createPDFStream","ms","landscape","displayHeaderFooter","headerTemplate","footerTemplate","printBackground","paperWidth","paperHeight","margin","pageRanges","preferCSSPageSize","tagged","generateTaggedPDF","outline","generateDocumentOutline","document","fonts","ready","pipe","printCommandPromise","transferMode","marginTop","top","marginBottom","bottom","marginLeft","left","marginRight","right","stream","pdf","path","readable","buffer","close","runBeforeUnload","connection","targetId","isClosed","mouse","waitForDevicePrompt","newSession","updateClient","swapFrameTree","_subtype","registerSpeculativeSession","initialize","frameId","handle","env_1","worlds","adoptBackendNode","backendNodeId","fileChooser","move","promise","resolve","clear","level","text","lineNumber","entry","arg","title","metric","supportedMetrics","exception","exceptionDetails","stackTrace","payload","JSON","parse","seq","isTrivial","context","run","eventType","listenerCount","forEach","dispose","textTokens","remoteObject","objectId","push","toString","stackTraceLocations","callFrame","callFrames","columnNumber","join","dialog","defaultPrompt","delta","history","entries","currentIndex","entryId","max","min"],"sources":["../../../../src/cdp/Page.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}