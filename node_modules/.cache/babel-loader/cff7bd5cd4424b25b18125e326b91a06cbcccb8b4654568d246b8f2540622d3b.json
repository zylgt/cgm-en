{"ast":null,"code":"import _classPrivateFieldInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _defineProperty from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classPrivateFieldSet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport _classPrivateFieldGet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\n/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { TaskManager, WaitTask } from '../common/WaitTask.js';\nimport { disposeSymbol } from '../util/disposable.js';\n/**\n * @internal\n */\nvar _disposed = /*#__PURE__*/new WeakMap();\nexport class Realm {\n  constructor(timeoutSettings) {\n    _defineProperty(this, \"timeoutSettings\", void 0);\n    _defineProperty(this, \"taskManager\", new TaskManager());\n    _classPrivateFieldInitSpec(this, _disposed, false);\n    this.timeoutSettings = timeoutSettings;\n  }\n  async waitForFunction(pageFunction, options = {}, ...args) {\n    const {\n      polling = 'raf',\n      timeout = this.timeoutSettings.timeout(),\n      root,\n      signal\n    } = options;\n    if (typeof polling === 'number' && polling < 0) {\n      throw new Error('Cannot poll with non-positive interval');\n    }\n    const waitTask = new WaitTask(this, {\n      polling,\n      root,\n      timeout,\n      signal\n    }, pageFunction, ...args);\n    return await waitTask.result;\n  }\n  get disposed() {\n    return _classPrivateFieldGet(_disposed, this);\n  }\n  /** @internal */\n  dispose() {\n    _classPrivateFieldSet(_disposed, this, true);\n    this.taskManager.terminateAll(new Error('waitForFunction failed: frame got detached.'));\n  }\n  /** @internal */\n  [disposeSymbol]() {\n    this.dispose();\n  }\n}","map":{"version":3,"names":["TaskManager","WaitTask","disposeSymbol","_disposed","WeakMap","Realm","constructor","timeoutSettings","_defineProperty","_classPrivateFieldInitSpec","waitForFunction","pageFunction","options","args","polling","timeout","root","signal","Error","waitTask","result","disposed","_classPrivateFieldGet","dispose","_classPrivateFieldSet","taskManager","terminateAll"],"sources":["../../../../src/api/Realm.ts"],"sourcesContent":[null],"mappings":";;;;AAAA;;;;;AAYA,SAAQA,WAAW,EAAEC,QAAQ,QAAO,uBAAuB;AAC3D,SAAQC,aAAa,QAAO,uBAAuB;AAMnD;;;AAAA,IAAAC,SAAA,oBAAAC,OAAA;AAGA,OAAM,MAAgBC,KAAK;EAIzBC,YAAYC,eAAgC;IAAAC,eAAA;IAAAA,eAAA,sBAFrB,IAAIR,WAAW,EAAE;IAAAS,0BAAA,OAAAN,SAAA,EAuE5B,KAAK;IApEf,IAAI,CAACI,eAAe,GAAGA,eAAe;EACxC;EAqBA,MAAMG,eAAeA,CAMnBC,YAA2B,EAC3BC,OAAA,GAKI,EAAE,EACN,GAAGC,IAAY;IAEf,MAAM;MACJC,OAAO,GAAG,KAAK;MACfC,OAAO,GAAG,IAAI,CAACR,eAAe,CAACQ,OAAO,EAAE;MACxCC,IAAI;MACJC;IAAM,CACP,GAAGL,OAAO;IACX,IAAI,OAAOE,OAAO,KAAK,QAAQ,IAAIA,OAAO,GAAG,CAAC,EAAE;MAC9C,MAAM,IAAII,KAAK,CAAC,wCAAwC,CAAC;IAC3D;IACA,MAAMC,QAAQ,GAAG,IAAIlB,QAAQ,CAC3B,IAAI,EACJ;MACEa,OAAO;MACPE,IAAI;MACJD,OAAO;MACPE;KACD,EACDN,YAEU,EACV,GAAGE,IAAI,CACR;IACD,OAAO,MAAMM,QAAQ,CAACC,MAAM;EAC9B;EAIA,IAAIC,QAAQA,CAAA;IACV,OAAAC,qBAAA,CAAAnB,SAAA,EAAO,IAAI;EACb;EAGA;EACAoB,OAAOA,CAAA;IACLC,qBAAA,CAAArB,SAAA,MAAI,EAAa,IAAI;IACrB,IAAI,CAACsB,WAAW,CAACC,YAAY,CAC3B,IAAIR,KAAK,CAAC,6CAA6C,CAAC,CACzD;EACH;EACA;EACA,CAAChB,aAAa,IAAC;IACb,IAAI,CAACqB,OAAO,EAAE;EAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}