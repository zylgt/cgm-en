{"ast":null,"code":"\"use strict\";\n\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.scriptInjector = exports.ScriptInjector = void 0;\n/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nconst injected_js_1 = require(\"../generated/injected.js\");\n/**\n * @internal\n */\nvar _updated = /*#__PURE__*/new WeakMap();\nvar _amendments = /*#__PURE__*/new WeakMap();\nvar _ScriptInjector_brand = /*#__PURE__*/new WeakSet();\nclass ScriptInjector {\n  constructor() {\n    _classPrivateMethodInitSpec(this, _ScriptInjector_brand);\n    _classPrivateFieldInitSpec(this, _updated, false);\n    _classPrivateFieldInitSpec(this, _amendments, new Set());\n  }\n  // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n  append(statement) {\n    _assertClassBrand(_ScriptInjector_brand, this, _update).call(this, () => {\n      _classPrivateFieldGet(_amendments, this).add(statement);\n    });\n  }\n  pop(statement) {\n    _assertClassBrand(_ScriptInjector_brand, this, _update).call(this, () => {\n      _classPrivateFieldGet(_amendments, this).delete(statement);\n    });\n  }\n  inject(inject, force = false) {\n    if (_classPrivateFieldGet(_updated, this) || force) {\n      inject(_assertClassBrand(_ScriptInjector_brand, this, _get).call(this));\n    }\n    _classPrivateFieldSet(_updated, this, false);\n  }\n}\nfunction _update(callback) {\n  callback();\n  _classPrivateFieldSet(_updated, this, true);\n}\nfunction _get() {\n  return `(() => {\n      const module = {};\n      ${injected_js_1.source}\n      ${[..._classPrivateFieldGet(_amendments, this)].map(statement => {\n    return `(${statement})(module.exports.default);`;\n  }).join('')}\n      return module.exports.default;\n    })()`;\n}\nexports.ScriptInjector = ScriptInjector;\n/**\n * @internal\n */\nexports.scriptInjector = new ScriptInjector();","map":{"version":3,"names":["injected_js_1","require","_updated","WeakMap","_amendments","_ScriptInjector_brand","WeakSet","ScriptInjector","constructor","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","Set","append","statement","_assertClassBrand","_update","call","_classPrivateFieldGet","add","pop","delete","inject","force","_get","_classPrivateFieldSet","callback","source","map","join","exports","scriptInjector"],"sources":["../../../../src/common/ScriptInjector.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA;;;;;AAKA,MAAAA,aAAA,GAAAC,OAAA;AAEA;;;AAAA,IAAAC,QAAA,oBAAAC,OAAA;AAAA,IAAAC,WAAA,oBAAAD,OAAA;AAAA,IAAAE,qBAAA,oBAAAC,OAAA;AAGA,MAAaC,cAAc;EAAAC,YAAA;IAAAC,2BAAA,OAAAJ,qBAAA;IAAAK,0BAAA,OAAAR,QAAA,EACd,KAAK;IAAAQ,0BAAA,OAAAN,WAAA,EACF,IAAIO,GAAG,EAAU;EAAA;EAE/B;EACAC,MAAMA,CAACC,SAAiB;IACtBC,iBAAA,CAAAT,qBAAA,MAAI,EAAAU,OAAA,EAAAC,IAAA,CAAJ,IAAI,EAAS,MAAK;MAChBC,qBAAA,CAAAb,WAAA,MAAI,EAAac,GAAG,CAACL,SAAS,CAAC;IACjC,CAAC;EACH;EAEAM,GAAGA,CAACN,SAAiB;IACnBC,iBAAA,CAAAT,qBAAA,MAAI,EAAAU,OAAA,EAAAC,IAAA,CAAJ,IAAI,EAAS,MAAK;MAChBC,qBAAA,CAAAb,WAAA,MAAI,EAAagB,MAAM,CAACP,SAAS,CAAC;IACpC,CAAC;EACH;EAEAQ,MAAMA,CAACA,MAAgC,EAAEC,KAAK,GAAG,KAAK;IACpD,IAAIL,qBAAA,CAAAf,QAAA,MAAI,KAAaoB,KAAK,EAAE;MAC1BD,MAAM,CAAAP,iBAAA,CAAAT,qBAAA,EAAC,IAAI,EAAAkB,IAAA,EAAAP,IAAA,CAAJ,IAAI,CAAO,CAAC;IACrB;IACAQ,qBAAA,CAAAtB,QAAA,MAAI,EAAY,KAAK;EACvB;;AAmBD,SAAAa,QAjBSU,QAAoB;EAC1BA,QAAQ,EAAE;EACVD,qBAAA,CAAAtB,QAAA,MAAI,EAAY,IAAI;AACtB;AAAC,SAAAqB,KAAA,EAEG;EACF,OAAO;;QAEHvB,aAAA,CAAA0B,MAAc;QACd,CAAC,GAAAT,qBAAA,CAAAb,WAAA,EAAG,IAAI,CAAY,CAAC,CACpBuB,GAAG,CAACd,SAAS,IAAG;IACf,OAAO,IAAIA,SAAS,4BAA4B;EAClD,CAAC,CAAC,CACDe,IAAI,CAAC,EAAE,CAAC;;SAER;AACP;AAxCFC,OAAA,CAAAtB,cAAA,GAAAA,cAAA;AA2CA;;;AAGasB,OAAA,CAAAC,cAAc,GAAG,IAAIvB,cAAc,EAAE","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}