{"ast":null,"code":"\"use strict\";\n\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateGetter = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateGetter.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array-buffer.detached.js\");\nrequire(\"core-js/modules/es.array-buffer.transfer.js\");\nrequire(\"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\");\nrequire(\"core-js/modules/es.typed-array.to-reversed.js\");\nrequire(\"core-js/modules/es.typed-array.to-sorted.js\");\nrequire(\"core-js/modules/es.typed-array.with.js\");\nrequire(\"core-js/modules/web.dom-exception.stack.js\");\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiHTTPRequest = exports.requests = void 0;\nconst HTTPRequest_js_1 = require(\"../api/HTTPRequest.js\");\nconst Errors_js_1 = require(\"../common/Errors.js\");\nconst HTTPResponse_js_1 = require(\"./HTTPResponse.js\");\nexports.requests = new WeakMap();\n/**\n * @internal\n */\nvar _redirectBy = /*#__PURE__*/new WeakMap();\nvar _response = /*#__PURE__*/new WeakMap();\nvar _frame = /*#__PURE__*/new WeakMap();\nvar _request = /*#__PURE__*/new WeakMap();\nvar _BidiHTTPRequest_brand = /*#__PURE__*/new WeakSet();\nvar _authenticationHandled = /*#__PURE__*/new WeakMap();\nvar _handleAuthentication = /*#__PURE__*/new WeakMap();\nclass BidiHTTPRequest extends HTTPRequest_js_1.HTTPRequest {\n  static from(bidiRequest, frame, redirect) {\n    const request = new _a(bidiRequest, frame, redirect);\n    _assertClassBrand(_BidiHTTPRequest_brand, request, _initialize).call(request);\n    return request;\n  }\n  constructor(_request2, frame, redirectBy) {\n    super();\n    _classPrivateMethodInitSpec(this, _BidiHTTPRequest_brand);\n    _classPrivateFieldInitSpec(this, _redirectBy, void 0);\n    _classPrivateFieldInitSpec(this, _response, null);\n    _defineProperty(this, \"id\", void 0);\n    _classPrivateFieldInitSpec(this, _frame, void 0);\n    _classPrivateFieldInitSpec(this, _request, void 0);\n    _classPrivateFieldInitSpec(this, _authenticationHandled, false);\n    _classPrivateFieldInitSpec(this, _handleAuthentication, async () => {\n      if (!_classPrivateFieldGet(_frame, this)) {\n        return;\n      }\n      const credentials = _classPrivateFieldGet(_frame, this).page()._credentials;\n      if (credentials && !_classPrivateFieldGet(_authenticationHandled, this)) {\n        _classPrivateFieldSet(_authenticationHandled, this, true);\n        void _classPrivateFieldGet(_request, this).continueWithAuth({\n          action: 'provideCredentials',\n          credentials: {\n            type: 'password',\n            username: credentials.username,\n            password: credentials.password\n          }\n        });\n      } else {\n        void _classPrivateFieldGet(_request, this).continueWithAuth({\n          action: 'cancel'\n        });\n      }\n    });\n    exports.requests.set(_request2, this);\n    this.interception.enabled = _request2.isBlocked;\n    _classPrivateFieldSet(_request, this, _request2);\n    _classPrivateFieldSet(_frame, this, frame);\n    _classPrivateFieldSet(_redirectBy, this, redirectBy);\n    this.id = _request2.id;\n  }\n  get client() {\n    return _classPrivateFieldGet(_frame, this).client;\n  }\n  url() {\n    return _classPrivateFieldGet(_request, this).url;\n  }\n  resourceType() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  method() {\n    return _classPrivateFieldGet(_request, this).method;\n  }\n  postData() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  hasPostData() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  async fetchPostData() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  headers() {\n    const headers = {};\n    for (const header of _classPrivateFieldGet(_request, this).headers) {\n      headers[header.name.toLowerCase()] = header.value.value;\n    }\n    return {\n      ...headers,\n      ..._classPrivateGetter(_BidiHTTPRequest_brand, this, _get_extraHTTPHeaders),\n      ..._classPrivateGetter(_BidiHTTPRequest_brand, this, _get_userAgentHeaders)\n    };\n  }\n  response() {\n    return _classPrivateFieldGet(_response, this);\n  }\n  failure() {\n    if (_classPrivateFieldGet(_request, this).error === undefined) {\n      return null;\n    }\n    return {\n      errorText: _classPrivateFieldGet(_request, this).error\n    };\n  }\n  isNavigationRequest() {\n    return _classPrivateFieldGet(_request, this).navigation !== undefined;\n  }\n  initiator() {\n    return _classPrivateFieldGet(_request, this).initiator;\n  }\n  redirectChain() {\n    if (_classPrivateFieldGet(_redirectBy, this) === undefined) {\n      return [];\n    }\n    const redirects = [_classPrivateFieldGet(_redirectBy, this)];\n    for (const redirect of redirects) {\n      if (_classPrivateFieldGet(_redirectBy, redirect) !== undefined) {\n        redirects.push(_classPrivateFieldGet(_redirectBy, redirect));\n      }\n    }\n    return redirects;\n  }\n  frame() {\n    return _classPrivateFieldGet(_frame, this);\n  }\n  async continue(overrides, priority) {\n    return await super.continue({\n      headers: _classPrivateGetter(_BidiHTTPRequest_brand, this, _get_hasInternalHeaderOverwrite) ? this.headers() : undefined,\n      ...overrides\n    }, priority);\n  }\n  async _continue(overrides = {}) {\n    const headers = getBidiHeaders(overrides.headers);\n    this.interception.handled = true;\n    return await _classPrivateFieldGet(_request, this).continueRequest({\n      url: overrides.url,\n      method: overrides.method,\n      body: overrides.postData ? {\n        type: 'base64',\n        value: btoa(overrides.postData)\n      } : undefined,\n      headers: headers.length > 0 ? headers : undefined\n    }).catch(error => {\n      this.interception.handled = false;\n      return (0, HTTPRequest_js_1.handleError)(error);\n    });\n  }\n  async _abort() {\n    this.interception.handled = true;\n    return await _classPrivateFieldGet(_request, this).failRequest().catch(error => {\n      this.interception.handled = false;\n      throw error;\n    });\n  }\n  async _respond(response, _priority) {\n    this.interception.handled = true;\n    const responseBody = response.body && response.body instanceof Uint8Array ? response.body.toString('base64') : response.body ? btoa(response.body) : undefined;\n    const headers = getBidiHeaders(response.headers);\n    const hasContentLength = headers.some(header => {\n      return header.name === 'content-length';\n    });\n    if (response.contentType) {\n      headers.push({\n        name: 'content-type',\n        value: {\n          type: 'string',\n          value: response.contentType\n        }\n      });\n    }\n    if (responseBody && !hasContentLength) {\n      const encoder = new TextEncoder();\n      headers.push({\n        name: 'content-length',\n        value: {\n          type: 'string',\n          value: String(encoder.encode(responseBody).byteLength)\n        }\n      });\n    }\n    const status = response.status || 200;\n    return await _classPrivateFieldGet(_request, this).provideResponse({\n      statusCode: status,\n      headers: headers.length > 0 ? headers : undefined,\n      reasonPhrase: HTTPRequest_js_1.STATUS_TEXTS[status],\n      body: responseBody ? {\n        type: 'base64',\n        value: responseBody\n      } : undefined\n    }).catch(error => {\n      this.interception.handled = false;\n      throw error;\n    });\n  }\n}\nfunction _initialize() {\n  _classPrivateFieldGet(_request, this).on('redirect', request => {\n    const httpRequest = _a.from(request, _classPrivateFieldGet(_frame, this), this);\n    request.once('success', () => {\n      _classPrivateFieldGet(_frame, this).page().trustedEmitter.emit(\"requestfinished\" /* PageEvent.RequestFinished */, httpRequest);\n    });\n    request.once('error', () => {\n      _classPrivateFieldGet(_frame, this).page().trustedEmitter.emit(\"requestfailed\" /* PageEvent.RequestFailed */, httpRequest);\n    });\n    void httpRequest.finalizeInterceptions();\n  });\n  _classPrivateFieldGet(_request, this).once('success', data => {\n    _classPrivateFieldSet(_response, this, HTTPResponse_js_1.BidiHTTPResponse.from(data, this));\n  });\n  _classPrivateFieldGet(_request, this).on('authenticate', _classPrivateFieldGet(_handleAuthentication, this));\n  _classPrivateFieldGet(_frame, this).page().trustedEmitter.emit(\"request\" /* PageEvent.Request */, this);\n  if (_classPrivateGetter(_BidiHTTPRequest_brand, this, _get_hasInternalHeaderOverwrite)) {\n    this.interception.handlers.push(async () => {\n      await this.continue({\n        headers: this.headers()\n      }, 0);\n    });\n  }\n}\nfunction _get_hasInternalHeaderOverwrite(_this) {\n  return Boolean(Object.keys(_classPrivateGetter(_BidiHTTPRequest_brand, _this, _get_extraHTTPHeaders)).length || Object.keys(_classPrivateGetter(_BidiHTTPRequest_brand, _this, _get_userAgentHeaders)).length);\n}\nfunction _get_extraHTTPHeaders(_this2) {\n  return _classPrivateFieldGet(_frame, _this2)?.page()._extraHTTPHeaders ?? {};\n}\nfunction _get_userAgentHeaders(_this3) {\n  return _classPrivateFieldGet(_frame, _this3)?.page()._userAgentHeaders ?? {};\n}\nexports.BidiHTTPRequest = BidiHTTPRequest;\n_a = BidiHTTPRequest;\nfunction getBidiHeaders(rawHeaders) {\n  const headers = [];\n  for (const [name, value] of Object.entries(rawHeaders ?? [])) {\n    if (!Object.is(value, undefined)) {\n      const values = Array.isArray(value) ? value : [value];\n      for (const value of values) {\n        headers.push({\n          name: name.toLowerCase(),\n          value: {\n            type: 'string',\n            value: String(value)\n          }\n        });\n      }\n    }\n  }\n  return headers;\n}","map":{"version":3,"names":["HTTPRequest_js_1","require","Errors_js_1","HTTPResponse_js_1","exports","requests","WeakMap","_redirectBy","_response","_frame","_request","_BidiHTTPRequest_brand","WeakSet","_authenticationHandled","_handleAuthentication","BidiHTTPRequest","HTTPRequest","from","bidiRequest","frame","redirect","request","_a","_assertClassBrand","_initialize","call","constructor","redirectBy","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","_defineProperty","_classPrivateFieldGet","credentials","page","_credentials","_classPrivateFieldSet","continueWithAuth","action","type","username","password","set","interception","enabled","isBlocked","id","client","url","resourceType","UnsupportedOperation","method","postData","hasPostData","fetchPostData","headers","header","name","toLowerCase","value","_classPrivateGetter","_get_extraHTTPHeaders","_get_userAgentHeaders","response","failure","error","undefined","errorText","isNavigationRequest","navigation","initiator","redirectChain","redirects","push","continue","overrides","priority","_get_hasInternalHeaderOverwrite","_continue","getBidiHeaders","handled","continueRequest","body","btoa","length","catch","handleError","_abort","failRequest","_respond","_priority","responseBody","Uint8Array","toString","hasContentLength","some","contentType","encoder","TextEncoder","String","encode","byteLength","status","provideResponse","statusCode","reasonPhrase","STATUS_TEXTS","on","httpRequest","once","trustedEmitter","emit","finalizeInterceptions","data","BidiHTTPResponse","handlers","_this","Boolean","Object","keys","_this2","_extraHTTPHeaders","_this3","_userAgentHeaders","rawHeaders","entries","is","values","Array","isArray"],"sources":["../../../../src/bidi/HTTPRequest.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}