{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/web.url.can-parse.js\");\nrequire(\"core-js/modules/web.url-search-params.delete.js\");\nrequire(\"core-js/modules/web.url-search-params.has.js\");\nrequire(\"core-js/modules/web.url-search-params.size.js\");\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiPage = void 0;\nconst rxjs_js_1 = require(\"../../third_party/rxjs/rxjs.js\");\nconst Page_js_1 = require(\"../api/Page.js\");\nconst Accessibility_js_1 = require(\"../cdp/Accessibility.js\");\nconst Coverage_js_1 = require(\"../cdp/Coverage.js\");\nconst EmulationManager_js_1 = require(\"../cdp/EmulationManager.js\");\nconst Tracing_js_1 = require(\"../cdp/Tracing.js\");\nconst Errors_js_1 = require(\"../common/Errors.js\");\nconst EventEmitter_js_1 = require(\"../common/EventEmitter.js\");\nconst util_js_1 = require(\"../common/util.js\");\nconst assert_js_1 = require(\"../util/assert.js\");\nconst decorators_js_1 = require(\"../util/decorators.js\");\nconst ErrorLike_js_1 = require(\"../util/ErrorLike.js\");\nconst Frame_js_1 = require(\"./Frame.js\");\nconst Input_js_1 = require(\"./Input.js\");\nconst util_js_2 = require(\"./util.js\");\n/**\n * Implements Page using WebDriver BiDi.\n *\n * @internal\n */\nlet BidiPage = ((_BidiPage, _trustedEmitter_accessor_storage, _browserContext, _frame, _viewport, _workers, _cdpEmulationManager, _BidiPage_brand, _userAgentInterception, _userAgentPreloadScript, _userInterception, _extraHeadersInterception, _authInterception) => {\n  let _classSuper = Page_js_1.Page;\n  let _instanceExtraInitializers = [];\n  let _trustedEmitter_decorators;\n  let _trustedEmitter_initializers = [];\n  return _trustedEmitter_accessor_storage = /*#__PURE__*/new WeakMap(), _browserContext = /*#__PURE__*/new WeakMap(), _frame = /*#__PURE__*/new WeakMap(), _viewport = /*#__PURE__*/new WeakMap(), _workers = /*#__PURE__*/new WeakMap(), _cdpEmulationManager = /*#__PURE__*/new WeakMap(), _BidiPage_brand = /*#__PURE__*/new WeakSet(), _userAgentInterception = /*#__PURE__*/new WeakMap(), _userAgentPreloadScript = /*#__PURE__*/new WeakMap(), _userInterception = /*#__PURE__*/new WeakMap(), _extraHeadersInterception = /*#__PURE__*/new WeakMap(), _authInterception = /*#__PURE__*/new WeakMap(), (_BidiPage = class BidiPage extends _classSuper {\n    static from(browserContext, browsingContext) {\n      const page = new BidiPage(browserContext, browsingContext);\n      _assertClassBrand(_BidiPage_brand, page, _initialize).call(page);\n      return page;\n    }\n    get trustedEmitter() {\n      return _classPrivateFieldGet(_trustedEmitter_accessor_storage, this);\n    }\n    set trustedEmitter(value) {\n      _classPrivateFieldSet(_trustedEmitter_accessor_storage, this, value);\n    }\n    _client() {\n      return _classPrivateFieldGet(_frame, this).client;\n    }\n    constructor(browserContext, browsingContext) {\n      super();\n      _classPrivateMethodInitSpec(this, _BidiPage_brand);\n      _classPrivateFieldInitSpec(this, _trustedEmitter_accessor_storage, (__runInitializers(this, _instanceExtraInitializers), __runInitializers(this, _trustedEmitter_initializers, new EventEmitter_js_1.EventEmitter())));\n      _classPrivateFieldInitSpec(this, _browserContext, void 0);\n      _classPrivateFieldInitSpec(this, _frame, void 0);\n      _classPrivateFieldInitSpec(this, _viewport, null);\n      _classPrivateFieldInitSpec(this, _workers, new Set());\n      _defineProperty(this, \"keyboard\", void 0);\n      _defineProperty(this, \"mouse\", void 0);\n      _defineProperty(this, \"touchscreen\", void 0);\n      _defineProperty(this, \"accessibility\", void 0);\n      _defineProperty(this, \"tracing\", void 0);\n      _defineProperty(this, \"coverage\", void 0);\n      _classPrivateFieldInitSpec(this, _cdpEmulationManager, void 0);\n      /**\n       * @internal\n       */\n      _defineProperty(this, \"_userAgentHeaders\", {});\n      _classPrivateFieldInitSpec(this, _userAgentInterception, void 0);\n      _classPrivateFieldInitSpec(this, _userAgentPreloadScript, void 0);\n      _classPrivateFieldInitSpec(this, _userInterception, void 0);\n      /**\n       * @internal\n       */\n      _defineProperty(this, \"_extraHTTPHeaders\", {});\n      _classPrivateFieldInitSpec(this, _extraHeadersInterception, void 0);\n      /**\n       * @internal\n       */\n      _defineProperty(this, \"_credentials\", null);\n      _classPrivateFieldInitSpec(this, _authInterception, void 0);\n      _classPrivateFieldSet(_browserContext, this, browserContext);\n      _classPrivateFieldSet(_frame, this, Frame_js_1.BidiFrame.from(this, browsingContext));\n      _classPrivateFieldSet(_cdpEmulationManager, this, new EmulationManager_js_1.EmulationManager(_classPrivateFieldGet(_frame, this).client));\n      this.accessibility = new Accessibility_js_1.Accessibility(_classPrivateFieldGet(_frame, this).client);\n      this.tracing = new Tracing_js_1.Tracing(_classPrivateFieldGet(_frame, this).client);\n      this.coverage = new Coverage_js_1.Coverage(_classPrivateFieldGet(_frame, this).client);\n      this.keyboard = new Input_js_1.BidiKeyboard(this);\n      this.mouse = new Input_js_1.BidiMouse(this);\n      this.touchscreen = new Input_js_1.BidiTouchscreen(this);\n    }\n    async setUserAgent(userAgent, userAgentMetadata) {\n      if (!_classPrivateFieldGet(_browserContext, this).browser().cdpSupported && userAgentMetadata) {\n        throw new Errors_js_1.UnsupportedOperation('Current Browser does not support `userAgentMetadata`');\n      } else if (_classPrivateFieldGet(_browserContext, this).browser().cdpSupported && userAgentMetadata) {\n        return await this._client().send('Network.setUserAgentOverride', {\n          userAgent: userAgent,\n          userAgentMetadata: userAgentMetadata\n        });\n      }\n      const enable = userAgent !== '';\n      userAgent = userAgent ?? (await _classPrivateFieldGet(_browserContext, this).browser().userAgent());\n      this._userAgentHeaders = enable ? {\n        'User-Agent': userAgent\n      } : {};\n      _classPrivateFieldSet(_userAgentInterception, this, await _assertClassBrand(_BidiPage_brand, this, _toggleInterception).call(this, [\"beforeRequestSent\" /* Bidi.Network.InterceptPhase.BeforeRequestSent */], _classPrivateFieldGet(_userAgentInterception, this), enable));\n      const changeUserAgent = userAgent => {\n        Object.defineProperty(navigator, 'userAgent', {\n          value: userAgent\n        });\n      };\n      const frames = [_classPrivateFieldGet(_frame, this)];\n      for (const frame of frames) {\n        frames.push(...frame.childFrames());\n      }\n      if (_classPrivateFieldGet(_userAgentPreloadScript, this)) {\n        await this.removeScriptToEvaluateOnNewDocument(_classPrivateFieldGet(_userAgentPreloadScript, this));\n      }\n      const [evaluateToken] = await Promise.all([enable ? this.evaluateOnNewDocument(changeUserAgent, userAgent) : undefined,\n      // When we disable the UserAgent we want to\n      // evaluate the original value in all Browsing Contexts\n      frames.map(frame => {\n        return frame.evaluate(changeUserAgent, userAgent);\n      })]);\n      _classPrivateFieldSet(_userAgentPreloadScript, this, evaluateToken?.identifier);\n    }\n    async setBypassCSP(enabled) {\n      // TODO: handle CDP-specific cases such as mprach.\n      await this._client().send('Page.setBypassCSP', {\n        enabled\n      });\n    }\n    async queryObjects(prototypeHandle) {\n      (0, assert_js_1.assert)(!prototypeHandle.disposed, 'Prototype JSHandle is disposed!');\n      (0, assert_js_1.assert)(prototypeHandle.id, 'Prototype JSHandle must not be referencing primitive value');\n      const response = await _classPrivateFieldGet(_frame, this).client.send('Runtime.queryObjects', {\n        prototypeObjectId: prototypeHandle.id\n      });\n      return _classPrivateFieldGet(_frame, this).mainRealm().createHandle({\n        type: 'array',\n        handle: response.objects.objectId\n      });\n    }\n    browser() {\n      return this.browserContext().browser();\n    }\n    browserContext() {\n      return _classPrivateFieldGet(_browserContext, this);\n    }\n    mainFrame() {\n      return _classPrivateFieldGet(_frame, this);\n    }\n    async focusedFrame() {\n      const env_1 = {\n        stack: [],\n        error: void 0,\n        hasError: false\n      };\n      try {\n        const handle = __addDisposableResource(env_1, await this.mainFrame().isolatedRealm().evaluateHandle(() => {\n          let win = window;\n          while (win.document.activeElement instanceof win.HTMLIFrameElement || win.document.activeElement instanceof win.HTMLFrameElement) {\n            if (win.document.activeElement.contentWindow === null) {\n              break;\n            }\n            win = win.document.activeElement.contentWindow;\n          }\n          return win;\n        }), false);\n        const value = handle.remoteValue();\n        (0, assert_js_1.assert)(value.type === 'window');\n        const frame = this.frames().find(frame => {\n          return frame._id === value.value.context;\n        });\n        (0, assert_js_1.assert)(frame);\n        return frame;\n      } catch (e_1) {\n        env_1.error = e_1;\n        env_1.hasError = true;\n      } finally {\n        __disposeResources(env_1);\n      }\n    }\n    frames() {\n      const frames = [_classPrivateFieldGet(_frame, this)];\n      for (const frame of frames) {\n        frames.push(...frame.childFrames());\n      }\n      return frames;\n    }\n    isClosed() {\n      return _classPrivateFieldGet(_frame, this).detached;\n    }\n    async close(options) {\n      try {\n        await _classPrivateFieldGet(_frame, this).browsingContext.close(options?.runBeforeUnload);\n      } catch {\n        return;\n      }\n    }\n    async reload(options = {}) {\n      const [response] = await Promise.all([_classPrivateFieldGet(_frame, this).waitForNavigation(options), _classPrivateFieldGet(_frame, this).browsingContext.reload()]).catch((0, util_js_2.rewriteNavigationError)(this.url(), options.timeout ?? this._timeoutSettings.navigationTimeout()));\n      return response;\n    }\n    setDefaultNavigationTimeout(timeout) {\n      this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n    }\n    setDefaultTimeout(timeout) {\n      this._timeoutSettings.setDefaultTimeout(timeout);\n    }\n    getDefaultTimeout() {\n      return this._timeoutSettings.timeout();\n    }\n    isJavaScriptEnabled() {\n      return _classPrivateFieldGet(_cdpEmulationManager, this).javascriptEnabled;\n    }\n    async setGeolocation(options) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).setGeolocation(options);\n    }\n    async setJavaScriptEnabled(enabled) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).setJavaScriptEnabled(enabled);\n    }\n    async emulateMediaType(type) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).emulateMediaType(type);\n    }\n    async emulateCPUThrottling(factor) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).emulateCPUThrottling(factor);\n    }\n    async emulateMediaFeatures(features) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).emulateMediaFeatures(features);\n    }\n    async emulateTimezone(timezoneId) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).emulateTimezone(timezoneId);\n    }\n    async emulateIdleState(overrides) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).emulateIdleState(overrides);\n    }\n    async emulateVisionDeficiency(type) {\n      return await _classPrivateFieldGet(_cdpEmulationManager, this).emulateVisionDeficiency(type);\n    }\n    async setViewport(viewport) {\n      if (!this.browser().cdpSupported) {\n        await _classPrivateFieldGet(_frame, this).browsingContext.setViewport({\n          viewport: viewport.width && viewport.height ? {\n            width: viewport.width,\n            height: viewport.height\n          } : null,\n          devicePixelRatio: viewport.deviceScaleFactor ? viewport.deviceScaleFactor : null\n        });\n        _classPrivateFieldSet(_viewport, this, viewport);\n        return;\n      }\n      const needsReload = await _classPrivateFieldGet(_cdpEmulationManager, this).emulateViewport(viewport);\n      _classPrivateFieldSet(_viewport, this, viewport);\n      if (needsReload) {\n        await this.reload();\n      }\n    }\n    viewport() {\n      return _classPrivateFieldGet(_viewport, this);\n    }\n    async pdf(options = {}) {\n      const {\n        timeout: ms = this._timeoutSettings.timeout(),\n        path = undefined\n      } = options;\n      const {\n        printBackground: background,\n        margin,\n        landscape,\n        width,\n        height,\n        pageRanges: ranges,\n        scale,\n        preferCSSPageSize\n      } = (0, util_js_1.parsePDFOptions)(options, 'cm');\n      const pageRanges = ranges ? ranges.split(', ') : [];\n      await (0, rxjs_js_1.firstValueFrom)((0, rxjs_js_1.from)(this.mainFrame().isolatedRealm().evaluate(() => {\n        return document.fonts.ready;\n      })).pipe((0, rxjs_js_1.raceWith)((0, util_js_1.timeout)(ms))));\n      const data = await (0, rxjs_js_1.firstValueFrom)((0, rxjs_js_1.from)(_classPrivateFieldGet(_frame, this).browsingContext.print({\n        background,\n        margin,\n        orientation: landscape ? 'landscape' : 'portrait',\n        page: {\n          width,\n          height\n        },\n        pageRanges,\n        scale,\n        shrinkToFit: !preferCSSPageSize\n      })).pipe((0, rxjs_js_1.raceWith)((0, util_js_1.timeout)(ms))));\n      const buffer = Buffer.from(data, 'base64');\n      await this._maybeWriteBufferToFile(path, buffer);\n      return buffer;\n    }\n    async createPDFStream(options) {\n      const buffer = await this.pdf(options);\n      return new ReadableStream({\n        start(controller) {\n          controller.enqueue(buffer);\n          controller.close();\n        }\n      });\n    }\n    async _screenshot(options) {\n      const {\n        clip,\n        type,\n        captureBeyondViewport,\n        quality\n      } = options;\n      if (options.omitBackground !== undefined && options.omitBackground) {\n        throw new Errors_js_1.UnsupportedOperation(`BiDi does not support 'omitBackground'.`);\n      }\n      if (options.optimizeForSpeed !== undefined && options.optimizeForSpeed) {\n        throw new Errors_js_1.UnsupportedOperation(`BiDi does not support 'optimizeForSpeed'.`);\n      }\n      if (options.fromSurface !== undefined && !options.fromSurface) {\n        throw new Errors_js_1.UnsupportedOperation(`BiDi does not support 'fromSurface'.`);\n      }\n      if (clip !== undefined && clip.scale !== undefined && clip.scale !== 1) {\n        throw new Errors_js_1.UnsupportedOperation(`BiDi does not support 'scale' in 'clip'.`);\n      }\n      let box;\n      if (clip) {\n        if (captureBeyondViewport) {\n          box = clip;\n        } else {\n          // The clip is always with respect to the document coordinates, so we\n          // need to convert this to viewport coordinates when we aren't capturing\n          // beyond the viewport.\n          const [pageLeft, pageTop] = await this.evaluate(() => {\n            if (!window.visualViewport) {\n              throw new Error('window.visualViewport is not supported.');\n            }\n            return [window.visualViewport.pageLeft, window.visualViewport.pageTop];\n          });\n          box = {\n            ...clip,\n            x: clip.x - pageLeft,\n            y: clip.y - pageTop\n          };\n        }\n      }\n      const data = await _classPrivateFieldGet(_frame, this).browsingContext.captureScreenshot({\n        origin: captureBeyondViewport ? 'document' : 'viewport',\n        format: {\n          type: `image/${type}`,\n          ...(quality !== undefined ? {\n            quality: quality / 100\n          } : {})\n        },\n        ...(box ? {\n          clip: {\n            type: 'box',\n            ...box\n          }\n        } : {})\n      });\n      return data;\n    }\n    async createCDPSession() {\n      return await _classPrivateFieldGet(_frame, this).createCDPSession();\n    }\n    async bringToFront() {\n      await _classPrivateFieldGet(_frame, this).browsingContext.activate();\n    }\n    async evaluateOnNewDocument(pageFunction, ...args) {\n      const expression = evaluationExpression(pageFunction, ...args);\n      const script = await _classPrivateFieldGet(_frame, this).browsingContext.addPreloadScript(expression);\n      return {\n        identifier: script\n      };\n    }\n    async removeScriptToEvaluateOnNewDocument(id) {\n      await _classPrivateFieldGet(_frame, this).browsingContext.removePreloadScript(id);\n    }\n    async exposeFunction(name, pptrFunction) {\n      return await this.mainFrame().exposeFunction(name, 'default' in pptrFunction ? pptrFunction.default : pptrFunction);\n    }\n    isDragInterceptionEnabled() {\n      return false;\n    }\n    async setCacheEnabled(enabled) {\n      // TODO: handle CDP-specific cases such as mprach.\n      await this._client().send('Network.setCacheDisabled', {\n        cacheDisabled: !enabled\n      });\n    }\n    async cookies(...urls) {\n      const normalizedUrls = (urls.length ? urls : [this.url()]).map(url => {\n        return new URL(url);\n      });\n      const cookies = await _classPrivateFieldGet(_frame, this).browsingContext.getCookies();\n      return cookies.map(cookie => {\n        return bidiToPuppeteerCookie(cookie);\n      }).filter(cookie => {\n        return normalizedUrls.some(url => {\n          return testUrlMatchCookie(cookie, url);\n        });\n      });\n    }\n    isServiceWorkerBypassed() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    target() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    waitForFileChooser() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    workers() {\n      return [..._classPrivateFieldGet(_workers, this)];\n    }\n    async setRequestInterception(enable) {\n      _classPrivateFieldSet(_userInterception, this, await _assertClassBrand(_BidiPage_brand, this, _toggleInterception).call(this, [\"beforeRequestSent\" /* Bidi.Network.InterceptPhase.BeforeRequestSent */], _classPrivateFieldGet(_userInterception, this), enable));\n    }\n    async setExtraHTTPHeaders(headers) {\n      const extraHTTPHeaders = {};\n      for (const [key, value] of Object.entries(headers)) {\n        (0, assert_js_1.assert)((0, util_js_1.isString)(value), `Expected value of header \"${key}\" to be String, but \"${typeof value}\" is found.`);\n        extraHTTPHeaders[key.toLowerCase()] = value;\n      }\n      this._extraHTTPHeaders = extraHTTPHeaders;\n      _classPrivateFieldSet(_extraHeadersInterception, this, await _assertClassBrand(_BidiPage_brand, this, _toggleInterception).call(this, [\"beforeRequestSent\" /* Bidi.Network.InterceptPhase.BeforeRequestSent */], _classPrivateFieldGet(_extraHeadersInterception, this), Boolean(Object.keys(this._extraHTTPHeaders).length)));\n    }\n    async authenticate(credentials) {\n      _classPrivateFieldSet(_authInterception, this, await _assertClassBrand(_BidiPage_brand, this, _toggleInterception).call(this, [\"authRequired\" /* Bidi.Network.InterceptPhase.AuthRequired */], _classPrivateFieldGet(_authInterception, this), Boolean(credentials)));\n      this._credentials = credentials;\n    }\n    setDragInterception() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    setBypassServiceWorker() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    setOfflineMode() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    emulateNetworkConditions() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    async setCookie(...cookies) {\n      const pageURL = this.url();\n      const pageUrlStartsWithHTTP = pageURL.startsWith('http');\n      for (const cookie of cookies) {\n        let cookieUrl = cookie.url || '';\n        if (!cookieUrl && pageUrlStartsWithHTTP) {\n          cookieUrl = pageURL;\n        }\n        (0, assert_js_1.assert)(cookieUrl !== 'about:blank', `Blank page can not have cookie \"${cookie.name}\"`);\n        (0, assert_js_1.assert)(!String.prototype.startsWith.call(cookieUrl || '', 'data:'), `Data URL page can not have cookie \"${cookie.name}\"`);\n        const normalizedUrl = URL.canParse(cookieUrl) ? new URL(cookieUrl) : undefined;\n        const domain = cookie.domain ?? normalizedUrl?.hostname;\n        (0, assert_js_1.assert)(domain !== undefined, `At least one of the url and domain needs to be specified`);\n        const bidiCookie = {\n          domain: domain,\n          name: cookie.name,\n          value: {\n            type: 'string',\n            value: cookie.value\n          },\n          ...(cookie.path !== undefined ? {\n            path: cookie.path\n          } : {}),\n          ...(cookie.httpOnly !== undefined ? {\n            httpOnly: cookie.httpOnly\n          } : {}),\n          ...(cookie.secure !== undefined ? {\n            secure: cookie.secure\n          } : {}),\n          ...(cookie.sameSite !== undefined ? {\n            sameSite: convertCookiesSameSiteCdpToBiDi(cookie.sameSite)\n          } : {}),\n          ...(cookie.expires !== undefined ? {\n            expiry: cookie.expires\n          } : {}),\n          // Chrome-specific properties.\n          ...cdpSpecificCookiePropertiesFromPuppeteerToBidi(cookie, 'sameParty', 'sourceScheme', 'priority', 'url')\n        };\n        if (cookie.partitionKey !== undefined) {\n          await this.browserContext().userContext.setCookie(bidiCookie, cookie.partitionKey);\n        } else {\n          await _classPrivateFieldGet(_frame, this).browsingContext.setCookie(bidiCookie);\n        }\n      }\n    }\n    async deleteCookie(...cookies) {\n      await Promise.all(cookies.map(async deleteCookieRequest => {\n        const cookieUrl = deleteCookieRequest.url ?? this.url();\n        const normalizedUrl = URL.canParse(cookieUrl) ? new URL(cookieUrl) : undefined;\n        const domain = deleteCookieRequest.domain ?? normalizedUrl?.hostname;\n        (0, assert_js_1.assert)(domain !== undefined, `At least one of the url and domain needs to be specified`);\n        const filter = {\n          domain: domain,\n          name: deleteCookieRequest.name,\n          ...(deleteCookieRequest.path !== undefined ? {\n            path: deleteCookieRequest.path\n          } : {})\n        };\n        await _classPrivateFieldGet(_frame, this).browsingContext.deleteCookie(filter);\n      }));\n    }\n    async removeExposedFunction(name) {\n      await _classPrivateFieldGet(_frame, this).removeExposedFunction(name);\n    }\n    metrics() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    async goBack(options = {}) {\n      return await _assertClassBrand(_BidiPage_brand, this, _go).call(this, -1, options);\n    }\n    async goForward(options = {}) {\n      return await _assertClassBrand(_BidiPage_brand, this, _go).call(this, 1, options);\n    }\n    waitForDevicePrompt() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n  }, (() => {\n    const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n    _trustedEmitter_decorators = [(0, decorators_js_1.bubble)()];\n    __esDecorate(_BidiPage, null, _trustedEmitter_decorators, {\n      kind: \"accessor\",\n      name: \"trustedEmitter\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"trustedEmitter\" in obj,\n        get: obj => obj.trustedEmitter,\n        set: (obj, value) => {\n          obj.trustedEmitter = value;\n        }\n      },\n      metadata: _metadata\n    }, _trustedEmitter_initializers, _instanceExtraInitializers);\n    if (_metadata) Object.defineProperty(_BidiPage, Symbol.metadata, {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _metadata\n    });\n  })(), _BidiPage);\n  function _initialize() {\n    _classPrivateFieldGet(_frame, this).browsingContext.on('closed', () => {\n      this.trustedEmitter.emit(\"close\" /* PageEvent.Close */, undefined);\n      this.trustedEmitter.removeAllListeners();\n    });\n    this.trustedEmitter.on(\"workercreated\" /* PageEvent.WorkerCreated */, worker => {\n      _classPrivateFieldGet(_workers, this).add(worker);\n    });\n    this.trustedEmitter.on(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker => {\n      _classPrivateFieldGet(_workers, this).delete(worker);\n    });\n  }\n  async function _toggleInterception(phases, interception, expected) {\n    if (expected && !interception) {\n      return await _classPrivateFieldGet(_frame, this).browsingContext.addIntercept({\n        phases\n      });\n    } else if (!expected && interception) {\n      await _classPrivateFieldGet(_frame, this).browsingContext.userContext.browser.removeIntercept(interception);\n      return;\n    }\n    return interception;\n  }\n  async function _go(delta, options) {\n    try {\n      const [response] = await Promise.all([this.waitForNavigation(options), _classPrivateFieldGet(_frame, this).browsingContext.traverseHistory(delta)]);\n      return response;\n    } catch (error) {\n      // TODO: waitForNavigation should be cancelled if an error happens.\n      if ((0, ErrorLike_js_1.isErrorLike)(error)) {\n        if (error.message.includes('no such history entry')) {\n          return null;\n        }\n      }\n      throw error;\n    }\n  }\n})();\nexports.BidiPage = BidiPage;\nfunction evaluationExpression(fun, ...args) {\n  return `() => {${(0, util_js_1.evaluationString)(fun, ...args)}}`;\n}\n/**\n * Check domains match.\n * According to cookies spec, this check should match subdomains as well, but CDP\n * implementation does not do that, so this method matches only the exact domains, not\n * what is written in the spec:\n * https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.3\n */\nfunction testUrlMatchCookieHostname(cookie, normalizedUrl) {\n  const cookieDomain = cookie.domain.toLowerCase();\n  const urlHostname = normalizedUrl.hostname.toLowerCase();\n  return cookieDomain === urlHostname;\n}\n/**\n * Check paths match.\n * Spec: https://datatracker.ietf.org/doc/html/rfc6265#section-5.1.4\n */\nfunction testUrlMatchCookiePath(cookie, normalizedUrl) {\n  const uriPath = normalizedUrl.pathname;\n  const cookiePath = cookie.path;\n  if (uriPath === cookiePath) {\n    // The cookie-path and the request-path are identical.\n    return true;\n  }\n  if (uriPath.startsWith(cookiePath)) {\n    // The cookie-path is a prefix of the request-path.\n    if (cookiePath.endsWith('/')) {\n      // The last character of the cookie-path is %x2F (\"/\").\n      return true;\n    }\n    if (uriPath[cookiePath.length] === '/') {\n      // The first character of the request-path that is not included in the cookie-path\n      // is a %x2F (\"/\") character.\n      return true;\n    }\n  }\n  return false;\n}\n/**\n * Checks the cookie matches the URL according to the spec:\n */\nfunction testUrlMatchCookie(cookie, url) {\n  const normalizedUrl = new URL(url);\n  (0, assert_js_1.assert)(cookie !== undefined);\n  if (!testUrlMatchCookieHostname(cookie, normalizedUrl)) {\n    return false;\n  }\n  return testUrlMatchCookiePath(cookie, normalizedUrl);\n}\nfunction bidiToPuppeteerCookie(bidiCookie) {\n  return {\n    name: bidiCookie.name,\n    // Presents binary value as base64 string.\n    value: bidiCookie.value.value,\n    domain: bidiCookie.domain,\n    path: bidiCookie.path,\n    size: bidiCookie.size,\n    httpOnly: bidiCookie.httpOnly,\n    secure: bidiCookie.secure,\n    sameSite: convertCookiesSameSiteBiDiToCdp(bidiCookie.sameSite),\n    expires: bidiCookie.expiry ?? -1,\n    session: bidiCookie.expiry === undefined || bidiCookie.expiry <= 0,\n    // Extending with CDP-specific properties with `goog:` prefix.\n    ...cdpSpecificCookiePropertiesFromBidiToPuppeteer(bidiCookie, 'sameParty', 'sourceScheme', 'partitionKey', 'partitionKeyOpaque', 'priority')\n  };\n}\nconst CDP_SPECIFIC_PREFIX = 'goog:';\n/**\n * Gets CDP-specific properties from the BiDi cookie and returns them as a new object.\n */\nfunction cdpSpecificCookiePropertiesFromBidiToPuppeteer(bidiCookie, ...propertyNames) {\n  const result = {};\n  for (const property of propertyNames) {\n    if (bidiCookie[CDP_SPECIFIC_PREFIX + property] !== undefined) {\n      result[property] = bidiCookie[CDP_SPECIFIC_PREFIX + property];\n    }\n  }\n  return result;\n}\n/**\n * Gets CDP-specific properties from the cookie, adds CDP-specific prefixes and returns\n * them as a new object which can be used in BiDi.\n */\nfunction cdpSpecificCookiePropertiesFromPuppeteerToBidi(cookieParam, ...propertyNames) {\n  const result = {};\n  for (const property of propertyNames) {\n    if (cookieParam[property] !== undefined) {\n      result[CDP_SPECIFIC_PREFIX + property] = cookieParam[property];\n    }\n  }\n  return result;\n}\nfunction convertCookiesSameSiteBiDiToCdp(sameSite) {\n  return sameSite === 'strict' ? 'Strict' : sameSite === 'lax' ? 'Lax' : 'None';\n}\nfunction convertCookiesSameSiteCdpToBiDi(sameSite) {\n  return sameSite === 'Strict' ? \"strict\" /* Bidi.Network.SameSite.Strict */ : sameSite === 'Lax' ? \"lax\" /* Bidi.Network.SameSite.Lax */ : \"none\" /* Bidi.Network.SameSite.None */;\n}","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_defineProperty","_classPrivateFieldInitSpec","_classPrivateFieldSet","_classPrivateFieldGet","_assertClassBrand","rxjs_js_1","Page_js_1","Accessibility_js_1","Coverage_js_1","EmulationManager_js_1","Tracing_js_1","Errors_js_1","EventEmitter_js_1","util_js_1","assert_js_1","decorators_js_1","ErrorLike_js_1","Frame_js_1","Input_js_1","util_js_2","BidiPage","_BidiPage","_trustedEmitter_accessor_storage","_browserContext","_frame","_viewport","_workers","_cdpEmulationManager","_BidiPage_brand","_userAgentInterception","_userAgentPreloadScript","_userInterception","_extraHeadersInterception","_authInterception","Page","_classSuper","from","browserContext","browsingContext","page","_initialize","call","trustedEmitter","value","_client","client","constructor","__runInitializers","_instanceExtraInitializers","_trustedEmitter_initializers","EventEmitter","Set","BidiFrame","EmulationManager","accessibility","Accessibility","tracing","Tracing","coverage","Coverage","keyboard","BidiKeyboard","mouse","BidiMouse","touchscreen","BidiTouchscreen","setUserAgent","userAgent","userAgentMetadata","browser","cdpSupported","UnsupportedOperation","send","enable","_userAgentHeaders","_toggleInterception","changeUserAgent","Object","defineProperty","navigator","frames","frame","push","childFrames","removeScriptToEvaluateOnNewDocument","evaluateToken","Promise","all","evaluateOnNewDocument","undefined","map","evaluate","identifier","setBypassCSP","enabled","queryObjects","prototypeHandle","assert","disposed","id","response","prototypeObjectId","mainRealm","createHandle","type","handle","objects","objectId","mainFrame","focusedFrame","__addDisposableResource","env_1","isolatedRealm","evaluateHandle","win","window","document","activeElement","HTMLIFrameElement","HTMLFrameElement","contentWindow","remoteValue","find","_id","context","isClosed","detached","close","options","runBeforeUnload","reload","waitForNavigation","catch","rewriteNavigationError","url","timeout","_timeoutSettings","navigationTimeout","setDefaultNavigationTimeout","setDefaultTimeout","getDefaultTimeout","isJavaScriptEnabled","javascriptEnabled","setGeolocation","setJavaScriptEnabled","emulateMediaType","emulateCPUThrottling","factor","emulateMediaFeatures","features","emulateTimezone","timezoneId","emulateIdleState","overrides","emulateVisionDeficiency","setViewport","viewport","width","height","devicePixelRatio","deviceScaleFactor","needsReload","emulateViewport","pdf","ms","path","printBackground","background","margin","landscape","pageRanges","ranges","scale","preferCSSPageSize","parsePDFOptions","split","firstValueFrom","fonts","ready","pipe","raceWith","data","print","orientation","shrinkToFit","buffer","Buffer","_maybeWriteBufferToFile","createPDFStream","ReadableStream","start","controller","enqueue","_screenshot","clip","captureBeyondViewport","quality","omitBackground","optimizeForSpeed","fromSurface","box","pageLeft","pageTop","visualViewport","Error","x","y","captureScreenshot","origin","format","createCDPSession","bringToFront","activate","pageFunction","args","expression","evaluationExpression","script","addPreloadScript","removePreloadScript","exposeFunction","name","pptrFunction","isDragInterceptionEnabled","setCacheEnabled","cacheDisabled","cookies","urls","normalizedUrls","length","URL","getCookies","cookie","bidiToPuppeteerCookie","filter","some","testUrlMatchCookie","isServiceWorkerBypassed","target","waitForFileChooser","workers","setRequestInterception","setExtraHTTPHeaders","headers","extraHTTPHeaders","key","entries","isString","toLowerCase","_extraHTTPHeaders","Boolean","keys","authenticate","credentials","_credentials","setDragInterception","setBypassServiceWorker","setOfflineMode","emulateNetworkConditions","setCookie","pageURL","pageUrlStartsWithHTTP","startsWith","cookieUrl","String","prototype","normalizedUrl","canParse","domain","hostname","bidiCookie","httpOnly","secure","sameSite","convertCookiesSameSiteCdpToBiDi","expires","expiry","cdpSpecificCookiePropertiesFromPuppeteerToBidi","partitionKey","userContext","deleteCookie","deleteCookieRequest","removeExposedFunction","metrics","goBack","_go","goForward","waitForDevicePrompt","bubble","__esDecorate","_trustedEmitter_decorators","kind","static","private","access","has","obj","get","set","metadata","_metadata","on","emit","removeAllListeners","worker","add","delete","phases","interception","expected","addIntercept","removeIntercept","delta","traverseHistory","error","isErrorLike","message","includes","exports","fun","evaluationString","testUrlMatchCookieHostname","cookieDomain","urlHostname","testUrlMatchCookiePath","uriPath","pathname","cookiePath","endsWith","size","convertCookiesSameSiteBiDiToCdp","session","cdpSpecificCookiePropertiesFromBidiToPuppeteer","CDP_SPECIFIC_PREFIX","propertyNames","result","property","cookieParam"],"sources":["../../../../src/bidi/Page.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}