{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._connectToCdpBrowser = void 0;\nconst util_js_1 = require(\"../common/util.js\");\nconst Browser_js_1 = require(\"./Browser.js\");\nconst Connection_js_1 = require(\"./Connection.js\");\n/**\n * Users should never call this directly; it's called when calling\n * `puppeteer.connect` with `protocol: 'cdp'`.\n *\n * @internal\n */\nasync function _connectToCdpBrowser(connectionTransport, url, options) {\n  const {\n    ignoreHTTPSErrors = false,\n    defaultViewport = util_js_1.DEFAULT_VIEWPORT,\n    targetFilter,\n    _isPageTarget: isPageTarget,\n    slowMo = 0,\n    protocolTimeout\n  } = options;\n  const connection = new Connection_js_1.Connection(url, connectionTransport, slowMo, protocolTimeout);\n  const version = await connection.send('Browser.getVersion');\n  const product = version.product.toLowerCase().includes('firefox') ? 'firefox' : 'chrome';\n  const {\n    browserContextIds\n  } = await connection.send('Target.getBrowserContexts');\n  const browser = await Browser_js_1.CdpBrowser._create(product || 'chrome', connection, browserContextIds, ignoreHTTPSErrors, defaultViewport, undefined, () => {\n    return connection.send('Browser.close').catch(util_js_1.debugError);\n  }, targetFilter, isPageTarget);\n  return browser;\n}\nexports._connectToCdpBrowser = _connectToCdpBrowser;","map":{"version":3,"names":["util_js_1","require","Browser_js_1","Connection_js_1","_connectToCdpBrowser","connectionTransport","url","options","ignoreHTTPSErrors","defaultViewport","DEFAULT_VIEWPORT","targetFilter","_isPageTarget","isPageTarget","slowMo","protocolTimeout","connection","Connection","version","send","product","toLowerCase","includes","browserContextIds","browser","CdpBrowser","_create","undefined","catch","debugError","exports"],"sources":["../../../../src/cdp/BrowserConnector.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;AAWA,MAAAA,SAAA,GAAAC,OAAA;AAEA,MAAAC,YAAA,GAAAD,OAAA;AACA,MAAAE,eAAA,GAAAF,OAAA;AAEA;;;;;;AAMO,eAAeG,oBAAoBA,CACxCC,mBAAwC,EACxCC,GAAW,EACXC,OAA+C;EAE/C,MAAM;IACJC,iBAAiB,GAAG,KAAK;IACzBC,eAAe,GAAGT,SAAA,CAAAU,gBAAgB;IAClCC,YAAY;IACZC,aAAa,EAAEC,YAAY;IAC3BC,MAAM,GAAG,CAAC;IACVC;EAAe,CAChB,GAAGR,OAAO;EAEX,MAAMS,UAAU,GAAG,IAAIb,eAAA,CAAAc,UAAU,CAC/BX,GAAG,EACHD,mBAAmB,EACnBS,MAAM,EACNC,eAAe,CAChB;EAED,MAAMG,OAAO,GAAG,MAAMF,UAAU,CAACG,IAAI,CAAC,oBAAoB,CAAC;EAC3D,MAAMC,OAAO,GAAGF,OAAO,CAACE,OAAO,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC,SAAS,CAAC,GAC7D,SAAS,GACT,QAAQ;EAEZ,MAAM;IAACC;EAAiB,CAAC,GAAG,MAAMP,UAAU,CAACG,IAAI,CAC/C,2BAA2B,CAC5B;EACD,MAAMK,OAAO,GAAG,MAAMtB,YAAA,CAAAuB,UAAU,CAACC,OAAO,CACtCN,OAAO,IAAI,QAAQ,EACnBJ,UAAU,EACVO,iBAAiB,EACjBf,iBAAiB,EACjBC,eAAe,EACfkB,SAAS,EACT,MAAK;IACH,OAAOX,UAAU,CAACG,IAAI,CAAC,eAAe,CAAC,CAACS,KAAK,CAAC5B,SAAA,CAAA6B,UAAU,CAAC;EAC3D,CAAC,EACDlB,YAAY,EACZE,YAAY,CACb;EACD,OAAOW,OAAO;AAChB;AA3CAM,OAAA,CAAA1B,oBAAA,GAAAA,oBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}