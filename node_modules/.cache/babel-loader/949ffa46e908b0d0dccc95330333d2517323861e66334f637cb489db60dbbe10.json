{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserWebSocketTransport = void 0;\n/**\n * @internal\n */\nvar _ws = /*#__PURE__*/new WeakMap();\nclass BrowserWebSocketTransport {\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n      ws.addEventListener('open', () => {\n        return resolve(new BrowserWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n  constructor(ws) {\n    _classPrivateFieldInitSpec(this, _ws, void 0);\n    _defineProperty(this, \"onmessage\", void 0);\n    _defineProperty(this, \"onclose\", void 0);\n    _classPrivateFieldSet(_ws, this, ws);\n    _classPrivateFieldGet(_ws, this).addEventListener('message', event => {\n      if (this.onmessage) {\n        this.onmessage.call(null, event.data);\n      }\n    });\n    _classPrivateFieldGet(_ws, this).addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    _classPrivateFieldGet(_ws, this).addEventListener('error', () => {});\n  }\n  send(message) {\n    _classPrivateFieldGet(_ws, this).send(message);\n  }\n  close() {\n    _classPrivateFieldGet(_ws, this).close();\n  }\n}\nexports.BrowserWebSocketTransport = BrowserWebSocketTransport;","map":{"version":3,"names":["_ws","WeakMap","BrowserWebSocketTransport","create","url","Promise","resolve","reject","ws","WebSocket","addEventListener","constructor","_classPrivateFieldInitSpec","_defineProperty","_classPrivateFieldSet","_classPrivateFieldGet","event","onmessage","call","data","onclose","send","message","close","exports"],"sources":["../../../../src/common/BrowserWebSocketTransport.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;AAOA;;;AAAA,IAAAA,GAAA,oBAAAC,OAAA;AAGA,MAAaC,yBAAyB;EACpC,OAAOC,MAAMA,CAACC,GAAW;IACvB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;MACrC,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAACL,GAAG,CAAC;MAE7BI,EAAE,CAACE,gBAAgB,CAAC,MAAM,EAAE,MAAK;QAC/B,OAAOJ,OAAO,CAAC,IAAIJ,yBAAyB,CAACM,EAAE,CAAC,CAAC;MACnD,CAAC,CAAC;MACFA,EAAE,CAACE,gBAAgB,CAAC,OAAO,EAAEH,MAAM,CAAC;IACtC,CAAC,CAAC;EACJ;EAMAI,YAAYH,EAAa;IAAAI,0BAAA,OAAAZ,GAAA;IAAAa,eAAA;IAAAA,eAAA;IACvBC,qBAAA,CAAAd,GAAA,MAAI,EAAOQ,EAAE;IACbO,qBAAA,CAAAf,GAAA,MAAI,EAAKU,gBAAgB,CAAC,SAAS,EAAEM,KAAK,IAAG;MAC3C,IAAI,IAAI,CAACC,SAAS,EAAE;QAClB,IAAI,CAACA,SAAS,CAACC,IAAI,CAAC,IAAI,EAAEF,KAAK,CAACG,IAAI,CAAC;MACvC;IACF,CAAC,CAAC;IACFJ,qBAAA,CAAAf,GAAA,MAAI,EAAKU,gBAAgB,CAAC,OAAO,EAAE,MAAK;MACtC,IAAI,IAAI,CAACU,OAAO,EAAE;QAChB,IAAI,CAACA,OAAO,CAACF,IAAI,CAAC,IAAI,CAAC;MACzB;IACF,CAAC,CAAC;IACF;IACAH,qBAAA,CAAAf,GAAA,MAAI,EAAKU,gBAAgB,CAAC,OAAO,EAAE,MAAK,CAAE,CAAC,CAAC;EAC9C;EAEAW,IAAIA,CAACC,OAAe;IAClBP,qBAAA,CAAAf,GAAA,MAAI,EAAKqB,IAAI,CAACC,OAAO,CAAC;EACxB;EAEAC,KAAKA,CAAA;IACHR,qBAAA,CAAAf,GAAA,MAAI,EAAKuB,KAAK,EAAE;EAClB;;AAtCFC,OAAA,CAAAtB,yBAAA,GAAAA,yBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}