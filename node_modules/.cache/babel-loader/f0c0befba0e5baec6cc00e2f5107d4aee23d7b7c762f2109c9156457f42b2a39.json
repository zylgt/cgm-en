{"ast":null,"code":"import _classPrivateFieldInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _defineProperty from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classPrivateFieldSet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport _classPrivateFieldGet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport { headersArray, HTTPRequest, STATUS_TEXTS, handleError } from '../api/HTTPRequest.js';\nimport { debugError, isString } from '../common/util.js';\n/**\n * @internal\n */\nvar _client = /*#__PURE__*/new WeakMap();\nvar _isNavigationRequest = /*#__PURE__*/new WeakMap();\nvar _url = /*#__PURE__*/new WeakMap();\nvar _resourceType = /*#__PURE__*/new WeakMap();\nvar _method = /*#__PURE__*/new WeakMap();\nvar _hasPostData = /*#__PURE__*/new WeakMap();\nvar _postData = /*#__PURE__*/new WeakMap();\nvar _headers = /*#__PURE__*/new WeakMap();\nvar _frame = /*#__PURE__*/new WeakMap();\nvar _initiator = /*#__PURE__*/new WeakMap();\nexport class CdpHTTPRequest extends HTTPRequest {\n  get client() {\n    return _classPrivateFieldGet(_client, this);\n  }\n  constructor(client, frame, interceptionId, allowInterception, data, redirectChain) {\n    super();\n    _defineProperty(this, \"id\", void 0);\n    _classPrivateFieldInitSpec(this, _client, void 0);\n    _classPrivateFieldInitSpec(this, _isNavigationRequest, void 0);\n    _classPrivateFieldInitSpec(this, _url, void 0);\n    _classPrivateFieldInitSpec(this, _resourceType, void 0);\n    _classPrivateFieldInitSpec(this, _method, void 0);\n    _classPrivateFieldInitSpec(this, _hasPostData, false);\n    _classPrivateFieldInitSpec(this, _postData, void 0);\n    _classPrivateFieldInitSpec(this, _headers, {});\n    _classPrivateFieldInitSpec(this, _frame, void 0);\n    _classPrivateFieldInitSpec(this, _initiator, void 0);\n    _classPrivateFieldSet(_client, this, client);\n    this.id = data.requestId;\n    _classPrivateFieldSet(_isNavigationRequest, this, data.requestId === data.loaderId && data.type === 'Document');\n    this._interceptionId = interceptionId;\n    _classPrivateFieldSet(_url, this, data.request.url);\n    _classPrivateFieldSet(_resourceType, this, (data.type || 'other').toLowerCase());\n    _classPrivateFieldSet(_method, this, data.request.method);\n    _classPrivateFieldSet(_postData, this, data.request.postData);\n    _classPrivateFieldSet(_hasPostData, this, data.request.hasPostData ?? false);\n    _classPrivateFieldSet(_frame, this, frame);\n    this._redirectChain = redirectChain;\n    _classPrivateFieldSet(_initiator, this, data.initiator);\n    this.interception.enabled = allowInterception;\n    for (const [key, value] of Object.entries(data.request.headers)) {\n      _classPrivateFieldGet(_headers, this)[key.toLowerCase()] = value;\n    }\n  }\n  url() {\n    return _classPrivateFieldGet(_url, this);\n  }\n  resourceType() {\n    return _classPrivateFieldGet(_resourceType, this);\n  }\n  method() {\n    return _classPrivateFieldGet(_method, this);\n  }\n  postData() {\n    return _classPrivateFieldGet(_postData, this);\n  }\n  hasPostData() {\n    return _classPrivateFieldGet(_hasPostData, this);\n  }\n  async fetchPostData() {\n    try {\n      const result = await _classPrivateFieldGet(_client, this).send('Network.getRequestPostData', {\n        requestId: this.id\n      });\n      return result.postData;\n    } catch (err) {\n      debugError(err);\n      return;\n    }\n  }\n  headers() {\n    return _classPrivateFieldGet(_headers, this);\n  }\n  response() {\n    return this._response;\n  }\n  frame() {\n    return _classPrivateFieldGet(_frame, this);\n  }\n  isNavigationRequest() {\n    return _classPrivateFieldGet(_isNavigationRequest, this);\n  }\n  initiator() {\n    return _classPrivateFieldGet(_initiator, this);\n  }\n  redirectChain() {\n    return this._redirectChain.slice();\n  }\n  failure() {\n    if (!this._failureText) {\n      return null;\n    }\n    return {\n      errorText: this._failureText\n    };\n  }\n  /**\n   * @internal\n   */\n  async _continue(overrides = {}) {\n    const {\n      url,\n      method,\n      postData,\n      headers\n    } = overrides;\n    this.interception.handled = true;\n    const postDataBinaryBase64 = postData ? Buffer.from(postData).toString('base64') : undefined;\n    if (this._interceptionId === undefined) {\n      throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.continueRequest');\n    }\n    await _classPrivateFieldGet(_client, this).send('Fetch.continueRequest', {\n      requestId: this._interceptionId,\n      url,\n      method,\n      postData: postDataBinaryBase64,\n      headers: headers ? headersArray(headers) : undefined\n    }).catch(error => {\n      this.interception.handled = false;\n      return handleError(error);\n    });\n  }\n  async _respond(response) {\n    this.interception.handled = true;\n    const responseBody = response.body && isString(response.body) ? Buffer.from(response.body) : response.body || null;\n    const responseHeaders = {};\n    if (response.headers) {\n      for (const header of Object.keys(response.headers)) {\n        const value = response.headers[header];\n        responseHeaders[header.toLowerCase()] = Array.isArray(value) ? value.map(item => {\n          return String(item);\n        }) : String(value);\n      }\n    }\n    if (response.contentType) {\n      responseHeaders['content-type'] = response.contentType;\n    }\n    if (responseBody && !('content-length' in responseHeaders)) {\n      responseHeaders['content-length'] = String(Buffer.byteLength(responseBody));\n    }\n    const status = response.status || 200;\n    if (this._interceptionId === undefined) {\n      throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest');\n    }\n    await _classPrivateFieldGet(_client, this).send('Fetch.fulfillRequest', {\n      requestId: this._interceptionId,\n      responseCode: status,\n      responsePhrase: STATUS_TEXTS[status],\n      responseHeaders: headersArray(responseHeaders),\n      body: responseBody ? responseBody.toString('base64') : undefined\n    }).catch(error => {\n      this.interception.handled = false;\n      return handleError(error);\n    });\n  }\n  async _abort(errorReason) {\n    this.interception.handled = true;\n    if (this._interceptionId === undefined) {\n      throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.failRequest');\n    }\n    await _classPrivateFieldGet(_client, this).send('Fetch.failRequest', {\n      requestId: this._interceptionId,\n      errorReason: errorReason || 'Failed'\n    }).catch(handleError);\n  }\n}","map":{"version":3,"names":["headersArray","HTTPRequest","STATUS_TEXTS","handleError","debugError","isString","_client","WeakMap","_isNavigationRequest","_url","_resourceType","_method","_hasPostData","_postData","_headers","_frame","_initiator","CdpHTTPRequest","client","_classPrivateFieldGet","constructor","frame","interceptionId","allowInterception","data","redirectChain","_defineProperty","_classPrivateFieldInitSpec","_classPrivateFieldSet","id","requestId","loaderId","type","_interceptionId","request","url","toLowerCase","method","postData","hasPostData","_redirectChain","initiator","interception","enabled","key","value","Object","entries","headers","resourceType","fetchPostData","result","send","err","response","_response","isNavigationRequest","slice","failure","_failureText","errorText","_continue","overrides","handled","postDataBinaryBase64","Buffer","from","toString","undefined","Error","catch","error","_respond","responseBody","body","responseHeaders","header","keys","Array","isArray","map","item","String","contentType","byteLength","status","responseCode","responsePhrase","_abort","errorReason"],"sources":["../../../../src/cdp/HTTPRequest.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}