{"ast":null,"code":"import _classPrivateMethodInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateFieldInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _defineProperty from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _assertClassBrand from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";\nimport _classPrivateFieldGet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport _classPrivateFieldSet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport \"core-js/modules/es.array.push.js\";\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { EMPTY, catchError, defaultIfEmpty, defer, filter, first, firstValueFrom, from, fromEvent, identity, ignoreElements, map, merge, mergeMap, noop, pipe, race, raceWith, retry, tap, throwIfEmpty } from '../../../third_party/rxjs/rxjs.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { debugError, timeout } from '../../common/util.js';\n/**\n * All the events that a locator instance may emit.\n *\n * @public\n */\nexport var LocatorEvent;\n(function (LocatorEvent) {\n  /**\n   * Emitted every time before the locator performs an action on the located element(s).\n   */\n  LocatorEvent[\"Action\"] = \"action\";\n})(LocatorEvent || (LocatorEvent = {}));\n/**\n * Locators describe a strategy of locating objects and performing an action on\n * them. If the action fails because the object is not ready for the action, the\n * whole operation is retried. Various preconditions for a successful action are\n * checked automatically.\n *\n * @public\n */\nvar _ensureElementIsInTheViewport = /*#__PURE__*/new WeakMap();\nvar _waitForEnabled = /*#__PURE__*/new WeakMap();\nvar _waitForStableBoundingBox = /*#__PURE__*/new WeakMap();\nvar _waitForEnabledIfNeeded = /*#__PURE__*/new WeakMap();\nvar _waitForStableBoundingBoxIfNeeded = /*#__PURE__*/new WeakMap();\nvar _ensureElementIsInTheViewportIfNeeded = /*#__PURE__*/new WeakMap();\nvar _Locator_brand = /*#__PURE__*/new WeakSet();\nexport class Locator extends EventEmitter {\n  constructor(...args) {\n    super(...args);\n    _classPrivateMethodInitSpec(this, _Locator_brand);\n    /**\n     * @internal\n     */\n    _defineProperty(this, \"visibility\", null);\n    /**\n     * @internal\n     */\n    _defineProperty(this, \"_timeout\", 30000);\n    _classPrivateFieldInitSpec(this, _ensureElementIsInTheViewport, true);\n    _classPrivateFieldInitSpec(this, _waitForEnabled, true);\n    _classPrivateFieldInitSpec(this, _waitForStableBoundingBox, true);\n    /**\n     * @internal\n     */\n    _defineProperty(this, \"operators\", {\n      conditions: (conditions, signal) => {\n        return mergeMap(handle => {\n          return merge(...conditions.map(condition => {\n            return condition(handle, signal);\n          })).pipe(defaultIfEmpty(handle));\n        });\n      },\n      retryAndRaceWithSignalAndTimer: (signal, cause) => {\n        const candidates = [];\n        if (signal) {\n          candidates.push(fromEvent(signal, 'abort').pipe(map(() => {\n            if (signal.reason instanceof Error) {\n              signal.reason.cause = cause;\n            }\n            throw signal.reason;\n          })));\n        }\n        candidates.push(timeout(this._timeout, cause));\n        return pipe(retry({\n          delay: RETRY_DELAY\n        }), raceWith(...candidates));\n      }\n    });\n    /**\n     * If the element has a \"disabled\" property, wait for the element to be\n     * enabled.\n     */\n    _classPrivateFieldInitSpec(this, _waitForEnabledIfNeeded, (handle, signal) => {\n      if (!_classPrivateFieldGet(_waitForEnabled, this)) {\n        return EMPTY;\n      }\n      return from(handle.frame.waitForFunction(element => {\n        if (!(element instanceof HTMLElement)) {\n          return true;\n        }\n        const isNativeFormControl = ['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA', 'OPTION', 'OPTGROUP'].includes(element.nodeName);\n        return !isNativeFormControl || !element.hasAttribute('disabled');\n      }, {\n        timeout: this._timeout,\n        signal\n      }, handle)).pipe(ignoreElements());\n    });\n    /**\n     * Compares the bounding box of the element for two consecutive animation\n     * frames and waits till they are the same.\n     */\n    _classPrivateFieldInitSpec(this, _waitForStableBoundingBoxIfNeeded, handle => {\n      if (!_classPrivateFieldGet(_waitForStableBoundingBox, this)) {\n        return EMPTY;\n      }\n      return defer(() => {\n        // Note we don't use waitForFunction because that relies on RAF.\n        return from(handle.evaluate(element => {\n          return new Promise(resolve => {\n            window.requestAnimationFrame(() => {\n              const rect1 = element.getBoundingClientRect();\n              window.requestAnimationFrame(() => {\n                const rect2 = element.getBoundingClientRect();\n                resolve([{\n                  x: rect1.x,\n                  y: rect1.y,\n                  width: rect1.width,\n                  height: rect1.height\n                }, {\n                  x: rect2.x,\n                  y: rect2.y,\n                  width: rect2.width,\n                  height: rect2.height\n                }]);\n              });\n            });\n          });\n        }));\n      }).pipe(first(([rect1, rect2]) => {\n        return rect1.x === rect2.x && rect1.y === rect2.y && rect1.width === rect2.width && rect1.height === rect2.height;\n      }), retry({\n        delay: RETRY_DELAY\n      }), ignoreElements());\n    });\n    /**\n     * Checks if the element is in the viewport and auto-scrolls it if it is not.\n     */\n    _classPrivateFieldInitSpec(this, _ensureElementIsInTheViewportIfNeeded, handle => {\n      if (!_classPrivateFieldGet(_ensureElementIsInTheViewport, this)) {\n        return EMPTY;\n      }\n      return from(handle.isIntersectingViewport({\n        threshold: 0\n      })).pipe(filter(isIntersectingViewport => {\n        return !isIntersectingViewport;\n      }), mergeMap(() => {\n        return from(handle.scrollIntoView());\n      }), mergeMap(() => {\n        return defer(() => {\n          return from(handle.isIntersectingViewport({\n            threshold: 0\n          }));\n        }).pipe(first(identity), retry({\n          delay: RETRY_DELAY\n        }), ignoreElements());\n      }));\n    });\n  }\n  /**\n   * Creates a race between multiple locators but ensures that only a single one\n   * acts.\n   *\n   * @public\n   */\n  static race(locators) {\n    return RaceLocator.create(locators);\n  }\n  // Determines when the locator will timeout for actions.\n  get timeout() {\n    return this._timeout;\n  }\n  setTimeout(timeout) {\n    const locator = this._clone();\n    locator._timeout = timeout;\n    return locator;\n  }\n  setVisibility(visibility) {\n    const locator = this._clone();\n    locator.visibility = visibility;\n    return locator;\n  }\n  setWaitForEnabled(value) {\n    const locator = this._clone();\n    _classPrivateFieldSet(_waitForEnabled, locator, value);\n    return locator;\n  }\n  setEnsureElementIsInTheViewport(value) {\n    const locator = this._clone();\n    _classPrivateFieldSet(_ensureElementIsInTheViewport, locator, value);\n    return locator;\n  }\n  setWaitForStableBoundingBox(value) {\n    const locator = this._clone();\n    _classPrivateFieldSet(_waitForStableBoundingBox, locator, value);\n    return locator;\n  }\n  /**\n   * @internal\n   */\n  copyOptions(locator) {\n    this._timeout = locator._timeout;\n    this.visibility = locator.visibility;\n    _classPrivateFieldSet(_waitForEnabled, this, _classPrivateFieldGet(_waitForEnabled, locator));\n    _classPrivateFieldSet(_ensureElementIsInTheViewport, this, _classPrivateFieldGet(_ensureElementIsInTheViewport, locator));\n    _classPrivateFieldSet(_waitForStableBoundingBox, this, _classPrivateFieldGet(_waitForStableBoundingBox, locator));\n    return this;\n  }\n  /**\n   * Clones the locator.\n   */\n  clone() {\n    return this._clone();\n  }\n  /**\n   * Waits for the locator to get a handle from the page.\n   *\n   * @public\n   */\n  async waitHandle(options) {\n    const cause = new Error('Locator.waitHandle');\n    return await firstValueFrom(this._wait(options).pipe(this.operators.retryAndRaceWithSignalAndTimer(options?.signal, cause)));\n  }\n  /**\n   * Waits for the locator to get the serialized value from the page.\n   *\n   * Note this requires the value to be JSON-serializable.\n   *\n   * @public\n   */\n  async wait(options) {\n    const env_1 = {\n      stack: [],\n      error: void 0,\n      hasError: false\n    };\n    try {\n      const handle = __addDisposableResource(env_1, await this.waitHandle(options), false);\n      return await handle.jsonValue();\n    } catch (e_1) {\n      env_1.error = e_1;\n      env_1.hasError = true;\n    } finally {\n      __disposeResources(env_1);\n    }\n  }\n  /**\n   * Maps the locator using the provided mapper.\n   *\n   * @public\n   */\n  map(mapper) {\n    return new MappedLocator(this._clone(), handle => {\n      // SAFETY: TypeScript cannot deduce the type.\n      return handle.evaluateHandle(mapper);\n    });\n  }\n  /**\n   * Creates an expectation that is evaluated against located values.\n   *\n   * If the expectations do not match, then the locator will retry.\n   *\n   * @public\n   */\n  filter(predicate) {\n    return new FilteredLocator(this._clone(), async (handle, signal) => {\n      await handle.frame.waitForFunction(predicate, {\n        signal,\n        timeout: this._timeout\n      }, handle);\n      return true;\n    });\n  }\n  /**\n   * Creates an expectation that is evaluated against located handles.\n   *\n   * If the expectations do not match, then the locator will retry.\n   *\n   * @internal\n   */\n  filterHandle(predicate) {\n    return new FilteredLocator(this._clone(), predicate);\n  }\n  /**\n   * Maps the locator using the provided mapper.\n   *\n   * @internal\n   */\n  mapHandle(mapper) {\n    return new MappedLocator(this._clone(), mapper);\n  }\n  click(options) {\n    return firstValueFrom(_assertClassBrand(_Locator_brand, this, _click).call(this, options));\n  }\n  /**\n   * Fills out the input identified by the locator using the provided value. The\n   * type of the input is determined at runtime and the appropriate fill-out\n   * method is chosen based on the type. contenteditable, selector, inputs are\n   * supported.\n   */\n  fill(value, options) {\n    return firstValueFrom(_assertClassBrand(_Locator_brand, this, _fill).call(this, value, options));\n  }\n  hover(options) {\n    return firstValueFrom(_assertClassBrand(_Locator_brand, this, _hover).call(this, options));\n  }\n  scroll(options) {\n    return firstValueFrom(_assertClassBrand(_Locator_brand, this, _scroll).call(this, options));\n  }\n}\n/**\n * @internal\n */\nfunction _click(options) {\n  const signal = options?.signal;\n  const cause = new Error('Locator.click');\n  return this._wait(options).pipe(this.operators.conditions([_classPrivateFieldGet(_ensureElementIsInTheViewportIfNeeded, this), _classPrivateFieldGet(_waitForStableBoundingBoxIfNeeded, this), _classPrivateFieldGet(_waitForEnabledIfNeeded, this)], signal), tap(() => {\n    return this.emit(LocatorEvent.Action, undefined);\n  }), mergeMap(handle => {\n    return from(handle.click(options)).pipe(catchError(err => {\n      void handle.dispose().catch(debugError);\n      throw err;\n    }));\n  }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n}\nfunction _fill(value, options) {\n  const signal = options?.signal;\n  const cause = new Error('Locator.fill');\n  return this._wait(options).pipe(this.operators.conditions([_classPrivateFieldGet(_ensureElementIsInTheViewportIfNeeded, this), _classPrivateFieldGet(_waitForStableBoundingBoxIfNeeded, this), _classPrivateFieldGet(_waitForEnabledIfNeeded, this)], signal), tap(() => {\n    return this.emit(LocatorEvent.Action, undefined);\n  }), mergeMap(handle => {\n    return from(handle.evaluate(el => {\n      if (el instanceof HTMLSelectElement) {\n        return 'select';\n      }\n      if (el instanceof HTMLTextAreaElement) {\n        return 'typeable-input';\n      }\n      if (el instanceof HTMLInputElement) {\n        if (new Set(['textarea', 'text', 'url', 'tel', 'search', 'password', 'number', 'email']).has(el.type)) {\n          return 'typeable-input';\n        } else {\n          return 'other-input';\n        }\n      }\n      if (el.isContentEditable) {\n        return 'contenteditable';\n      }\n      return 'unknown';\n    })).pipe(mergeMap(inputType => {\n      switch (inputType) {\n        case 'select':\n          return from(handle.select(value).then(noop));\n        case 'contenteditable':\n        case 'typeable-input':\n          return from(handle.evaluate((input, newValue) => {\n            const currentValue = input.isContentEditable ? input.innerText : input.value;\n            // Clear the input if the current value does not match the filled\n            // out value.\n            if (newValue.length <= currentValue.length || !newValue.startsWith(input.value)) {\n              if (input.isContentEditable) {\n                input.innerText = '';\n              } else {\n                input.value = '';\n              }\n              return newValue;\n            }\n            const originalValue = input.isContentEditable ? input.innerText : input.value;\n            // If the value is partially filled out, only type the rest. Move\n            // cursor to the end of the common prefix.\n            if (input.isContentEditable) {\n              input.innerText = '';\n              input.innerText = originalValue;\n            } else {\n              input.value = '';\n              input.value = originalValue;\n            }\n            return newValue.substring(originalValue.length);\n          }, value)).pipe(mergeMap(textToType => {\n            return from(handle.type(textToType));\n          }));\n        case 'other-input':\n          return from(handle.focus()).pipe(mergeMap(() => {\n            return from(handle.evaluate((input, value) => {\n              input.value = value;\n              input.dispatchEvent(new Event('input', {\n                bubbles: true\n              }));\n              input.dispatchEvent(new Event('change', {\n                bubbles: true\n              }));\n            }, value));\n          }));\n        case 'unknown':\n          throw new Error(`Element cannot be filled out.`);\n      }\n    })).pipe(catchError(err => {\n      void handle.dispose().catch(debugError);\n      throw err;\n    }));\n  }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n}\nfunction _hover(options) {\n  const signal = options?.signal;\n  const cause = new Error('Locator.hover');\n  return this._wait(options).pipe(this.operators.conditions([_classPrivateFieldGet(_ensureElementIsInTheViewportIfNeeded, this), _classPrivateFieldGet(_waitForStableBoundingBoxIfNeeded, this)], signal), tap(() => {\n    return this.emit(LocatorEvent.Action, undefined);\n  }), mergeMap(handle => {\n    return from(handle.hover()).pipe(catchError(err => {\n      void handle.dispose().catch(debugError);\n      throw err;\n    }));\n  }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n}\nfunction _scroll(options) {\n  const signal = options?.signal;\n  const cause = new Error('Locator.scroll');\n  return this._wait(options).pipe(this.operators.conditions([_classPrivateFieldGet(_ensureElementIsInTheViewportIfNeeded, this), _classPrivateFieldGet(_waitForStableBoundingBoxIfNeeded, this)], signal), tap(() => {\n    return this.emit(LocatorEvent.Action, undefined);\n  }), mergeMap(handle => {\n    return from(handle.evaluate((el, scrollTop, scrollLeft) => {\n      if (scrollTop !== undefined) {\n        el.scrollTop = scrollTop;\n      }\n      if (scrollLeft !== undefined) {\n        el.scrollLeft = scrollLeft;\n      }\n    }, options?.scrollTop, options?.scrollLeft)).pipe(catchError(err => {\n      void handle.dispose().catch(debugError);\n      throw err;\n    }));\n  }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n}\nvar _pageOrFrame = /*#__PURE__*/new WeakMap();\nvar _func = /*#__PURE__*/new WeakMap();\nexport class FunctionLocator extends Locator {\n  static create(pageOrFrame, func) {\n    return new FunctionLocator(pageOrFrame, func).setTimeout('getDefaultTimeout' in pageOrFrame ? pageOrFrame.getDefaultTimeout() : pageOrFrame.page().getDefaultTimeout());\n  }\n  constructor(pageOrFrame, func) {\n    super();\n    _classPrivateFieldInitSpec(this, _pageOrFrame, void 0);\n    _classPrivateFieldInitSpec(this, _func, void 0);\n    _classPrivateFieldSet(_pageOrFrame, this, pageOrFrame);\n    _classPrivateFieldSet(_func, this, func);\n  }\n  _clone() {\n    return new FunctionLocator(_classPrivateFieldGet(_pageOrFrame, this), _classPrivateFieldGet(_func, this));\n  }\n  _wait(options) {\n    const signal = options?.signal;\n    return defer(() => {\n      return from(_classPrivateFieldGet(_pageOrFrame, this).waitForFunction(_classPrivateFieldGet(_func, this), {\n        timeout: this.timeout,\n        signal\n      }));\n    }).pipe(throwIfEmpty());\n  }\n}\n/**\n * @internal\n */\nvar _delegate = /*#__PURE__*/new WeakMap();\nexport class DelegatedLocator extends Locator {\n  constructor(delegate) {\n    super();\n    _classPrivateFieldInitSpec(this, _delegate, void 0);\n    _classPrivateFieldSet(_delegate, this, delegate);\n    this.copyOptions(_classPrivateFieldGet(_delegate, this));\n  }\n  get delegate() {\n    return _classPrivateFieldGet(_delegate, this);\n  }\n  setTimeout(timeout) {\n    const locator = super.setTimeout(timeout);\n    _classPrivateFieldSet(_delegate, locator, _classPrivateFieldGet(_delegate, this).setTimeout(timeout));\n    return locator;\n  }\n  setVisibility(visibility) {\n    const locator = super.setVisibility(visibility);\n    _classPrivateFieldSet(_delegate, locator, _classPrivateFieldGet(_delegate, locator).setVisibility(visibility));\n    return locator;\n  }\n  setWaitForEnabled(value) {\n    const locator = super.setWaitForEnabled(value);\n    _classPrivateFieldSet(_delegate, locator, _classPrivateFieldGet(_delegate, this).setWaitForEnabled(value));\n    return locator;\n  }\n  setEnsureElementIsInTheViewport(value) {\n    const locator = super.setEnsureElementIsInTheViewport(value);\n    _classPrivateFieldSet(_delegate, locator, _classPrivateFieldGet(_delegate, this).setEnsureElementIsInTheViewport(value));\n    return locator;\n  }\n  setWaitForStableBoundingBox(value) {\n    const locator = super.setWaitForStableBoundingBox(value);\n    _classPrivateFieldSet(_delegate, locator, _classPrivateFieldGet(_delegate, this).setWaitForStableBoundingBox(value));\n    return locator;\n  }\n}\n/**\n * @internal\n */\nvar _predicate = /*#__PURE__*/new WeakMap();\nexport class FilteredLocator extends DelegatedLocator {\n  constructor(base, predicate) {\n    super(base);\n    _classPrivateFieldInitSpec(this, _predicate, void 0);\n    _classPrivateFieldSet(_predicate, this, predicate);\n  }\n  _clone() {\n    return new FilteredLocator(this.delegate.clone(), _classPrivateFieldGet(_predicate, this)).copyOptions(this);\n  }\n  _wait(options) {\n    return this.delegate._wait(options).pipe(mergeMap(handle => {\n      return from(Promise.resolve(_classPrivateFieldGet(_predicate, this).call(this, handle, options?.signal))).pipe(filter(value => {\n        return value;\n      }), map(() => {\n        // SAFETY: It passed the predicate, so this is correct.\n        return handle;\n      }));\n    }), throwIfEmpty());\n  }\n}\n/**\n * @internal\n */\nvar _mapper = /*#__PURE__*/new WeakMap();\nexport class MappedLocator extends DelegatedLocator {\n  constructor(base, mapper) {\n    super(base);\n    _classPrivateFieldInitSpec(this, _mapper, void 0);\n    _classPrivateFieldSet(_mapper, this, mapper);\n  }\n  _clone() {\n    return new MappedLocator(this.delegate.clone(), _classPrivateFieldGet(_mapper, this)).copyOptions(this);\n  }\n  _wait(options) {\n    return this.delegate._wait(options).pipe(mergeMap(handle => {\n      return from(Promise.resolve(_classPrivateFieldGet(_mapper, this).call(this, handle, options?.signal)));\n    }));\n  }\n}\n/**\n * @internal\n */\nvar _pageOrFrame2 = /*#__PURE__*/new WeakMap();\nvar _selector = /*#__PURE__*/new WeakMap();\nvar _waitForVisibilityIfNeeded = /*#__PURE__*/new WeakMap();\nexport class NodeLocator extends Locator {\n  static create(pageOrFrame, selector) {\n    return new NodeLocator(pageOrFrame, selector).setTimeout('getDefaultTimeout' in pageOrFrame ? pageOrFrame.getDefaultTimeout() : pageOrFrame.page().getDefaultTimeout());\n  }\n  constructor(pageOrFrame, selector) {\n    super();\n    _classPrivateFieldInitSpec(this, _pageOrFrame2, void 0);\n    _classPrivateFieldInitSpec(this, _selector, void 0);\n    /**\n     * Waits for the element to become visible or hidden. visibility === 'visible'\n     * means that the element has a computed style, the visibility property other\n     * than 'hidden' or 'collapse' and non-empty bounding box. visibility ===\n     * 'hidden' means the opposite of that.\n     */\n    _classPrivateFieldInitSpec(this, _waitForVisibilityIfNeeded, handle => {\n      if (!this.visibility) {\n        return EMPTY;\n      }\n      return (() => {\n        switch (this.visibility) {\n          case 'hidden':\n            return defer(() => {\n              return from(handle.isHidden());\n            });\n          case 'visible':\n            return defer(() => {\n              return from(handle.isVisible());\n            });\n        }\n      })().pipe(first(identity), retry({\n        delay: RETRY_DELAY\n      }), ignoreElements());\n    });\n    _classPrivateFieldSet(_pageOrFrame2, this, pageOrFrame);\n    _classPrivateFieldSet(_selector, this, selector);\n  }\n  _clone() {\n    return new NodeLocator(_classPrivateFieldGet(_pageOrFrame2, this), _classPrivateFieldGet(_selector, this)).copyOptions(this);\n  }\n  _wait(options) {\n    const signal = options?.signal;\n    return defer(() => {\n      return from(_classPrivateFieldGet(_pageOrFrame2, this).waitForSelector(_classPrivateFieldGet(_selector, this), {\n        visible: false,\n        timeout: this._timeout,\n        signal\n      }));\n    }).pipe(filter(value => {\n      return value !== null;\n    }), throwIfEmpty(), this.operators.conditions([_classPrivateFieldGet(_waitForVisibilityIfNeeded, this)], signal));\n  }\n}\nfunction checkLocatorArray(locators) {\n  for (const locator of locators) {\n    if (!(locator instanceof Locator)) {\n      throw new Error('Unknown locator for race candidate');\n    }\n  }\n  return locators;\n}\n/**\n * @internal\n */\nvar _locators = /*#__PURE__*/new WeakMap();\nexport class RaceLocator extends Locator {\n  static create(locators) {\n    const array = checkLocatorArray(locators);\n    return new RaceLocator(array);\n  }\n  constructor(locators) {\n    super();\n    _classPrivateFieldInitSpec(this, _locators, void 0);\n    _classPrivateFieldSet(_locators, this, locators);\n  }\n  _clone() {\n    return new RaceLocator(_classPrivateFieldGet(_locators, this).map(locator => {\n      return locator.clone();\n    })).copyOptions(this);\n  }\n  _wait(options) {\n    return race(..._classPrivateFieldGet(_locators, this).map(locator => {\n      return locator._wait(options);\n    }));\n  }\n}\n/**\n * For observables coming from promises, a delay is needed, otherwise RxJS will\n * never yield in a permanent failure for a promise.\n *\n * We also don't want RxJS to do promise operations to often, so we bump the\n * delay up to 100ms.\n *\n * @internal\n */\nexport const RETRY_DELAY = 100;","map":{"version":3,"names":["EMPTY","catchError","defaultIfEmpty","defer","filter","first","firstValueFrom","from","fromEvent","identity","ignoreElements","map","merge","mergeMap","noop","pipe","race","raceWith","retry","tap","throwIfEmpty","EventEmitter","debugError","timeout","LocatorEvent","_ensureElementIsInTheViewport","WeakMap","_waitForEnabled","_waitForStableBoundingBox","_waitForEnabledIfNeeded","_waitForStableBoundingBoxIfNeeded","_ensureElementIsInTheViewportIfNeeded","_Locator_brand","WeakSet","Locator","constructor","args","_classPrivateMethodInitSpec","_defineProperty","_classPrivateFieldInitSpec","conditions","signal","handle","condition","retryAndRaceWithSignalAndTimer","cause","candidates","push","reason","Error","_timeout","delay","RETRY_DELAY","_classPrivateFieldGet","frame","waitForFunction","element","HTMLElement","isNativeFormControl","includes","nodeName","hasAttribute","evaluate","Promise","resolve","window","requestAnimationFrame","rect1","getBoundingClientRect","rect2","x","y","width","height","isIntersectingViewport","threshold","scrollIntoView","locators","RaceLocator","create","setTimeout","locator","_clone","setVisibility","visibility","setWaitForEnabled","value","_classPrivateFieldSet","setEnsureElementIsInTheViewport","setWaitForStableBoundingBox","copyOptions","clone","waitHandle","options","_wait","operators","wait","__addDisposableResource","env_1","jsonValue","mapper","MappedLocator","evaluateHandle","predicate","FilteredLocator","filterHandle","mapHandle","click","_assertClassBrand","_click","call","fill","_fill","hover","_hover","scroll","_scroll","emit","Action","undefined","err","dispose","catch","el","HTMLSelectElement","HTMLTextAreaElement","HTMLInputElement","Set","has","type","isContentEditable","inputType","select","then","input","newValue","currentValue","innerText","length","startsWith","originalValue","substring","textToType","focus","dispatchEvent","Event","bubbles","scrollTop","scrollLeft","_pageOrFrame","_func","FunctionLocator","pageOrFrame","func","getDefaultTimeout","page","_delegate","DelegatedLocator","delegate","_predicate","base","_mapper","_pageOrFrame2","_selector","_waitForVisibilityIfNeeded","NodeLocator","selector","isHidden","isVisible","waitForSelector","visible","checkLocatorArray","_locators","array"],"sources":["../../../../../src/api/locators/locators.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}