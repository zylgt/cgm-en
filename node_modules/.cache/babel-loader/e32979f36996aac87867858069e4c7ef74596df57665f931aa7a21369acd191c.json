{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport path from 'path';\nimport { getText } from '../httpUtil.js';\nimport { BrowserPlatform } from './types.js';\nfunction archive(platform, buildId) {\n  switch (platform) {\n    case BrowserPlatform.LINUX:\n      return 'chrome-linux';\n    case BrowserPlatform.MAC_ARM:\n    case BrowserPlatform.MAC:\n      return 'chrome-mac';\n    case BrowserPlatform.WIN32:\n    case BrowserPlatform.WIN64:\n      // Windows archive name changed at r591479.\n      return parseInt(buildId, 10) > 591479 ? 'chrome-win' : 'chrome-win32';\n  }\n}\nfunction folder(platform) {\n  switch (platform) {\n    case BrowserPlatform.LINUX:\n      return 'Linux_x64';\n    case BrowserPlatform.MAC_ARM:\n      return 'Mac_Arm';\n    case BrowserPlatform.MAC:\n      return 'Mac';\n    case BrowserPlatform.WIN32:\n      return 'Win';\n    case BrowserPlatform.WIN64:\n      return 'Win_x64';\n  }\n}\nexport function resolveDownloadUrl(platform, buildId, baseUrl = 'https://storage.googleapis.com/chromium-browser-snapshots') {\n  return `${baseUrl}/${resolveDownloadPath(platform, buildId).join('/')}`;\n}\nexport function resolveDownloadPath(platform, buildId) {\n  return [folder(platform), buildId, `${archive(platform, buildId)}.zip`];\n}\nexport function relativeExecutablePath(platform, _buildId) {\n  switch (platform) {\n    case BrowserPlatform.MAC:\n    case BrowserPlatform.MAC_ARM:\n      return path.join('chrome-mac', 'Chromium.app', 'Contents', 'MacOS', 'Chromium');\n    case BrowserPlatform.LINUX:\n      return path.join('chrome-linux', 'chrome');\n    case BrowserPlatform.WIN32:\n    case BrowserPlatform.WIN64:\n      return path.join('chrome-win', 'chrome.exe');\n  }\n}\nexport async function resolveBuildId(platform) {\n  return await getText(new URL(`https://storage.googleapis.com/chromium-browser-snapshots/${folder(platform)}/LAST_CHANGE`));\n}\nexport function compareVersions(a, b) {\n  return Number(a) - Number(b);\n}","map":{"version":3,"names":["path","getText","BrowserPlatform","archive","platform","buildId","LINUX","MAC_ARM","MAC","WIN32","WIN64","parseInt","folder","resolveDownloadUrl","baseUrl","resolveDownloadPath","join","relativeExecutablePath","_buildId","resolveBuildId","URL","compareVersions","a","b","Number"],"sources":["../../../src/browser-data/chromium.ts"],"sourcesContent":[null],"mappings":";;;AAAA;;;;;AAMA,OAAOA,IAAI,MAAM,MAAM;AAEvB,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,SAAQC,eAAe,QAAO,YAAY;AAE1C,SAASC,OAAOA,CAACC,QAAyB,EAAEC,OAAe;EACzD,QAAQD,QAAQ;IACd,KAAKF,eAAe,CAACI,KAAK;MACxB,OAAO,cAAc;IACvB,KAAKJ,eAAe,CAACK,OAAO;IAC5B,KAAKL,eAAe,CAACM,GAAG;MACtB,OAAO,YAAY;IACrB,KAAKN,eAAe,CAACO,KAAK;IAC1B,KAAKP,eAAe,CAACQ,KAAK;MACxB;MACA,OAAOC,QAAQ,CAACN,OAAO,EAAE,EAAE,CAAC,GAAG,MAAM,GAAG,YAAY,GAAG,cAAc;EACzE;AACF;AAEA,SAASO,MAAMA,CAACR,QAAyB;EACvC,QAAQA,QAAQ;IACd,KAAKF,eAAe,CAACI,KAAK;MACxB,OAAO,WAAW;IACpB,KAAKJ,eAAe,CAACK,OAAO;MAC1B,OAAO,SAAS;IAClB,KAAKL,eAAe,CAACM,GAAG;MACtB,OAAO,KAAK;IACd,KAAKN,eAAe,CAACO,KAAK;MACxB,OAAO,KAAK;IACd,KAAKP,eAAe,CAACQ,KAAK;MACxB,OAAO,SAAS;EACpB;AACF;AAEA,OAAM,SAAUG,kBAAkBA,CAChCT,QAAyB,EACzBC,OAAe,EACfS,OAAO,GAAG,2DAA2D;EAErE,OAAO,GAAGA,OAAO,IAAIC,mBAAmB,CAACX,QAAQ,EAAEC,OAAO,CAAC,CAACW,IAAI,CAAC,GAAG,CAAC,EAAE;AACzE;AAEA,OAAM,SAAUD,mBAAmBA,CACjCX,QAAyB,EACzBC,OAAe;EAEf,OAAO,CAACO,MAAM,CAACR,QAAQ,CAAC,EAAEC,OAAO,EAAE,GAAGF,OAAO,CAACC,QAAQ,EAAEC,OAAO,CAAC,MAAM,CAAC;AACzE;AAEA,OAAM,SAAUY,sBAAsBA,CACpCb,QAAyB,EACzBc,QAAgB;EAEhB,QAAQd,QAAQ;IACd,KAAKF,eAAe,CAACM,GAAG;IACxB,KAAKN,eAAe,CAACK,OAAO;MAC1B,OAAOP,IAAI,CAACgB,IAAI,CACd,YAAY,EACZ,cAAc,EACd,UAAU,EACV,OAAO,EACP,UAAU,CACX;IACH,KAAKd,eAAe,CAACI,KAAK;MACxB,OAAON,IAAI,CAACgB,IAAI,CAAC,cAAc,EAAE,QAAQ,CAAC;IAC5C,KAAKd,eAAe,CAACO,KAAK;IAC1B,KAAKP,eAAe,CAACQ,KAAK;MACxB,OAAOV,IAAI,CAACgB,IAAI,CAAC,YAAY,EAAE,YAAY,CAAC;EAChD;AACF;AACA,OAAO,eAAeG,cAAcA,CAClCf,QAAyB;EAEzB,OAAO,MAAMH,OAAO,CAClB,IAAImB,GAAG,CACL,6DAA6DR,MAAM,CACjER,QAAQ,CACT,cAAc,CAChB,CACF;AACH;AAEA,OAAM,SAAUiB,eAAeA,CAACC,CAAS,EAAEC,CAAS;EAClD,OAAOC,MAAM,CAACF,CAAC,CAAC,GAAGE,MAAM,CAACD,CAAC,CAAC;AAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}