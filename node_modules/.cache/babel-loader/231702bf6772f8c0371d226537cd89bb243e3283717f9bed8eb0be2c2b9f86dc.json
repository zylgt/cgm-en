{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _ARIAQueryHandler;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ARIAQueryHandler = void 0;\nconst QueryHandler_js_1 = require(\"../common/QueryHandler.js\");\nconst assert_js_1 = require(\"../util/assert.js\");\nconst AsyncIterableUtil_js_1 = require(\"../util/AsyncIterableUtil.js\");\nconst isKnownAttribute = attribute => {\n  return ['name', 'role'].includes(attribute);\n};\nconst normalizeValue = value => {\n  return value.replace(/ +/g, ' ').trim();\n};\n/**\n * The selectors consist of an accessible name to query for and optionally\n * further aria attributes on the form `[<attribute>=<value>]`.\n * Currently, we only support the `name` and `role` attribute.\n * The following examples showcase how the syntax works wrt. querying:\n *\n * - 'title[role=\"heading\"]' queries for elements with name 'title' and role 'heading'.\n * - '[role=\"image\"]' queries for elements with role 'image' and any name.\n * - 'label' queries for elements with name 'label' and any role.\n * - '[name=\"\"][role=\"button\"]' queries for elements with no name and role 'button'.\n */\nconst ATTRIBUTE_REGEXP = /\\[\\s*(?<attribute>\\w+)\\s*=\\s*(?<quote>\"|')(?<value>\\\\.|.*?(?=\\k<quote>))\\k<quote>\\s*\\]/g;\nconst parseARIASelector = selector => {\n  const queryOptions = {};\n  const defaultName = selector.replace(ATTRIBUTE_REGEXP, (_, attribute, __, value) => {\n    attribute = attribute.trim();\n    (0, assert_js_1.assert)(isKnownAttribute(attribute), `Unknown aria attribute \"${attribute}\" in selector`);\n    queryOptions[attribute] = normalizeValue(value);\n    return '';\n  });\n  if (defaultName && !queryOptions.name) {\n    queryOptions.name = normalizeValue(defaultName);\n  }\n  return queryOptions;\n};\n/**\n * @internal\n */\nclass ARIAQueryHandler extends QueryHandler_js_1.QueryHandler {\n  static async *queryAll(element, selector) {\n    const {\n      name,\n      role\n    } = parseARIASelector(selector);\n    yield* element.queryAXTree(name, role);\n  }\n}\n_ARIAQueryHandler = ARIAQueryHandler;\n_defineProperty(ARIAQueryHandler, \"querySelector\", async (node, selector, {\n  ariaQuerySelector\n}) => {\n  return await ariaQuerySelector(node, selector);\n});\n_defineProperty(ARIAQueryHandler, \"queryOne\", async (element, selector) => {\n  return (await AsyncIterableUtil_js_1.AsyncIterableUtil.first(_ARIAQueryHandler.queryAll(element, selector))) ?? null;\n});\nexports.ARIAQueryHandler = ARIAQueryHandler;","map":{"version":3,"names":["_defineProperty","require","default","_ARIAQueryHandler","QueryHandler_js_1","assert_js_1","AsyncIterableUtil_js_1","isKnownAttribute","attribute","includes","normalizeValue","value","replace","trim","ATTRIBUTE_REGEXP","parseARIASelector","selector","queryOptions","defaultName","_","__","assert","name","ARIAQueryHandler","QueryHandler","queryAll","element","role","queryAXTree","node","ariaQuerySelector","AsyncIterableUtil","first","exports"],"sources":["../../../../src/cdp/AriaQueryHandler.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;AAAA,IAAAA,eAAA,GAAAC,OAAA,mGAAAC,OAAA;AAAA,IAAAC,iBAAA;;;;;AAOA,MAAAC,iBAAA,GAAAH,OAAA;AAEA,MAAAI,WAAA,GAAAJ,OAAA;AACA,MAAAK,sBAAA,GAAAL,OAAA;AAOA,MAAMM,gBAAgB,GACpBC,SAAiB,IACkB;EACnC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,CAACC,QAAQ,CAACD,SAAS,CAAC;AAC7C,CAAC;AAED,MAAME,cAAc,GAAIC,KAAa,IAAY;EAC/C,OAAOA,KAAK,CAACC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAACC,IAAI,EAAE;AACzC,CAAC;AAED;;;;;;;;;;;AAWA,MAAMC,gBAAgB,GACpB,yFAAyF;AAC3F,MAAMC,iBAAiB,GAAIC,QAAgB,IAAkB;EAC3D,MAAMC,YAAY,GAAiB,EAAE;EACrC,MAAMC,WAAW,GAAGF,QAAQ,CAACJ,OAAO,CAClCE,gBAAgB,EAChB,CAACK,CAAC,EAAEX,SAAS,EAAEY,EAAE,EAAET,KAAK,KAAI;IAC1BH,SAAS,GAAGA,SAAS,CAACK,IAAI,EAAE;IAC5B,IAAAR,WAAA,CAAAgB,MAAM,EACJd,gBAAgB,CAACC,SAAS,CAAC,EAC3B,2BAA2BA,SAAS,eAAe,CACpD;IACDS,YAAY,CAACT,SAAS,CAAC,GAAGE,cAAc,CAACC,KAAK,CAAC;IAC/C,OAAO,EAAE;EACX,CAAC,CACF;EACD,IAAIO,WAAW,IAAI,CAACD,YAAY,CAACK,IAAI,EAAE;IACrCL,YAAY,CAACK,IAAI,GAAGZ,cAAc,CAACQ,WAAW,CAAC;EACjD;EACA,OAAOD,YAAY;AACrB,CAAC;AAED;;;AAGA,MAAaM,gBAAiB,SAAQnB,iBAAA,CAAAoB,YAAY;EAShD,cAAuBC,QAAQA,CAC7BC,OAA4B,EAC5BV,QAAgB;IAEhB,MAAM;MAACM,IAAI;MAAEK;IAAI,CAAC,GAAGZ,iBAAiB,CAACC,QAAQ,CAAC;IAChD,OAAOU,OAAO,CAACE,WAAW,CAACN,IAAI,EAAEK,IAAI,CAAC;EACxC;;oBAfWJ,gBAAiB;AAAAvB,eAAA,CAAjBuB,gBAAiB,mBACmB,OAC7CM,IAAI,EACJb,QAAQ,EACR;EAACc;AAAiB,CAAC,KACjB;EACF,OAAO,MAAMA,iBAAiB,CAACD,IAAI,EAAEb,QAAQ,CAAC;AAChD,CAAC;AAAAhB,eAAA,CAPUuB,gBAAiB,cAiBD,OACzBG,OAA4B,EAC5BV,QAAgB,KACuB;EACvC,OACE,CAAC,MAAMV,sBAAA,CAAAyB,iBAAiB,CAACC,KAAK,CAAC7B,iBAAA,CAAKsB,QAAQ,CAACC,OAAO,EAAEV,QAAQ,CAAC,CAAC,KAAK,IAAI;AAE7E,CAAC;AAxBHiB,OAAA,CAAAV,gBAAA,GAAAA,gBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}