{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nrequire(\"core-js/modules/es.array.push.js\");\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JSHandle = void 0;\nconst util_js_1 = require(\"../common/util.js\");\nconst decorators_js_1 = require(\"../util/decorators.js\");\nconst disposable_js_1 = require(\"../util/disposable.js\");\n/**\n * Represents a reference to a JavaScript object. Instances can be created using\n * {@link Page.evaluateHandle}.\n *\n * Handles prevent the referenced JavaScript object from being garbage-collected\n * unless the handle is purposely {@link JSHandle.dispose | disposed}. JSHandles\n * are auto-disposed when their associated frame is navigated away or the parent\n * context gets destroyed.\n *\n * Handles can be used as arguments for any evaluation function such as\n * {@link Page.$eval}, {@link Page.evaluate}, and {@link Page.evaluateHandle}.\n * They are resolved to their referenced object.\n *\n * @example\n *\n * ```ts\n * const windowHandle = await page.evaluateHandle(() => window);\n * ```\n *\n * @public\n */\nlet JSHandle = ((_ref, _disposable_js_1$asyn, _Class) => {\n  let _classDecorators = [decorators_js_1.moveable];\n  let _classDescriptor;\n  let _classExtraInitializers = [];\n  let _classThis;\n  let _instanceExtraInitializers = [];\n  let _getProperty_decorators;\n  let _getProperties_decorators;\n  var _JSHandle = (_ref = (_getProperty_decorators = [(0, decorators_js_1.throwIfDisposed)()], _getProperties_decorators = [(0, decorators_js_1.throwIfDisposed)()], disposable_js_1.disposeSymbol), _disposable_js_1$asyn = disposable_js_1.asyncDisposeSymbol, (_Class = class JSHandle {\n    /**\n     * @internal\n     */\n    constructor() {\n      __runInitializers(this, _instanceExtraInitializers);\n    }\n    /**\n     * Evaluates the given function with the current handle as its first argument.\n     */\n    async evaluate(pageFunction, ...args) {\n      pageFunction = (0, util_js_1.withSourcePuppeteerURLIfNone)(this.evaluate.name, pageFunction);\n      return await this.realm.evaluate(pageFunction, this, ...args);\n    }\n    /**\n     * Evaluates the given function with the current handle as its first argument.\n     *\n     */\n    async evaluateHandle(pageFunction, ...args) {\n      pageFunction = (0, util_js_1.withSourcePuppeteerURLIfNone)(this.evaluateHandle.name, pageFunction);\n      return await this.realm.evaluateHandle(pageFunction, this, ...args);\n    }\n    /**\n     * @internal\n     */\n    async getProperty(propertyName) {\n      return await this.evaluateHandle((object, propertyName) => {\n        return object[propertyName];\n      }, propertyName);\n    }\n    /**\n     * Gets a map of handles representing the properties of the current handle.\n     *\n     * @example\n     *\n     * ```ts\n     * const listHandle = await page.evaluateHandle(() => document.body.children);\n     * const properties = await listHandle.getProperties();\n     * const children = [];\n     * for (const property of properties.values()) {\n     *   const element = property.asElement();\n     *   if (element) {\n     *     children.push(element);\n     *   }\n     * }\n     * children; // holds elementHandles to all children of document.body\n     * ```\n     */\n    async getProperties() {\n      const propertyNames = await this.evaluate(object => {\n        const enumerableProperties = [];\n        const descriptors = Object.getOwnPropertyDescriptors(object);\n        for (const propertyName in descriptors) {\n          if (descriptors[propertyName]?.enumerable) {\n            enumerableProperties.push(propertyName);\n          }\n        }\n        return enumerableProperties;\n      });\n      const map = new Map();\n      const results = await Promise.all(propertyNames.map(key => {\n        return this.getProperty(key);\n      }));\n      for (const [key, value] of Object.entries(propertyNames)) {\n        const env_1 = {\n          stack: [],\n          error: void 0,\n          hasError: false\n        };\n        try {\n          const handle = __addDisposableResource(env_1, results[key], false);\n          if (handle) {\n            map.set(value, handle.move());\n          }\n        } catch (e_1) {\n          env_1.error = e_1;\n          env_1.hasError = true;\n        } finally {\n          __disposeResources(env_1);\n        }\n      }\n      return map;\n    }\n    /** @internal */\n    [_ref]() {\n      return void this.dispose().catch(util_js_1.debugError);\n    }\n    /** @internal */\n    [_disposable_js_1$asyn]() {\n      return this.dispose();\n    }\n  }, _classThis = _Class, (() => {\n    const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n    __esDecorate(_Class, null, _getProperty_decorators, {\n      kind: \"method\",\n      name: \"getProperty\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"getProperty\" in obj,\n        get: obj => obj.getProperty\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_Class, null, _getProperties_decorators, {\n      kind: \"method\",\n      name: \"getProperties\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"getProperties\" in obj,\n        get: obj => obj.getProperties\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(null, _classDescriptor = {\n      value: _classThis\n    }, _classDecorators, {\n      kind: \"class\",\n      name: _classThis.name,\n      metadata: _metadata\n    }, null, _classExtraInitializers);\n    _JSHandle = _classThis = _classDescriptor.value;\n    if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _metadata\n    });\n    __runInitializers(_classThis, _classExtraInitializers);\n  })(), _Class));\n  return _JSHandle = _classThis;\n})();\nexports.JSHandle = JSHandle;","map":{"version":3,"names":["require","util_js_1","decorators_js_1","disposable_js_1","JSHandle","_ref","_disposable_js_1$asyn","_Class","moveable","_getProperty_decorators","throwIfDisposed","_getProperties_decorators","disposeSymbol","asyncDisposeSymbol","constructor","evaluate","pageFunction","args","withSourcePuppeteerURLIfNone","name","realm","evaluateHandle","getProperty","propertyName","object","getProperties","propertyNames","enumerableProperties","descriptors","Object","getOwnPropertyDescriptors","enumerable","push","map","Map","results","Promise","all","key","value","entries","handle","__addDisposableResource","env_1","set","move","dispose","catch","debugError","__esDecorate","kind","static","private","access","has","obj","get","metadata","_metadata","_instanceExtraInitializers","_classDescriptor","_classThis","_classDecorators","_classExtraInitializers","__runInitializers","exports"],"sources":["../../../../src/api/JSHandle.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}