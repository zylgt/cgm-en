{"ast":null,"code":"export default {\n  name: 'TIR',\n  data() {\n    return {\n      levels: [{\n        key: '2 级高血糖',\n        value: 96.0,\n        color: '#E98C41',\n        desc: '>13.9mmol/L'\n      }, {\n        key: '1 级高血糖',\n        value: 1.0,\n        color: '#F6C059',\n        desc: '10.1-13.9mmol/L'\n      }, {\n        key: '目标范围内',\n        value: 1.0,\n        color: '#32BAC0',\n        desc: '3.9~10.0mmol/L'\n      }, {\n        key: '1 级低血糖',\n        value: 1.0,\n        color: '#F43F31',\n        desc: '3.0~3.8mmol/L'\n      }, {\n        key: '2 级低血糖',\n        value: 1.0,\n        color: '#96251C',\n        desc: '<3.0mmol/L'\n      }]\n    };\n  },\n  created() {\n    this.setTirView();\n  },\n  methods: {\n    setTirView() {\n      const ChartLeftBarH = 260; // 左侧条形高度\n      const ChartLeftBarMargin = 1.2; // 左侧条形间距\n\n      const ChartRightTextH = 42; // 右侧单个Item文字高度\n\n      var leftItemCenterY = ChartRightTextH;\n      var preLeftItemH = 0;\n      const levels_1 = this.levels.map((item, index) => {\n        // 左侧Item间距\n        const leftMarginH = (this.levels.length - 1) * ChartLeftBarMargin;\n        // 左侧Item高度\n        const leftItemH = (ChartLeftBarH - leftMarginH) * item.value / 100.0;\n        const margin = index === 0 ? 0 : ChartLeftBarMargin;\n        leftItemCenterY = leftItemCenterY + preLeftItemH / 2 + margin + leftItemH / 2;\n        preLeftItemH = leftItemH;\n        // 右侧Item文字高度\n        let rightItemTextH = ChartRightTextH;\n        if (index === 2) rightItemTextH = ChartRightTextH * 2; //两行文字\n        return {\n          ...item,\n          leftItemH: leftItemH,\n          leftItemY: leftItemCenterY - leftItemH / 2,\n          leftItemCenterY: leftItemCenterY,\n          rightItemTextH: rightItemTextH\n        };\n      });\n      var preRightItemBottom = 0;\n      var rightItemH = 0;\n      var rightItemTop = 0;\n      var lineLocW1 = 0; // 折线第一段横线\n      var lineLocH = 0; // =0:居中、>0:向下\n      var lineLocW2 = 0; // 折线第二段横线\n\n      const levels_2 = levels_1.map((item, index) => {\n        const cu_item = item;\n        if (index === 0) {\n          rightItemH = item.rightItemTextH;\n          rightItemTop = item.leftItemCenterY - rightItemH / 2;\n          lineLocW1 = 0;\n          lineLocH = 0;\n          lineLocW2 = 0;\n          preRightItemBottom = rightItemTop + rightItemH;\n        } else {\n          const cu_rightItemY = item.leftItemCenterY - item.rightItemTextH / 2;\n          const r_margin = cu_rightItemY - preRightItemBottom;\n          if (r_margin >= 0) {\n            // 当前Item能放下，居中显示\n            rightItemH = item.rightItemTextH;\n            rightItemTop = r_margin;\n            lineLocW1 = 0;\n            lineLocH = 0;\n            lineLocW2 = 0;\n            preRightItemBottom = preRightItemBottom + rightItemTop + rightItemH;\n          } else {\n            // 当前Item不能放下，向下显示\n            const lc_rb_margin = item.leftItemCenterY - preRightItemBottom;\n            if (lc_rb_margin >= 0) {\n              rightItemH = item.rightItemTextH;\n              rightItemTop = lc_rb_margin;\n              lineLocH = item.rightItemTextH / 2;\n              preRightItemBottom = preRightItemBottom + rightItemTop + rightItemH;\n            } else {\n              rightItemH = item.rightItemTextH + Math.abs(lc_rb_margin);\n              rightItemTop = lc_rb_margin;\n              lineLocH = item.rightItemTextH / 2 + Math.abs(lc_rb_margin);\n              preRightItemBottom = preRightItemBottom + item.rightItemTextH;\n            }\n            // 12 - 0.5 = 11.5 分前后两段横线\n            if (index === 1) {\n              lineLocW1 = 6.5;\n              lineLocW2 = 5;\n            } else if (index === 2) {\n              lineLocW1 = 5;\n              lineLocH = lineLocH - 8; // 目标顶部对齐\n              lineLocW2 = 6.5;\n            } else if (index === 3) {\n              lineLocW1 = 3.5;\n              lineLocW2 = 8;\n            } else if (index === 4) {\n              lineLocW1 = 2;\n              lineLocW2 = 9.5;\n            }\n          }\n        }\n        return {\n          ...item,\n          rightItemH: rightItemH,\n          rightItemTop: rightItemTop,\n          lineLocW1: lineLocW1,\n          lineLocH: lineLocH,\n          lineLocW2: lineLocW2\n        };\n      });\n      this.levels = levels_2;\n      console.log(this.levels);\n    }\n  }\n};","map":{"version":3,"names":["name","data","levels","key","value","color","desc","created","setTirView","methods","ChartLeftBarH","ChartLeftBarMargin","ChartRightTextH","leftItemCenterY","preLeftItemH","levels_1","map","item","index","leftMarginH","length","leftItemH","margin","rightItemTextH","leftItemY","preRightItemBottom","rightItemH","rightItemTop","lineLocW1","lineLocH","lineLocW2","levels_2","cu_item","cu_rightItemY","r_margin","lc_rb_margin","Math","abs","console","log"],"sources":["src/views/components/Chart/TIR_COPY.vue"],"sourcesContent":["<template>\n    <div class='TIR' >\n        <div class='tir-bar' >\n            <div class='tir-bar-item' style='' ></div>\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n    name:'TIR',\n    data(){\n        return{\n            levels: [\n                {key: '2 级高血糖', value: 96.0, color: '#E98C41', desc: '>13.9mmol/L'},\n                {\n                    key: '1 级高血糖',\n                    value: 1.0,\n                    color: '#F6C059',\n                    desc: '10.1-13.9mmol/L',\n                },\n                {\n                    key: '目标范围内',\n                    value: 1.0,\n                    color: '#32BAC0',\n                    desc: '3.9~10.0mmol/L',\n                },\n                {key: '1 级低血糖', value: 1.0, color: '#F43F31', desc: '3.0~3.8mmol/L'},\n                {key: '2 级低血糖', value: 1.0, color: '#96251C', desc: '<3.0mmol/L'},\n            ], \n        }\n    },\n    created(){\n        this.setTirView()\n    },\n    methods:{\n        setTirView(){\n            const ChartLeftBarH = 260; // 左侧条形高度\n            const ChartLeftBarMargin = 1.2; // 左侧条形间距\n\n            const ChartRightTextH = 42; // 右侧单个Item文字高度\n\n            var leftItemCenterY = ChartRightTextH;\n            var preLeftItemH = 0;\n            const levels_1 = this.levels.map((item, index) => {\n                // 左侧Item间距\n                const leftMarginH = (this.levels.length - 1) * ChartLeftBarMargin;\n                // 左侧Item高度\n                const leftItemH = ((ChartLeftBarH - leftMarginH) * item.value) / 100.0;\n                const margin = index === 0 ? 0 : ChartLeftBarMargin;\n                leftItemCenterY =\n                leftItemCenterY + preLeftItemH / 2 + margin + leftItemH / 2;\n                preLeftItemH = leftItemH;\n                // 右侧Item文字高度\n                let rightItemTextH = ChartRightTextH;\n                if (index === 2) rightItemTextH = ChartRightTextH * 2; //两行文字\n                return {\n                ...item,\n                leftItemH: leftItemH,\n                leftItemY: leftItemCenterY - leftItemH / 2,\n                leftItemCenterY: leftItemCenterY,\n                rightItemTextH: rightItemTextH,\n                };\n            });\n            var preRightItemBottom = 0;\n            var rightItemH = 0;\n            var rightItemTop = 0;\n            var lineLocW1 = 0; // 折线第一段横线\n            var lineLocH = 0; // =0:居中、>0:向下\n            var lineLocW2 = 0; // 折线第二段横线\n\n            const levels_2 = levels_1.map((item, index) => {\n                const cu_item = item;\n                if (index === 0) {\n                rightItemH = item.rightItemTextH;\n                rightItemTop = item.leftItemCenterY - rightItemH / 2;\n                lineLocW1 = 0;\n                lineLocH = 0;\n                lineLocW2 = 0;\n                preRightItemBottom = rightItemTop + rightItemH;\n                } else {\n                const cu_rightItemY = item.leftItemCenterY - item.rightItemTextH / 2;\n                const r_margin = cu_rightItemY - preRightItemBottom;\n\n                if (r_margin >= 0) {\n                    // 当前Item能放下，居中显示\n                    rightItemH = item.rightItemTextH;\n                    rightItemTop = r_margin;\n                    lineLocW1 = 0;\n                    lineLocH = 0;\n                    lineLocW2 = 0;\n                    preRightItemBottom = preRightItemBottom + rightItemTop + rightItemH;\n                } else {\n                    // 当前Item不能放下，向下显示\n                    const lc_rb_margin = item.leftItemCenterY - preRightItemBottom;\n                    if (lc_rb_margin >= 0) {\n                    rightItemH = item.rightItemTextH;\n                    rightItemTop = lc_rb_margin;\n                    lineLocH = item.rightItemTextH / 2;\n                    preRightItemBottom = preRightItemBottom + rightItemTop + rightItemH;\n                    } else {\n                    rightItemH = item.rightItemTextH + Math.abs(lc_rb_margin);\n                    rightItemTop = lc_rb_margin;\n                    lineLocH = item.rightItemTextH / 2 + Math.abs(lc_rb_margin);\n                    preRightItemBottom = preRightItemBottom + item.rightItemTextH;\n                    }\n                    // 12 - 0.5 = 11.5 分前后两段横线\n                    if (index === 1) {\n                    lineLocW1 = 6.5;\n                    lineLocW2 = 5;\n                    } else if (index === 2) {\n                    lineLocW1 = 5;\n                    lineLocH = lineLocH - 8; // 目标顶部对齐\n                    lineLocW2 = 6.5;\n                    } else if (index === 3) {\n                    lineLocW1 = 3.5;\n                    lineLocW2 = 8;\n                    } else if (index === 4) {\n                    lineLocW1 = 2;\n                    lineLocW2 = 9.5;\n                    }\n                }\n                }\n                return {\n                ...item,\n                rightItemH: rightItemH,\n                rightItemTop: rightItemTop,\n                lineLocW1: lineLocW1,\n                lineLocH: lineLocH,\n                lineLocW2: lineLocW2,\n                };\n            });\n\n            this.levels = levels_2\n            console.log(this.levels)\n        }\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}