{"ast":null,"code":"/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport * as chromeHeadlessShell from './chrome-headless-shell.js';\nimport * as chrome from './chrome.js';\nimport * as chromedriver from './chromedriver.js';\nimport * as chromium from './chromium.js';\nimport * as firefox from './firefox.js';\nimport { Browser, BrowserPlatform, BrowserTag, ChromeReleaseChannel } from './types.js';\nexport const downloadUrls = {\n  [Browser.CHROMEDRIVER]: chromedriver.resolveDownloadUrl,\n  [Browser.CHROMEHEADLESSSHELL]: chromeHeadlessShell.resolveDownloadUrl,\n  [Browser.CHROME]: chrome.resolveDownloadUrl,\n  [Browser.CHROMIUM]: chromium.resolveDownloadUrl,\n  [Browser.FIREFOX]: firefox.resolveDownloadUrl\n};\nexport const downloadPaths = {\n  [Browser.CHROMEDRIVER]: chromedriver.resolveDownloadPath,\n  [Browser.CHROMEHEADLESSSHELL]: chromeHeadlessShell.resolveDownloadPath,\n  [Browser.CHROME]: chrome.resolveDownloadPath,\n  [Browser.CHROMIUM]: chromium.resolveDownloadPath,\n  [Browser.FIREFOX]: firefox.resolveDownloadPath\n};\nexport const executablePathByBrowser = {\n  [Browser.CHROMEDRIVER]: chromedriver.relativeExecutablePath,\n  [Browser.CHROMEHEADLESSSHELL]: chromeHeadlessShell.relativeExecutablePath,\n  [Browser.CHROME]: chrome.relativeExecutablePath,\n  [Browser.CHROMIUM]: chromium.relativeExecutablePath,\n  [Browser.FIREFOX]: firefox.relativeExecutablePath\n};\nexport const versionComparators = {\n  [Browser.CHROMEDRIVER]: chromedriver.compareVersions,\n  [Browser.CHROMEHEADLESSSHELL]: chromeHeadlessShell.compareVersions,\n  [Browser.CHROME]: chrome.compareVersions,\n  [Browser.CHROMIUM]: chromium.compareVersions,\n  [Browser.FIREFOX]: firefox.compareVersions\n};\nexport { Browser, BrowserPlatform, ChromeReleaseChannel };\n/**\n * @internal\n */\nasync function resolveBuildIdForBrowserTag(browser, platform, tag) {\n  switch (browser) {\n    case Browser.FIREFOX:\n      switch (tag) {\n        case BrowserTag.LATEST:\n          return await firefox.resolveBuildId(firefox.FirefoxChannel.NIGHTLY);\n        case BrowserTag.BETA:\n          return await firefox.resolveBuildId(firefox.FirefoxChannel.BETA);\n        case BrowserTag.NIGHTLY:\n          return await firefox.resolveBuildId(firefox.FirefoxChannel.NIGHTLY);\n        case BrowserTag.DEVEDITION:\n          return await firefox.resolveBuildId(firefox.FirefoxChannel.DEVEDITION);\n        case BrowserTag.STABLE:\n          return await firefox.resolveBuildId(firefox.FirefoxChannel.STABLE);\n        case BrowserTag.ESR:\n          return await firefox.resolveBuildId(firefox.FirefoxChannel.ESR);\n        case BrowserTag.CANARY:\n        case BrowserTag.DEV:\n          throw new Error(`${tag.toUpperCase()} is not available for Firefox`);\n      }\n    case Browser.CHROME:\n      {\n        switch (tag) {\n          case BrowserTag.LATEST:\n            return await chrome.resolveBuildId(ChromeReleaseChannel.CANARY);\n          case BrowserTag.BETA:\n            return await chrome.resolveBuildId(ChromeReleaseChannel.BETA);\n          case BrowserTag.CANARY:\n            return await chrome.resolveBuildId(ChromeReleaseChannel.CANARY);\n          case BrowserTag.DEV:\n            return await chrome.resolveBuildId(ChromeReleaseChannel.DEV);\n          case BrowserTag.STABLE:\n            return await chrome.resolveBuildId(ChromeReleaseChannel.STABLE);\n          case BrowserTag.NIGHTLY:\n          case BrowserTag.DEVEDITION:\n          case BrowserTag.ESR:\n            throw new Error(`${tag.toUpperCase()} is not available for Chrome`);\n        }\n      }\n    case Browser.CHROMEDRIVER:\n      {\n        switch (tag) {\n          case BrowserTag.LATEST:\n          case BrowserTag.CANARY:\n            return await chromedriver.resolveBuildId(ChromeReleaseChannel.CANARY);\n          case BrowserTag.BETA:\n            return await chromedriver.resolveBuildId(ChromeReleaseChannel.BETA);\n          case BrowserTag.DEV:\n            return await chromedriver.resolveBuildId(ChromeReleaseChannel.DEV);\n          case BrowserTag.STABLE:\n            return await chromedriver.resolveBuildId(ChromeReleaseChannel.STABLE);\n          case BrowserTag.NIGHTLY:\n          case BrowserTag.DEVEDITION:\n          case BrowserTag.ESR:\n            throw new Error(`${tag.toUpperCase()} is not available for ChromeDriver`);\n        }\n      }\n    case Browser.CHROMEHEADLESSSHELL:\n      {\n        switch (tag) {\n          case BrowserTag.LATEST:\n          case BrowserTag.CANARY:\n            return await chromeHeadlessShell.resolveBuildId(ChromeReleaseChannel.CANARY);\n          case BrowserTag.BETA:\n            return await chromeHeadlessShell.resolveBuildId(ChromeReleaseChannel.BETA);\n          case BrowserTag.DEV:\n            return await chromeHeadlessShell.resolveBuildId(ChromeReleaseChannel.DEV);\n          case BrowserTag.STABLE:\n            return await chromeHeadlessShell.resolveBuildId(ChromeReleaseChannel.STABLE);\n          case BrowserTag.NIGHTLY:\n          case BrowserTag.DEVEDITION:\n          case BrowserTag.ESR:\n            throw new Error(`${tag} is not available for chrome-headless-shell`);\n        }\n      }\n    case Browser.CHROMIUM:\n      switch (tag) {\n        case BrowserTag.LATEST:\n          return await chromium.resolveBuildId(platform);\n        case BrowserTag.NIGHTLY:\n        case BrowserTag.CANARY:\n        case BrowserTag.DEV:\n        case BrowserTag.DEVEDITION:\n        case BrowserTag.BETA:\n        case BrowserTag.STABLE:\n        case BrowserTag.ESR:\n          throw new Error(`${tag} is not supported for Chromium. Use 'latest' instead.`);\n      }\n  }\n}\n/**\n * @public\n */\nexport async function resolveBuildId(browser, platform, tag) {\n  const browserTag = tag;\n  if (Object.values(BrowserTag).includes(browserTag)) {\n    return await resolveBuildIdForBrowserTag(browser, platform, browserTag);\n  }\n  switch (browser) {\n    case Browser.FIREFOX:\n      return tag;\n    case Browser.CHROME:\n      const chromeResult = await chrome.resolveBuildId(tag);\n      if (chromeResult) {\n        return chromeResult;\n      }\n      return tag;\n    case Browser.CHROMEDRIVER:\n      const chromeDriverResult = await chromedriver.resolveBuildId(tag);\n      if (chromeDriverResult) {\n        return chromeDriverResult;\n      }\n      return tag;\n    case Browser.CHROMEHEADLESSSHELL:\n      const chromeHeadlessShellResult = await chromeHeadlessShell.resolveBuildId(tag);\n      if (chromeHeadlessShellResult) {\n        return chromeHeadlessShellResult;\n      }\n      return tag;\n    case Browser.CHROMIUM:\n      return tag;\n  }\n}\n/**\n * @public\n */\nexport async function createProfile(browser, opts) {\n  switch (browser) {\n    case Browser.FIREFOX:\n      return await firefox.createProfile(opts);\n    case Browser.CHROME:\n    case Browser.CHROMIUM:\n      throw new Error(`Profile creation is not support for ${browser} yet`);\n  }\n}\n/**\n * @public\n */\nexport function resolveSystemExecutablePath(browser, platform, channel) {\n  switch (browser) {\n    case Browser.CHROMEDRIVER:\n    case Browser.CHROMEHEADLESSSHELL:\n    case Browser.FIREFOX:\n    case Browser.CHROMIUM:\n      throw new Error(`System browser detection is not supported for ${browser} yet.`);\n    case Browser.CHROME:\n      return chrome.resolveSystemExecutablePath(platform, channel);\n  }\n}\n/**\n * Returns a version comparator for the given browser that can be used to sort\n * browser versions.\n *\n * @public\n */\nexport function getVersionComparator(browser) {\n  return versionComparators[browser];\n}","map":{"version":3,"names":["chromeHeadlessShell","chrome","chromedriver","chromium","firefox","Browser","BrowserPlatform","BrowserTag","ChromeReleaseChannel","downloadUrls","CHROMEDRIVER","resolveDownloadUrl","CHROMEHEADLESSSHELL","CHROME","CHROMIUM","FIREFOX","downloadPaths","resolveDownloadPath","executablePathByBrowser","relativeExecutablePath","versionComparators","compareVersions","resolveBuildIdForBrowserTag","browser","platform","tag","LATEST","resolveBuildId","FirefoxChannel","NIGHTLY","BETA","DEVEDITION","STABLE","ESR","CANARY","DEV","Error","toUpperCase","browserTag","Object","values","includes","chromeResult","chromeDriverResult","chromeHeadlessShellResult","createProfile","opts","resolveSystemExecutablePath","channel","getVersionComparator"],"sources":["../../../src/browser-data/browser-data.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}