{"ast":null,"code":"import _classPrivateMethodInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateFieldInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _classPrivateFieldSet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport _classPrivateFieldGet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport _assertClassBrand from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";\n/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { source as injectedSource } from '../generated/injected.js';\n/**\n * @internal\n */\nvar _updated = /*#__PURE__*/new WeakMap();\nvar _amendments = /*#__PURE__*/new WeakMap();\nvar _ScriptInjector_brand = /*#__PURE__*/new WeakSet();\nexport class ScriptInjector {\n  constructor() {\n    _classPrivateMethodInitSpec(this, _ScriptInjector_brand);\n    _classPrivateFieldInitSpec(this, _updated, false);\n    _classPrivateFieldInitSpec(this, _amendments, new Set());\n  }\n  // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n  append(statement) {\n    _assertClassBrand(_ScriptInjector_brand, this, _update).call(this, () => {\n      _classPrivateFieldGet(_amendments, this).add(statement);\n    });\n  }\n  pop(statement) {\n    _assertClassBrand(_ScriptInjector_brand, this, _update).call(this, () => {\n      _classPrivateFieldGet(_amendments, this).delete(statement);\n    });\n  }\n  inject(inject, force = false) {\n    if (_classPrivateFieldGet(_updated, this) || force) {\n      inject(_assertClassBrand(_ScriptInjector_brand, this, _get).call(this));\n    }\n    _classPrivateFieldSet(_updated, this, false);\n  }\n}\n/**\n * @internal\n */\nfunction _update(callback) {\n  callback();\n  _classPrivateFieldSet(_updated, this, true);\n}\nfunction _get() {\n  return `(() => {\n      const module = {};\n      ${injectedSource}\n      ${[..._classPrivateFieldGet(_amendments, this)].map(statement => {\n    return `(${statement})(module.exports.default);`;\n  }).join('')}\n      return module.exports.default;\n    })()`;\n}\nexport const scriptInjector = new ScriptInjector();","map":{"version":3,"names":["source","injectedSource","_updated","WeakMap","_amendments","_ScriptInjector_brand","WeakSet","ScriptInjector","constructor","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","Set","append","statement","_assertClassBrand","_update","call","_classPrivateFieldGet","add","pop","delete","inject","force","_get","_classPrivateFieldSet","callback","map","join","scriptInjector"],"sources":["../../../../src/common/ScriptInjector.ts"],"sourcesContent":[null],"mappings":";;;;;AAAA;;;;;AAKA,SAAQA,MAAM,IAAIC,cAAc,QAAO,0BAA0B;AAEjE;;;AAAA,IAAAC,QAAA,oBAAAC,OAAA;AAAA,IAAAC,WAAA,oBAAAD,OAAA;AAAA,IAAAE,qBAAA,oBAAAC,OAAA;AAGA,OAAM,MAAOC,cAAc;EAAAC,YAAA;IAAAC,2BAAA,OAAAJ,qBAAA;IAAAK,0BAAA,OAAAR,QAAA,EACd,KAAK;IAAAQ,0BAAA,OAAAN,WAAA,EACF,IAAIO,GAAG,EAAU;EAAA;EAE/B;EACAC,MAAMA,CAACC,SAAiB;IACtBC,iBAAA,CAAAT,qBAAA,MAAI,EAAAU,OAAA,EAAAC,IAAA,CAAJ,IAAI,EAAS,MAAK;MAChBC,qBAAA,CAAAb,WAAA,MAAI,EAAac,GAAG,CAACL,SAAS,CAAC;IACjC,CAAC;EACH;EAEAM,GAAGA,CAACN,SAAiB;IACnBC,iBAAA,CAAAT,qBAAA,MAAI,EAAAU,OAAA,EAAAC,IAAA,CAAJ,IAAI,EAAS,MAAK;MAChBC,qBAAA,CAAAb,WAAA,MAAI,EAAagB,MAAM,CAACP,SAAS,CAAC;IACpC,CAAC;EACH;EAEAQ,MAAMA,CAACA,MAAgC,EAAEC,KAAK,GAAG,KAAK;IACpD,IAAIL,qBAAA,CAAAf,QAAA,MAAI,KAAaoB,KAAK,EAAE;MAC1BD,MAAM,CAAAP,iBAAA,CAAAT,qBAAA,EAAC,IAAI,EAAAkB,IAAA,EAAAP,IAAA,CAAJ,IAAI,CAAO,CAAC;IACrB;IACAQ,qBAAA,CAAAtB,QAAA,MAAI,EAAY,KAAK;EACvB;;AAqBF;;;AAAA,SAAAa,QAnBUU,QAAoB;EAC1BA,QAAQ,EAAE;EACVD,qBAAA,CAAAtB,QAAA,MAAI,EAAY,IAAI;AACtB;AAAC,SAAAqB,KAAA,EAEG;EACF,OAAO;;QAEHtB,cAAc;QACd,CAAC,GAAAgB,qBAAA,CAAAb,WAAA,EAAG,IAAI,CAAY,CAAC,CACpBsB,GAAG,CAACb,SAAS,IAAG;IACf,OAAO,IAAIA,SAAS,4BAA4B;EAClD,CAAC,CAAC,CACDc,IAAI,CAAC,EAAE,CAAC;;SAER;AACP;AAMF,OAAO,MAAMC,cAAc,GAAG,IAAIrB,cAAc,EAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}