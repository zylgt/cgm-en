{"ast":null,"code":"\"use strict\";\n\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CdpHTTPRequest = void 0;\nconst HTTPRequest_js_1 = require(\"../api/HTTPRequest.js\");\nconst util_js_1 = require(\"../common/util.js\");\n/**\n * @internal\n */\nvar _client = /*#__PURE__*/new WeakMap();\nvar _isNavigationRequest = /*#__PURE__*/new WeakMap();\nvar _url = /*#__PURE__*/new WeakMap();\nvar _resourceType = /*#__PURE__*/new WeakMap();\nvar _method = /*#__PURE__*/new WeakMap();\nvar _hasPostData = /*#__PURE__*/new WeakMap();\nvar _postData = /*#__PURE__*/new WeakMap();\nvar _headers = /*#__PURE__*/new WeakMap();\nvar _frame = /*#__PURE__*/new WeakMap();\nvar _initiator = /*#__PURE__*/new WeakMap();\nclass CdpHTTPRequest extends HTTPRequest_js_1.HTTPRequest {\n  get client() {\n    return _classPrivateFieldGet(_client, this);\n  }\n  constructor(client, frame, interceptionId, allowInterception, data, redirectChain) {\n    super();\n    _defineProperty(this, \"id\", void 0);\n    _classPrivateFieldInitSpec(this, _client, void 0);\n    _classPrivateFieldInitSpec(this, _isNavigationRequest, void 0);\n    _classPrivateFieldInitSpec(this, _url, void 0);\n    _classPrivateFieldInitSpec(this, _resourceType, void 0);\n    _classPrivateFieldInitSpec(this, _method, void 0);\n    _classPrivateFieldInitSpec(this, _hasPostData, false);\n    _classPrivateFieldInitSpec(this, _postData, void 0);\n    _classPrivateFieldInitSpec(this, _headers, {});\n    _classPrivateFieldInitSpec(this, _frame, void 0);\n    _classPrivateFieldInitSpec(this, _initiator, void 0);\n    _classPrivateFieldSet(_client, this, client);\n    this.id = data.requestId;\n    _classPrivateFieldSet(_isNavigationRequest, this, data.requestId === data.loaderId && data.type === 'Document');\n    this._interceptionId = interceptionId;\n    _classPrivateFieldSet(_url, this, data.request.url);\n    _classPrivateFieldSet(_resourceType, this, (data.type || 'other').toLowerCase());\n    _classPrivateFieldSet(_method, this, data.request.method);\n    _classPrivateFieldSet(_postData, this, data.request.postData);\n    _classPrivateFieldSet(_hasPostData, this, data.request.hasPostData ?? false);\n    _classPrivateFieldSet(_frame, this, frame);\n    this._redirectChain = redirectChain;\n    _classPrivateFieldSet(_initiator, this, data.initiator);\n    this.interception.enabled = allowInterception;\n    for (const [key, value] of Object.entries(data.request.headers)) {\n      _classPrivateFieldGet(_headers, this)[key.toLowerCase()] = value;\n    }\n  }\n  url() {\n    return _classPrivateFieldGet(_url, this);\n  }\n  resourceType() {\n    return _classPrivateFieldGet(_resourceType, this);\n  }\n  method() {\n    return _classPrivateFieldGet(_method, this);\n  }\n  postData() {\n    return _classPrivateFieldGet(_postData, this);\n  }\n  hasPostData() {\n    return _classPrivateFieldGet(_hasPostData, this);\n  }\n  async fetchPostData() {\n    try {\n      const result = await _classPrivateFieldGet(_client, this).send('Network.getRequestPostData', {\n        requestId: this.id\n      });\n      return result.postData;\n    } catch (err) {\n      (0, util_js_1.debugError)(err);\n      return;\n    }\n  }\n  headers() {\n    return _classPrivateFieldGet(_headers, this);\n  }\n  response() {\n    return this._response;\n  }\n  frame() {\n    return _classPrivateFieldGet(_frame, this);\n  }\n  isNavigationRequest() {\n    return _classPrivateFieldGet(_isNavigationRequest, this);\n  }\n  initiator() {\n    return _classPrivateFieldGet(_initiator, this);\n  }\n  redirectChain() {\n    return this._redirectChain.slice();\n  }\n  failure() {\n    if (!this._failureText) {\n      return null;\n    }\n    return {\n      errorText: this._failureText\n    };\n  }\n  /**\n   * @internal\n   */\n  async _continue(overrides = {}) {\n    const {\n      url,\n      method,\n      postData,\n      headers\n    } = overrides;\n    this.interception.handled = true;\n    const postDataBinaryBase64 = postData ? Buffer.from(postData).toString('base64') : undefined;\n    if (this._interceptionId === undefined) {\n      throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.continueRequest');\n    }\n    await _classPrivateFieldGet(_client, this).send('Fetch.continueRequest', {\n      requestId: this._interceptionId,\n      url,\n      method,\n      postData: postDataBinaryBase64,\n      headers: headers ? (0, HTTPRequest_js_1.headersArray)(headers) : undefined\n    }).catch(error => {\n      this.interception.handled = false;\n      return (0, HTTPRequest_js_1.handleError)(error);\n    });\n  }\n  async _respond(response) {\n    this.interception.handled = true;\n    const responseBody = response.body && (0, util_js_1.isString)(response.body) ? Buffer.from(response.body) : response.body || null;\n    const responseHeaders = {};\n    if (response.headers) {\n      for (const header of Object.keys(response.headers)) {\n        const value = response.headers[header];\n        responseHeaders[header.toLowerCase()] = Array.isArray(value) ? value.map(item => {\n          return String(item);\n        }) : String(value);\n      }\n    }\n    if (response.contentType) {\n      responseHeaders['content-type'] = response.contentType;\n    }\n    if (responseBody && !('content-length' in responseHeaders)) {\n      responseHeaders['content-length'] = String(Buffer.byteLength(responseBody));\n    }\n    const status = response.status || 200;\n    if (this._interceptionId === undefined) {\n      throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest');\n    }\n    await _classPrivateFieldGet(_client, this).send('Fetch.fulfillRequest', {\n      requestId: this._interceptionId,\n      responseCode: status,\n      responsePhrase: HTTPRequest_js_1.STATUS_TEXTS[status],\n      responseHeaders: (0, HTTPRequest_js_1.headersArray)(responseHeaders),\n      body: responseBody ? responseBody.toString('base64') : undefined\n    }).catch(error => {\n      this.interception.handled = false;\n      return (0, HTTPRequest_js_1.handleError)(error);\n    });\n  }\n  async _abort(errorReason) {\n    this.interception.handled = true;\n    if (this._interceptionId === undefined) {\n      throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.failRequest');\n    }\n    await _classPrivateFieldGet(_client, this).send('Fetch.failRequest', {\n      requestId: this._interceptionId,\n      errorReason: errorReason || 'Failed'\n    }).catch(HTTPRequest_js_1.handleError);\n  }\n}\nexports.CdpHTTPRequest = CdpHTTPRequest;","map":{"version":3,"names":["HTTPRequest_js_1","require","util_js_1","_client","WeakMap","_isNavigationRequest","_url","_resourceType","_method","_hasPostData","_postData","_headers","_frame","_initiator","CdpHTTPRequest","HTTPRequest","client","_classPrivateFieldGet","constructor","frame","interceptionId","allowInterception","data","redirectChain","_defineProperty","_classPrivateFieldInitSpec","_classPrivateFieldSet","id","requestId","loaderId","type","_interceptionId","request","url","toLowerCase","method","postData","hasPostData","_redirectChain","initiator","interception","enabled","key","value","Object","entries","headers","resourceType","fetchPostData","result","send","err","debugError","response","_response","isNavigationRequest","slice","failure","_failureText","errorText","_continue","overrides","handled","postDataBinaryBase64","Buffer","from","toString","undefined","Error","headersArray","catch","error","handleError","_respond","responseBody","body","isString","responseHeaders","header","keys","Array","isArray","map","item","String","contentType","byteLength","status","responseCode","responsePhrase","STATUS_TEXTS","_abort","errorReason","exports"],"sources":["../../../../src/cdp/HTTPRequest.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}