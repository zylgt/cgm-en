{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CdpBrowser = void 0;\nconst Browser_js_1 = require(\"../api/Browser.js\");\nconst CDPSession_js_1 = require(\"../api/CDPSession.js\");\nconst BrowserContext_js_1 = require(\"./BrowserContext.js\");\nconst ChromeTargetManager_js_1 = require(\"./ChromeTargetManager.js\");\nconst FirefoxTargetManager_js_1 = require(\"./FirefoxTargetManager.js\");\nconst Target_js_1 = require(\"./Target.js\");\n/**\n * @internal\n */\nvar _defaultViewport = /*#__PURE__*/new WeakMap();\nvar _process = /*#__PURE__*/new WeakMap();\nvar _connection = /*#__PURE__*/new WeakMap();\nvar _closeCallback = /*#__PURE__*/new WeakMap();\nvar _targetFilterCallback = /*#__PURE__*/new WeakMap();\nvar _isPageTargetCallback = /*#__PURE__*/new WeakMap();\nvar _defaultContext = /*#__PURE__*/new WeakMap();\nvar _contexts = /*#__PURE__*/new WeakMap();\nvar _targetManager = /*#__PURE__*/new WeakMap();\nvar _emitDisconnected = /*#__PURE__*/new WeakMap();\nvar _CdpBrowser_brand = /*#__PURE__*/new WeakSet();\nvar _createTarget = /*#__PURE__*/new WeakMap();\nvar _onAttachedToTarget = /*#__PURE__*/new WeakMap();\nvar _onDetachedFromTarget = /*#__PURE__*/new WeakMap();\nvar _onTargetChanged = /*#__PURE__*/new WeakMap();\nvar _onTargetDiscovered = /*#__PURE__*/new WeakMap();\nclass CdpBrowser extends Browser_js_1.Browser {\n  static async _create(product, connection, contextIds, ignoreHTTPSErrors, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback, waitForInitiallyDiscoveredTargets = true) {\n    const browser = new CdpBrowser(product, connection, contextIds, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback, waitForInitiallyDiscoveredTargets);\n    if (ignoreHTTPSErrors) {\n      await connection.send('Security.setIgnoreCertificateErrors', {\n        ignore: true\n      });\n    }\n    await browser._attach();\n    return browser;\n  }\n  constructor(product, connection, contextIds, defaultViewport, process, closeCallback, targetFilterCallback, _isPageTargetCallback2, waitForInitiallyDiscoveredTargets = true) {\n    super();\n    _classPrivateMethodInitSpec(this, _CdpBrowser_brand);\n    _defineProperty(this, \"protocol\", 'cdp');\n    _classPrivateFieldInitSpec(this, _defaultViewport, void 0);\n    _classPrivateFieldInitSpec(this, _process, void 0);\n    _classPrivateFieldInitSpec(this, _connection, void 0);\n    _classPrivateFieldInitSpec(this, _closeCallback, void 0);\n    _classPrivateFieldInitSpec(this, _targetFilterCallback, void 0);\n    _classPrivateFieldInitSpec(this, _isPageTargetCallback, void 0);\n    _classPrivateFieldInitSpec(this, _defaultContext, void 0);\n    _classPrivateFieldInitSpec(this, _contexts, new Map());\n    _classPrivateFieldInitSpec(this, _targetManager, void 0);\n    _classPrivateFieldInitSpec(this, _emitDisconnected, () => {\n      this.emit(\"disconnected\" /* BrowserEvent.Disconnected */, undefined);\n    });\n    _classPrivateFieldInitSpec(this, _createTarget, (targetInfo, session) => {\n      const {\n        browserContextId\n      } = targetInfo;\n      const context = browserContextId && _classPrivateFieldGet(_contexts, this).has(browserContextId) ? _classPrivateFieldGet(_contexts, this).get(browserContextId) : _classPrivateFieldGet(_defaultContext, this);\n      if (!context) {\n        throw new Error('Missing browser context');\n      }\n      const createSession = isAutoAttachEmulated => {\n        return _classPrivateFieldGet(_connection, this)._createSession(targetInfo, isAutoAttachEmulated);\n      };\n      const otherTarget = new Target_js_1.OtherTarget(targetInfo, session, context, _classPrivateFieldGet(_targetManager, this), createSession);\n      if (targetInfo.url?.startsWith('devtools://')) {\n        return new Target_js_1.DevToolsTarget(targetInfo, session, context, _classPrivateFieldGet(_targetManager, this), createSession, _classPrivateFieldGet(_defaultViewport, this) ?? null);\n      }\n      if (_classPrivateFieldGet(_isPageTargetCallback, this).call(this, otherTarget)) {\n        return new Target_js_1.PageTarget(targetInfo, session, context, _classPrivateFieldGet(_targetManager, this), createSession, _classPrivateFieldGet(_defaultViewport, this) ?? null);\n      }\n      if (targetInfo.type === 'service_worker' || targetInfo.type === 'shared_worker') {\n        return new Target_js_1.WorkerTarget(targetInfo, session, context, _classPrivateFieldGet(_targetManager, this), createSession);\n      }\n      return otherTarget;\n    });\n    _classPrivateFieldInitSpec(this, _onAttachedToTarget, async target => {\n      if (target._isTargetExposed() && (await target._initializedDeferred.valueOrThrow()) === Target_js_1.InitializationStatus.SUCCESS) {\n        this.emit(\"targetcreated\" /* BrowserEvent.TargetCreated */, target);\n        target.browserContext().emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n      }\n    });\n    _classPrivateFieldInitSpec(this, _onDetachedFromTarget, async target => {\n      target._initializedDeferred.resolve(Target_js_1.InitializationStatus.ABORTED);\n      target._isClosedDeferred.resolve();\n      if (target._isTargetExposed() && (await target._initializedDeferred.valueOrThrow()) === Target_js_1.InitializationStatus.SUCCESS) {\n        this.emit(\"targetdestroyed\" /* BrowserEvent.TargetDestroyed */, target);\n        target.browserContext().emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n      }\n    });\n    _classPrivateFieldInitSpec(this, _onTargetChanged, ({\n      target\n    }) => {\n      this.emit(\"targetchanged\" /* BrowserEvent.TargetChanged */, target);\n      target.browserContext().emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, target);\n    });\n    _classPrivateFieldInitSpec(this, _onTargetDiscovered, targetInfo => {\n      this.emit(\"targetdiscovered\" /* BrowserEvent.TargetDiscovered */, targetInfo);\n    });\n    product = product || 'chrome';\n    _classPrivateFieldSet(_defaultViewport, this, defaultViewport);\n    _classPrivateFieldSet(_process, this, process);\n    _classPrivateFieldSet(_connection, this, connection);\n    _classPrivateFieldSet(_closeCallback, this, closeCallback || (() => {}));\n    _classPrivateFieldSet(_targetFilterCallback, this, targetFilterCallback || (() => {\n      return true;\n    }));\n    _assertClassBrand(_CdpBrowser_brand, this, _setIsPageTargetCallback).call(this, _isPageTargetCallback2);\n    if (product === 'firefox') {\n      _classPrivateFieldSet(_targetManager, this, new FirefoxTargetManager_js_1.FirefoxTargetManager(connection, _classPrivateFieldGet(_createTarget, this), _classPrivateFieldGet(_targetFilterCallback, this)));\n    } else {\n      _classPrivateFieldSet(_targetManager, this, new ChromeTargetManager_js_1.ChromeTargetManager(connection, _classPrivateFieldGet(_createTarget, this), _classPrivateFieldGet(_targetFilterCallback, this), waitForInitiallyDiscoveredTargets));\n    }\n    _classPrivateFieldSet(_defaultContext, this, new BrowserContext_js_1.CdpBrowserContext(_classPrivateFieldGet(_connection, this), this));\n    for (const contextId of contextIds) {\n      _classPrivateFieldGet(_contexts, this).set(contextId, new BrowserContext_js_1.CdpBrowserContext(_classPrivateFieldGet(_connection, this), this, contextId));\n    }\n  }\n  async _attach() {\n    _classPrivateFieldGet(_connection, this).on(CDPSession_js_1.CDPSessionEvent.Disconnected, _classPrivateFieldGet(_emitDisconnected, this));\n    _classPrivateFieldGet(_targetManager, this).on(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, _classPrivateFieldGet(_onAttachedToTarget, this));\n    _classPrivateFieldGet(_targetManager, this).on(\"targetGone\" /* TargetManagerEvent.TargetGone */, _classPrivateFieldGet(_onDetachedFromTarget, this));\n    _classPrivateFieldGet(_targetManager, this).on(\"targetChanged\" /* TargetManagerEvent.TargetChanged */, _classPrivateFieldGet(_onTargetChanged, this));\n    _classPrivateFieldGet(_targetManager, this).on(\"targetDiscovered\" /* TargetManagerEvent.TargetDiscovered */, _classPrivateFieldGet(_onTargetDiscovered, this));\n    await _classPrivateFieldGet(_targetManager, this).initialize();\n  }\n  _detach() {\n    _classPrivateFieldGet(_connection, this).off(CDPSession_js_1.CDPSessionEvent.Disconnected, _classPrivateFieldGet(_emitDisconnected, this));\n    _classPrivateFieldGet(_targetManager, this).off(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, _classPrivateFieldGet(_onAttachedToTarget, this));\n    _classPrivateFieldGet(_targetManager, this).off(\"targetGone\" /* TargetManagerEvent.TargetGone */, _classPrivateFieldGet(_onDetachedFromTarget, this));\n    _classPrivateFieldGet(_targetManager, this).off(\"targetChanged\" /* TargetManagerEvent.TargetChanged */, _classPrivateFieldGet(_onTargetChanged, this));\n    _classPrivateFieldGet(_targetManager, this).off(\"targetDiscovered\" /* TargetManagerEvent.TargetDiscovered */, _classPrivateFieldGet(_onTargetDiscovered, this));\n  }\n  process() {\n    return _classPrivateFieldGet(_process, this) ?? null;\n  }\n  _targetManager() {\n    return _classPrivateFieldGet(_targetManager, this);\n  }\n  _getIsPageTargetCallback() {\n    return _classPrivateFieldGet(_isPageTargetCallback, this);\n  }\n  async createBrowserContext(options = {}) {\n    const {\n      proxyServer,\n      proxyBypassList\n    } = options;\n    const {\n      browserContextId\n    } = await _classPrivateFieldGet(_connection, this).send('Target.createBrowserContext', {\n      proxyServer,\n      proxyBypassList: proxyBypassList && proxyBypassList.join(',')\n    });\n    const context = new BrowserContext_js_1.CdpBrowserContext(_classPrivateFieldGet(_connection, this), this, browserContextId);\n    _classPrivateFieldGet(_contexts, this).set(browserContextId, context);\n    return context;\n  }\n  browserContexts() {\n    return [_classPrivateFieldGet(_defaultContext, this), ...Array.from(_classPrivateFieldGet(_contexts, this).values())];\n  }\n  defaultBrowserContext() {\n    return _classPrivateFieldGet(_defaultContext, this);\n  }\n  async _disposeContext(contextId) {\n    if (!contextId) {\n      return;\n    }\n    await _classPrivateFieldGet(_connection, this).send('Target.disposeBrowserContext', {\n      browserContextId: contextId\n    });\n    _classPrivateFieldGet(_contexts, this).delete(contextId);\n  }\n  wsEndpoint() {\n    return _classPrivateFieldGet(_connection, this).url();\n  }\n  async newPage() {\n    return await _classPrivateFieldGet(_defaultContext, this).newPage();\n  }\n  async _createPageInContext(contextId) {\n    const {\n      targetId\n    } = await _classPrivateFieldGet(_connection, this).send('Target.createTarget', {\n      url: 'about:blank',\n      browserContextId: contextId || undefined\n    });\n    const target = await this.waitForTarget(t => {\n      return t._targetId === targetId;\n    });\n    if (!target) {\n      throw new Error(`Missing target for page (id = ${targetId})`);\n    }\n    const initialized = (await target._initializedDeferred.valueOrThrow()) === Target_js_1.InitializationStatus.SUCCESS;\n    if (!initialized) {\n      throw new Error(`Failed to create target for page (id = ${targetId})`);\n    }\n    const page = await target.page();\n    if (!page) {\n      throw new Error(`Failed to create a page for context (id = ${contextId})`);\n    }\n    return page;\n  }\n  targets() {\n    return Array.from(_classPrivateFieldGet(_targetManager, this).getAvailableTargets().values()).filter(target => {\n      return target._isTargetExposed() && target._initializedDeferred.value() === Target_js_1.InitializationStatus.SUCCESS;\n    });\n  }\n  target() {\n    const browserTarget = this.targets().find(target => {\n      return target.type() === 'browser';\n    });\n    if (!browserTarget) {\n      throw new Error('Browser target is not found');\n    }\n    return browserTarget;\n  }\n  async version() {\n    const version = await _assertClassBrand(_CdpBrowser_brand, this, _getVersion).call(this);\n    return version.product;\n  }\n  async userAgent() {\n    const version = await _assertClassBrand(_CdpBrowser_brand, this, _getVersion).call(this);\n    return version.userAgent;\n  }\n  async close() {\n    await _classPrivateFieldGet(_closeCallback, this).call(null);\n    await this.disconnect();\n  }\n  disconnect() {\n    _classPrivateFieldGet(_targetManager, this).dispose();\n    _classPrivateFieldGet(_connection, this).dispose();\n    this._detach();\n    return Promise.resolve();\n  }\n  get connected() {\n    return !_classPrivateFieldGet(_connection, this)._closed;\n  }\n  get debugInfo() {\n    return {\n      pendingProtocolErrors: _classPrivateFieldGet(_connection, this).getPendingProtocolErrors()\n    };\n  }\n}\nfunction _setIsPageTargetCallback(isPageTargetCallback) {\n  _classPrivateFieldSet(_isPageTargetCallback, this, isPageTargetCallback || (target => {\n    return target.type() === 'page' || target.type() === 'background_page' || target.type() === 'webview';\n  }));\n}\nfunction _getVersion() {\n  return _classPrivateFieldGet(_connection, this).send('Browser.getVersion');\n}\nexports.CdpBrowser = CdpBrowser;","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_classPrivateFieldInitSpec","_defineProperty","_classPrivateFieldGet","_assertClassBrand","_classPrivateFieldSet","Browser_js_1","CDPSession_js_1","BrowserContext_js_1","ChromeTargetManager_js_1","FirefoxTargetManager_js_1","Target_js_1","_defaultViewport","WeakMap","_process","_connection","_closeCallback","_targetFilterCallback","_isPageTargetCallback","_defaultContext","_contexts","_targetManager","_emitDisconnected","_CdpBrowser_brand","WeakSet","_createTarget","_onAttachedToTarget","_onDetachedFromTarget","_onTargetChanged","_onTargetDiscovered","CdpBrowser","Browser","_create","product","connection","contextIds","ignoreHTTPSErrors","defaultViewport","process","closeCallback","targetFilterCallback","isPageTargetCallback","waitForInitiallyDiscoveredTargets","browser","send","ignore","_attach","constructor","Map","emit","undefined","targetInfo","session","browserContextId","context","has","get","Error","createSession","isAutoAttachEmulated","_createSession","otherTarget","OtherTarget","url","startsWith","DevToolsTarget","call","PageTarget","type","WorkerTarget","target","_isTargetExposed","_initializedDeferred","valueOrThrow","InitializationStatus","SUCCESS","browserContext","resolve","ABORTED","_isClosedDeferred","_setIsPageTargetCallback","FirefoxTargetManager","ChromeTargetManager","CdpBrowserContext","contextId","set","on","CDPSessionEvent","Disconnected","initialize","_detach","off","_getIsPageTargetCallback","createBrowserContext","options","proxyServer","proxyBypassList","join","browserContexts","Array","from","values","defaultBrowserContext","_disposeContext","delete","wsEndpoint","newPage","_createPageInContext","targetId","waitForTarget","t","_targetId","initialized","page","targets","getAvailableTargets","filter","value","browserTarget","find","version","_getVersion","userAgent","close","disconnect","dispose","Promise","connected","_closed","debugInfo","pendingProtocolErrors","getPendingProtocolErrors","exports"],"sources":["../../../../src/cdp/Browser.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}