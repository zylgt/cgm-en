{"ast":null,"code":"import Socket from '@/utils/webSocket';\n\n// 处理数据\nexport function handelMessage(res) {\n  switch (res.path) {\n    case 'getAppInfo':\n      //  判断是否有更新，没有更新进行下一步\n      Socket.getReaderList();\n      break;\n    case 'getReaderDevices':\n      //获取redaer列表，如果只有一台直接连接，否则选取连接\n      this.$store.dispatch('setDeviceList', res.data.devices);\n      this.$store.dispatch('setUpStep', 3);\n      if (res.data.devices.length == 1) {\n        this.$store.dispatch('setReaderConnect', 0);\n        Socket.connectReader(res.data.devices[0]);\n      }\n      break;\n    case 'connectReaderDevice':\n      //连接reader\n      console.log('连接成功');\n      this.$store.dispatch('setReaderConnect', 1);\n      Socket.getReaderInfo();\n      break;\n    case 'getReaderDeviceInfo':\n      //连接reader\n      console.log('获取reader信息成功');\n      // 判断reader时间与当前时间差值为1000，则同步时间\n      let timestamp = Math.floor(Date.now() / 1000);\n      if (Math.abs(timestamp - res.data.currentTime) >= 1000) {\n        Socket.setTime({\n          zone: +8,\n          timestamp: timestamp\n        });\n      }\n      break;\n  }\n}","map":{"version":3,"names":["Socket","handelMessage","res","path","getReaderList","$store","dispatch","data","devices","length","connectReader","console","log","getReaderInfo","timestamp","Math","floor","Date","now","abs","currentTime","setTime","zone"],"sources":["/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/src/utils/socketMessage.js"],"sourcesContent":["import Socket from '@/utils/webSocket'\n\n// 处理数据\nexport function handelMessage (res) {\n    switch(res.path){\n        case 'getAppInfo':\n            //  判断是否有更新，没有更新进行下一步\n            Socket.getReaderList()\n            break;\n        case 'getReaderDevices': //获取redaer列表，如果只有一台直接连接，否则选取连接\n            this.$store.dispatch('setDeviceList',res.data.devices)\n            this.$store.dispatch('setUpStep',3)\n            if(res.data.devices.length==1){\n                this.$store.dispatch('setReaderConnect',0)\n                Socket.connectReader(res.data.devices[0])\n            }\n            break;\n        case 'connectReaderDevice': //连接reader\n            console.log('连接成功')\n            this.$store.dispatch('setReaderConnect',1)\n            Socket.getReaderInfo()\n            break;\n        case 'getReaderDeviceInfo': //连接reader\n            console.log('获取reader信息成功')\n            // 判断reader时间与当前时间差值为1000，则同步时间\n            let timestamp = Math.floor(Date.now() / 1000)\n            if( Math.abs(timestamp-res.data.currentTime)>=1000){\n                Socket.setTime({zone:+8,timestamp:timestamp})\n            }\n            break;\n    }\n}"],"mappings":"AAAA,OAAOA,MAAM,MAAM,mBAAmB;;AAEtC;AACA,OAAO,SAASC,aAAaA,CAAEC,GAAG,EAAE;EAChC,QAAOA,GAAG,CAACC,IAAI;IACX,KAAK,YAAY;MACb;MACAH,MAAM,CAACI,aAAa,CAAC,CAAC;MACtB;IACJ,KAAK,kBAAkB;MAAE;MACrB,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,eAAe,EAACJ,GAAG,CAACK,IAAI,CAACC,OAAO,CAAC;MACtD,IAAI,CAACH,MAAM,CAACC,QAAQ,CAAC,WAAW,EAAC,CAAC,CAAC;MACnC,IAAGJ,GAAG,CAACK,IAAI,CAACC,OAAO,CAACC,MAAM,IAAE,CAAC,EAAC;QAC1B,IAAI,CAACJ,MAAM,CAACC,QAAQ,CAAC,kBAAkB,EAAC,CAAC,CAAC;QAC1CN,MAAM,CAACU,aAAa,CAACR,GAAG,CAACK,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;MAC7C;MACA;IACJ,KAAK,qBAAqB;MAAE;MACxBG,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnB,IAAI,CAACP,MAAM,CAACC,QAAQ,CAAC,kBAAkB,EAAC,CAAC,CAAC;MAC1CN,MAAM,CAACa,aAAa,CAAC,CAAC;MACtB;IACJ,KAAK,qBAAqB;MAAE;MACxBF,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC3B;MACA,IAAIE,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;MAC7C,IAAIH,IAAI,CAACI,GAAG,CAACL,SAAS,GAACZ,GAAG,CAACK,IAAI,CAACa,WAAW,CAAC,IAAE,IAAI,EAAC;QAC/CpB,MAAM,CAACqB,OAAO,CAAC;UAACC,IAAI,EAAC,CAAC,CAAC;UAACR,SAAS,EAACA;QAAS,CAAC,CAAC;MACjD;MACA;EACR;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}