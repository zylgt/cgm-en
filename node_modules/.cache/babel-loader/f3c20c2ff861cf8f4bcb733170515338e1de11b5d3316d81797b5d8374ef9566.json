{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _checkInRHS = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/checkInRHS.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _classPrivateGetter = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateGetter.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __setFunctionName = this && this.__setFunctionName || function (f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", {\n    configurable: true,\n    value: prefix ? \"\".concat(prefix, \" \", name) : name\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiFrame = void 0;\nconst Bidi = __importStar(require(\"chromium-bidi/lib/cjs/protocol/protocol.js\"));\nconst rxjs_js_1 = require(\"../../third_party/rxjs/rxjs.js\");\nconst Frame_js_1 = require(\"../api/Frame.js\");\nconst ConsoleMessage_js_1 = require(\"../common/ConsoleMessage.js\");\nconst Errors_js_1 = require(\"../common/Errors.js\");\nconst util_js_1 = require(\"../common/util.js\");\nconst ErrorLike_js_1 = require(\"../util/ErrorLike.js\");\nconst CDPSession_js_1 = require(\"./CDPSession.js\");\nconst Deserializer_js_1 = require(\"./Deserializer.js\");\nconst Dialog_js_1 = require(\"./Dialog.js\");\nconst ExposedFunction_js_1 = require(\"./ExposedFunction.js\");\nconst HTTPRequest_js_1 = require(\"./HTTPRequest.js\");\nconst JSHandle_js_1 = require(\"./JSHandle.js\");\nconst Realm_js_1 = require(\"./Realm.js\");\nconst util_js_2 = require(\"./util.js\");\nconst WebWorker_js_1 = require(\"./WebWorker.js\");\nlet BidiFrame = ((_BidiFrame, _parent, _frames, _BidiFrame_brand, _exposedFunctions) => {\n  var _a;\n  let _classSuper = Frame_js_1.Frame;\n  let _instanceExtraInitializers = [];\n  let _goto_decorators;\n  let _setContent_decorators;\n  let _waitForNavigation_decorators;\n  let _private_waitForLoad$_decorators;\n  let _private_waitForLoad$_descriptor;\n  let _private_waitForNetworkIdle$_decorators;\n  let _private_waitForNetworkIdle$_descriptor;\n  let _setFiles_decorators;\n  let _locateNodes_decorators;\n  return _parent = /*#__PURE__*/new WeakMap(), _frames = /*#__PURE__*/new WeakMap(), _BidiFrame_brand = /*#__PURE__*/new WeakSet(), _exposedFunctions = /*#__PURE__*/new WeakMap(), (_BidiFrame = class BidiFrame extends _classSuper {\n    static from(parent, browsingContext) {\n      const frame = new BidiFrame(parent, browsingContext);\n      _assertClassBrand(_BidiFrame_brand, frame, _initialize).call(frame);\n      return frame;\n    }\n    constructor(parent, _browsingContext) {\n      super();\n      _classPrivateMethodInitSpec(this, _BidiFrame_brand);\n      _classPrivateFieldInitSpec(this, _parent, (__runInitializers(this, _instanceExtraInitializers), void 0));\n      _defineProperty(this, \"browsingContext\", void 0);\n      _classPrivateFieldInitSpec(this, _frames, new WeakMap());\n      _defineProperty(this, \"realms\", void 0);\n      _defineProperty(this, \"_id\", void 0);\n      _defineProperty(this, \"client\", void 0);\n      _classPrivateFieldInitSpec(this, _exposedFunctions, new Map());\n      _classPrivateFieldSet(_parent, this, parent);\n      this.browsingContext = _browsingContext;\n      this._id = _browsingContext.id;\n      this.client = new CDPSession_js_1.BidiCdpSession(this);\n      this.realms = {\n        default: Realm_js_1.BidiFrameRealm.from(this.browsingContext.defaultRealm, this),\n        internal: Realm_js_1.BidiFrameRealm.from(this.browsingContext.createWindowRealm(`__puppeteer_internal_${Math.ceil(Math.random() * 10000)}`), this)\n      };\n    }\n    get timeoutSettings() {\n      return this.page()._timeoutSettings;\n    }\n    mainRealm() {\n      return this.realms.default;\n    }\n    isolatedRealm() {\n      return this.realms.internal;\n    }\n    realm(id) {\n      for (const realm of Object.values(this.realms)) {\n        if (realm.realm.id === id) {\n          return realm;\n        }\n      }\n      return;\n    }\n    page() {\n      let parent = _classPrivateFieldGet(_parent, this);\n      while (parent instanceof BidiFrame) {\n        parent = _classPrivateFieldGet(_parent, parent);\n      }\n      return parent;\n    }\n    isOOPFrame() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    url() {\n      return this.browsingContext.url;\n    }\n    parentFrame() {\n      if (_classPrivateFieldGet(_parent, this) instanceof BidiFrame) {\n        return _classPrivateFieldGet(_parent, this);\n      }\n      return null;\n    }\n    childFrames() {\n      return [...this.browsingContext.children].map(child => {\n        return _classPrivateFieldGet(_frames, this).get(child);\n      });\n    }\n    async goto(url, options = {}) {\n      const [response] = await Promise.all([this.waitForNavigation(options),\n      // Some implementations currently only report errors when the\n      // readiness=interactive.\n      //\n      // Related: https://bugzilla.mozilla.org/show_bug.cgi?id=1846601\n      this.browsingContext.navigate(url, \"interactive\" /* Bidi.BrowsingContext.ReadinessState.Interactive */).catch(error => {\n        if ((0, ErrorLike_js_1.isErrorLike)(error) && error.message.includes('net::ERR_HTTP_RESPONSE_CODE_FAILURE')) {\n          return;\n        }\n        throw error;\n      })]).catch((0, util_js_2.rewriteNavigationError)(url, options.timeout ?? this.timeoutSettings.navigationTimeout()));\n      return response;\n    }\n    async setContent(html, options = {}) {\n      await Promise.all([this.setFrameContent(html), (0, rxjs_js_1.firstValueFrom)((0, rxjs_js_1.combineLatest)([_classPrivateGetter(_BidiFrame_brand, this, _get_waitForLoad$).call(this, options), _classPrivateGetter(_BidiFrame_brand, this, _get_waitForNetworkIdle$).call(this, options)]))]);\n    }\n    async waitForNavigation(options = {}) {\n      const {\n        timeout: ms = this.timeoutSettings.navigationTimeout()\n      } = options;\n      const frames = this.childFrames().map(frame => {\n        return _assertClassBrand(_BidiFrame_brand, frame, _detached$).call(frame);\n      });\n      return await (0, rxjs_js_1.firstValueFrom)((0, rxjs_js_1.combineLatest)([(0, util_js_1.fromEmitterEvent)(this.browsingContext, 'navigation').pipe((0, rxjs_js_1.switchMap)(({\n        navigation\n      }) => {\n        return _classPrivateGetter(_BidiFrame_brand, this, _get_waitForLoad$).call(this, options).pipe((0, rxjs_js_1.delayWhen)(() => {\n          if (frames.length === 0) {\n            return (0, rxjs_js_1.of)(undefined);\n          }\n          return (0, rxjs_js_1.combineLatest)(frames);\n        }), (0, rxjs_js_1.raceWith)((0, util_js_1.fromEmitterEvent)(navigation, 'fragment'), (0, util_js_1.fromEmitterEvent)(navigation, 'failed'), (0, util_js_1.fromEmitterEvent)(navigation, 'aborted').pipe((0, rxjs_js_1.map)(({\n          url\n        }) => {\n          throw new Error(`Navigation aborted: ${url}`);\n        }))), (0, rxjs_js_1.switchMap)(() => {\n          if (navigation.request) {\n            function requestFinished$(request) {\n              // Reduces flakiness if the response events arrive after\n              // the load event.\n              // Usually, the response or error is already there at this point.\n              if (request.response || request.error) {\n                return (0, rxjs_js_1.of)(navigation);\n              }\n              if (request.redirect) {\n                return requestFinished$(request.redirect);\n              }\n              return (0, util_js_1.fromEmitterEvent)(request, 'success').pipe((0, rxjs_js_1.raceWith)((0, util_js_1.fromEmitterEvent)(request, 'error')), (0, rxjs_js_1.raceWith)((0, util_js_1.fromEmitterEvent)(request, 'redirect'))).pipe((0, rxjs_js_1.switchMap)(() => {\n                return requestFinished$(request);\n              }));\n            }\n            return requestFinished$(navigation.request);\n          }\n          return (0, rxjs_js_1.of)(navigation);\n        }));\n      })), _classPrivateGetter(_BidiFrame_brand, this, _get_waitForNetworkIdle$).call(this, options)]).pipe((0, rxjs_js_1.map)(([navigation]) => {\n        const request = navigation.request;\n        if (!request) {\n          return null;\n        }\n        const lastRequest = request.lastRedirect ?? request;\n        const httpRequest = HTTPRequest_js_1.requests.get(lastRequest);\n        return httpRequest.response();\n      }), (0, rxjs_js_1.raceWith)((0, util_js_1.timeout)(ms), _assertClassBrand(_BidiFrame_brand, this, _detached$).call(this).pipe((0, rxjs_js_1.map)(() => {\n        throw new Errors_js_1.TargetCloseError('Frame detached.');\n      })))));\n    }\n    waitForDevicePrompt() {\n      throw new Errors_js_1.UnsupportedOperation();\n    }\n    get detached() {\n      return this.browsingContext.closed;\n    }\n    async exposeFunction(name, apply) {\n      if (_classPrivateFieldGet(_exposedFunctions, this).has(name)) {\n        throw new Error(`Failed to add page binding with name ${name}: globalThis['${name}'] already exists!`);\n      }\n      const exposeable = await ExposedFunction_js_1.ExposeableFunction.from(this, name, apply);\n      _classPrivateFieldGet(_exposedFunctions, this).set(name, exposeable);\n    }\n    async removeExposedFunction(name) {\n      const exposedFunction = _classPrivateFieldGet(_exposedFunctions, this).get(name);\n      if (!exposedFunction) {\n        throw new Error(`Failed to remove page binding with name ${name}: window['${name}'] does not exists!`);\n      }\n      _classPrivateFieldGet(_exposedFunctions, this).delete(name);\n      await exposedFunction[Symbol.asyncDispose]();\n    }\n    async createCDPSession() {\n      const {\n        sessionId\n      } = await this.client.send('Target.attachToTarget', {\n        targetId: this._id,\n        flatten: true\n      });\n      await this.browsingContext.subscribe([Bidi.ChromiumBidi.BiDiModule.Cdp]);\n      return new CDPSession_js_1.BidiCdpSession(this, sessionId);\n    }\n    async setFiles(element, files) {\n      await this.browsingContext.setFiles(\n      // SAFETY: ElementHandles are always remote references.\n      element.remoteValue(), files);\n    }\n    async locateNodes(element, locator) {\n      return await this.browsingContext.locateNodes(locator,\n      // SAFETY: ElementHandles are always remote references.\n      [element.remoteValue()]);\n    }\n  }, (() => {\n    const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n    _goto_decorators = [Frame_js_1.throwIfDetached];\n    _setContent_decorators = [Frame_js_1.throwIfDetached];\n    _waitForNavigation_decorators = [Frame_js_1.throwIfDetached];\n    _private_waitForLoad$_decorators = [Frame_js_1.throwIfDetached];\n    _private_waitForNetworkIdle$_decorators = [Frame_js_1.throwIfDetached];\n    _setFiles_decorators = [Frame_js_1.throwIfDetached];\n    _locateNodes_decorators = [Frame_js_1.throwIfDetached];\n    __esDecorate(_BidiFrame, null, _goto_decorators, {\n      kind: \"method\",\n      name: \"goto\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"goto\" in obj,\n        get: obj => obj.goto\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_BidiFrame, null, _setContent_decorators, {\n      kind: \"method\",\n      name: \"setContent\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"setContent\" in obj,\n        get: obj => obj.setContent\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_BidiFrame, null, _waitForNavigation_decorators, {\n      kind: \"method\",\n      name: \"waitForNavigation\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"waitForNavigation\" in obj,\n        get: obj => obj.waitForNavigation\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_BidiFrame, _private_waitForLoad$_descriptor = {\n      value: __setFunctionName(function (options = {}) {\n        let {\n          waitUntil = 'load'\n        } = options;\n        const {\n          timeout: ms = this.timeoutSettings.navigationTimeout()\n        } = options;\n        if (!Array.isArray(waitUntil)) {\n          waitUntil = [waitUntil];\n        }\n        const events = new Set();\n        for (const lifecycleEvent of waitUntil) {\n          switch (lifecycleEvent) {\n            case 'load':\n              {\n                events.add('load');\n                break;\n              }\n            case 'domcontentloaded':\n              {\n                events.add('DOMContentLoaded');\n                break;\n              }\n          }\n        }\n        if (events.size === 0) {\n          return (0, rxjs_js_1.of)(undefined);\n        }\n        return (0, rxjs_js_1.combineLatest)([...events].map(event => {\n          return (0, util_js_1.fromEmitterEvent)(this.browsingContext, event);\n        })).pipe((0, rxjs_js_1.map)(() => {}), (0, rxjs_js_1.first)(), (0, rxjs_js_1.raceWith)((0, util_js_1.timeout)(ms), _assertClassBrand(_BidiFrame_brand, this, _detached$).call(this).pipe((0, rxjs_js_1.map)(() => {\n          throw new Error('Frame detached.');\n        }))));\n      }, \"#waitForLoad$\")\n    }, _private_waitForLoad$_decorators, {\n      kind: \"method\",\n      name: \"#waitForLoad$\",\n      static: false,\n      private: true,\n      access: {\n        has: obj => _BidiFrame_brand.has(_checkInRHS(obj)),\n        get: obj => _classPrivateGetter(_BidiFrame_brand, obj, _get_waitForLoad$)\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_BidiFrame, _private_waitForNetworkIdle$_descriptor = {\n      value: __setFunctionName(function (options = {}) {\n        let {\n          waitUntil = 'load'\n        } = options;\n        if (!Array.isArray(waitUntil)) {\n          waitUntil = [waitUntil];\n        }\n        let concurrency = Infinity;\n        for (const event of waitUntil) {\n          switch (event) {\n            case 'networkidle0':\n              {\n                concurrency = Math.min(0, concurrency);\n                break;\n              }\n            case 'networkidle2':\n              {\n                concurrency = Math.min(2, concurrency);\n                break;\n              }\n          }\n        }\n        if (concurrency === Infinity) {\n          return (0, rxjs_js_1.of)(undefined);\n        }\n        return this.page().waitForNetworkIdle$({\n          idleTime: 500,\n          timeout: options.timeout ?? this.timeoutSettings.timeout(),\n          concurrency\n        });\n      }, \"#waitForNetworkIdle$\")\n    }, _private_waitForNetworkIdle$_decorators, {\n      kind: \"method\",\n      name: \"#waitForNetworkIdle$\",\n      static: false,\n      private: true,\n      access: {\n        has: obj => _BidiFrame_brand.has(_checkInRHS(obj)),\n        get: obj => _classPrivateGetter(_BidiFrame_brand, obj, _get_waitForNetworkIdle$)\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_BidiFrame, null, _setFiles_decorators, {\n      kind: \"method\",\n      name: \"setFiles\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"setFiles\" in obj,\n        get: obj => obj.setFiles\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_BidiFrame, null, _locateNodes_decorators, {\n      kind: \"method\",\n      name: \"locateNodes\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"locateNodes\" in obj,\n        get: obj => obj.locateNodes\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    if (_metadata) Object.defineProperty(_BidiFrame, Symbol.metadata, {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _metadata\n    });\n  })(), _BidiFrame);\n  function _initialize() {\n    for (const browsingContext of this.browsingContext.children) {\n      _assertClassBrand(_BidiFrame_brand, this, _createFrameTarget).call(this, browsingContext);\n    }\n    this.browsingContext.on('browsingcontext', ({\n      browsingContext\n    }) => {\n      _assertClassBrand(_BidiFrame_brand, this, _createFrameTarget).call(this, browsingContext);\n    });\n    this.browsingContext.on('closed', () => {\n      for (const session of CDPSession_js_1.BidiCdpSession.sessions.values()) {\n        if (session.frame === this) {\n          session.onClose();\n        }\n      }\n      this.page().trustedEmitter.emit(\"framedetached\" /* PageEvent.FrameDetached */, this);\n    });\n    this.browsingContext.on('request', ({\n      request\n    }) => {\n      const httpRequest = HTTPRequest_js_1.BidiHTTPRequest.from(request, this);\n      request.once('success', () => {\n        this.page().trustedEmitter.emit(\"requestfinished\" /* PageEvent.RequestFinished */, httpRequest);\n      });\n      request.once('error', () => {\n        this.page().trustedEmitter.emit(\"requestfailed\" /* PageEvent.RequestFailed */, httpRequest);\n      });\n      void httpRequest.finalizeInterceptions();\n    });\n    this.browsingContext.on('navigation', ({\n      navigation\n    }) => {\n      navigation.once('fragment', () => {\n        this.page().trustedEmitter.emit(\"framenavigated\" /* PageEvent.FrameNavigated */, this);\n      });\n    });\n    this.browsingContext.on('load', () => {\n      this.page().trustedEmitter.emit(\"load\" /* PageEvent.Load */, undefined);\n    });\n    this.browsingContext.on('DOMContentLoaded', () => {\n      this._hasStartedLoading = true;\n      this.page().trustedEmitter.emit(\"domcontentloaded\" /* PageEvent.DOMContentLoaded */, undefined);\n      this.page().trustedEmitter.emit(\"framenavigated\" /* PageEvent.FrameNavigated */, this);\n    });\n    this.browsingContext.on('userprompt', ({\n      userPrompt\n    }) => {\n      this.page().trustedEmitter.emit(\"dialog\" /* PageEvent.Dialog */, Dialog_js_1.BidiDialog.from(userPrompt));\n    });\n    this.browsingContext.on('log', ({\n      entry\n    }) => {\n      if (this._id !== entry.source.context) {\n        return;\n      }\n      if (isConsoleLogEntry(entry)) {\n        const args = entry.args.map(arg => {\n          return this.mainRealm().createHandle(arg);\n        });\n        const text = args.reduce((value, arg) => {\n          const parsedValue = arg instanceof JSHandle_js_1.BidiJSHandle && arg.isPrimitiveValue ? Deserializer_js_1.BidiDeserializer.deserialize(arg.remoteValue()) : arg.toString();\n          return `${value} ${parsedValue}`;\n        }, '').slice(1);\n        this.page().trustedEmitter.emit(\"console\" /* PageEvent.Console */, new ConsoleMessage_js_1.ConsoleMessage(entry.method, text, args, getStackTraceLocations(entry.stackTrace)));\n      } else if (isJavaScriptLogEntry(entry)) {\n        const error = new Error(entry.text ?? '');\n        const messageHeight = error.message.split('\\n').length;\n        const messageLines = error.stack.split('\\n').splice(0, messageHeight);\n        const stackLines = [];\n        if (entry.stackTrace) {\n          for (const frame of entry.stackTrace.callFrames) {\n            // Note we need to add `1` because the values are 0-indexed.\n            stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber + 1}:${frame.columnNumber + 1})`);\n            if (stackLines.length >= Error.stackTraceLimit) {\n              break;\n            }\n          }\n        }\n        error.stack = [...messageLines, ...stackLines].join('\\n');\n        this.page().trustedEmitter.emit(\"pageerror\" /* PageEvent.PageError */, error);\n      } else {\n        (0, util_js_1.debugError)(`Unhandled LogEntry with type \"${entry.type}\", text \"${entry.text}\" and level \"${entry.level}\"`);\n      }\n    });\n    this.browsingContext.on('worker', ({\n      realm\n    }) => {\n      const worker = WebWorker_js_1.BidiWebWorker.from(this, realm);\n      realm.on('destroyed', () => {\n        this.page().trustedEmitter.emit(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker);\n      });\n      this.page().trustedEmitter.emit(\"workercreated\" /* PageEvent.WorkerCreated */, worker);\n    });\n  }\n  function _createFrameTarget(browsingContext) {\n    const frame = _BidiFrame.from(this, browsingContext);\n    _classPrivateFieldGet(_frames, this).set(browsingContext, frame);\n    this.page().trustedEmitter.emit(\"frameattached\" /* PageEvent.FrameAttached */, frame);\n    browsingContext.on('closed', () => {\n      _classPrivateFieldGet(_frames, this).delete(browsingContext);\n    });\n    return frame;\n  }\n  function _detached$() {\n    return (0, rxjs_js_1.defer)(() => {\n      if (this.detached) {\n        return (0, rxjs_js_1.of)(this);\n      }\n      return (0, util_js_1.fromEmitterEvent)(this.page().trustedEmitter, \"framedetached\" /* PageEvent.FrameDetached */).pipe((0, rxjs_js_1.filter)(detachedFrame => {\n        return detachedFrame === this;\n      }));\n    });\n  }\n  function _get_waitForLoad$(_this) {\n    return _private_waitForLoad$_descriptor.value;\n  }\n  function _get_waitForNetworkIdle$(_this2) {\n    return _private_waitForNetworkIdle$_descriptor.value;\n  }\n})();\nexports.BidiFrame = BidiFrame;\nfunction isConsoleLogEntry(event) {\n  return event.type === 'console';\n}\nfunction isJavaScriptLogEntry(event) {\n  return event.type === 'javascript';\n}\nfunction getStackTraceLocations(stackTrace) {\n  const stackTraceLocations = [];\n  if (stackTrace) {\n    for (const callFrame of stackTrace.callFrames) {\n      stackTraceLocations.push({\n        url: callFrame.url,\n        lineNumber: callFrame.lineNumber,\n        columnNumber: callFrame.columnNumber\n      });\n    }\n  }\n  return stackTraceLocations;\n}","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_defineProperty","_classPrivateFieldInitSpec","_checkInRHS","_classPrivateFieldGet","_classPrivateFieldSet","_classPrivateGetter","_assertClassBrand","Bidi","__importStar","rxjs_js_1","Frame_js_1","ConsoleMessage_js_1","Errors_js_1","util_js_1","ErrorLike_js_1","CDPSession_js_1","Deserializer_js_1","Dialog_js_1","ExposedFunction_js_1","HTTPRequest_js_1","JSHandle_js_1","Realm_js_1","util_js_2","WebWorker_js_1","BidiFrame","_BidiFrame","_parent","_frames","_BidiFrame_brand","_exposedFunctions","Frame","_classSuper","from","parent","browsingContext","frame","_initialize","call","constructor","__runInitializers","_instanceExtraInitializers","WeakMap","Map","_id","id","client","BidiCdpSession","realms","BidiFrameRealm","defaultRealm","internal","createWindowRealm","Math","ceil","random","timeoutSettings","page","_timeoutSettings","mainRealm","isolatedRealm","realm","Object","values","isOOPFrame","UnsupportedOperation","url","parentFrame","childFrames","children","map","child","get","goto","options","response","Promise","all","waitForNavigation","navigate","catch","error","isErrorLike","message","includes","rewriteNavigationError","timeout","navigationTimeout","setContent","html","setFrameContent","firstValueFrom","combineLatest","_get_waitForLoad$","_get_waitForNetworkIdle$","ms","frames","_detached$","fromEmitterEvent","pipe","switchMap","navigation","delayWhen","length","of","undefined","raceWith","Error","request","requestFinished$","redirect","lastRequest","lastRedirect","httpRequest","requests","TargetCloseError","waitForDevicePrompt","detached","closed","exposeFunction","name","apply","has","exposeable","ExposeableFunction","set","removeExposedFunction","exposedFunction","delete","Symbol","asyncDispose","createCDPSession","sessionId","send","targetId","flatten","subscribe","ChromiumBidi","BiDiModule","Cdp","setFiles","element","files","remoteValue","locateNodes","locator","throwIfDetached","__esDecorate","_goto_decorators","kind","static","private","access","obj","metadata","_metadata","_setContent_decorators","_waitForNavigation_decorators","_private_waitForLoad$_descriptor","value","__setFunctionName","waitUntil","Array","isArray","events","Set","lifecycleEvent","add","size","event","first","_private_waitForLoad$_decorators","_private_waitForNetworkIdle$_descriptor","concurrency","Infinity","min","waitForNetworkIdle$","idleTime","_private_waitForNetworkIdle$_decorators","_setFiles_decorators","_locateNodes_decorators","_createFrameTarget","on","session","sessions","onClose","trustedEmitter","emit","BidiHTTPRequest","once","finalizeInterceptions","_hasStartedLoading","userPrompt","BidiDialog","entry","source","context","isConsoleLogEntry","args","arg","createHandle","text","reduce","parsedValue","BidiJSHandle","isPrimitiveValue","BidiDeserializer","deserialize","toString","slice","ConsoleMessage","method","getStackTraceLocations","stackTrace","isJavaScriptLogEntry","messageHeight","split","messageLines","stack","splice","stackLines","callFrames","push","functionName","lineNumber","columnNumber","stackTraceLimit","join","debugError","type","level","worker","BidiWebWorker","defer","filter","detachedFrame","_this","_this2","exports","stackTraceLocations","callFrame"],"sources":["../../../../src/bidi/Frame.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}