{"ast":null,"code":"import { create, typeList } from '@/api/api';\nexport default {\n  data() {\n    return {\n      formData: {\n        order: '',\n        item_name: '',\n        config_key: 'diabetes_type'\n      },\n      formRules: {\n        order: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请填写顺序号\"\n        }],\n        item_name: [{\n          required: true,\n          trigger: \"blur\",\n          message: \" 请填写配置项名称\"\n        }]\n      },\n      loading: false,\n      //添加配置项loading\n      listLoading: false,\n      list: '',\n      addType: false,\n      //弹窗是否显示\n      dialogTitle: '' //弹窗标题\n    };\n  },\n  created() {\n    this.getInfos();\n  },\n  methods: {\n    // 根据配置key获取配置详情\n    getInfos() {\n      this.listLoading = true;\n      typeList({\n        config_key: \"diabetes_type\"\n      }).then(response => {\n        console.log(response);\n        this.listLoading = false;\n        if (response.code == 1000) {\n          this.list = response.data;\n        } else {\n          this.$message({\n            type: 'error',\n            message: response.msg\n          });\n        }\n      }).catch(res => {\n        this.$message({\n          type: 'error',\n          message: res.message\n        });\n      });\n    },\n    // 添加配置项\n    addTypes() {\n      this.$refs.formData.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          create(this.formData).then(response => {\n            this.loading = false;\n            console.log(response);\n            if (response.code == 1000) {} else {\n              this.$message({\n                type: 'error',\n                message: response.msg\n              });\n            }\n          }).catch(res => {\n            this.$message({\n              type: 'error',\n              message: res.message\n            });\n          });\n        }\n      });\n    },\n    // 修改弹窗\n    edit() {\n      this.addType = true;\n      this.dialogTitle = '修改配置项';\n    }\n  }\n};","map":{"version":3,"names":["create","typeList","data","formData","order","item_name","config_key","formRules","required","trigger","message","loading","listLoading","list","addType","dialogTitle","created","getInfos","methods","then","response","console","log","code","$message","type","msg","catch","res","addTypes","$refs","validate","valid","edit"],"sources":["src/views/TypeOfdiabetes.vue"],"sourcesContent":["<template>\n    <div>\n        <!-- 查询和其他操作 -->\n        <div class=\"filter-container\">\n          <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-plus\" @click='addType = true , dialogTitle=\"添加配置项\"' >新增</el-button>\n        </div>\n        <!-- 查询结果 -->\n        <el-table v-loading=\"listLoading\" :data=\"list\" header-row-class-name='headerBg' element-loading-text=\"正在查询中。。。\" border fit highlight-current-row  >\n            <el-table-column align=\"center\" label=\"主键\" >\n                <template  slot-scope=\"scope\">\n                    {{scope.row.item_key}}\n                </template>\n            </el-table-column>\n            <el-table-column align=\"center\" label=\"序号\" prop=\"order\"/>\n            <el-table-column align=\"center\" label=\"内容\" prop=\"item_name\"/>\n\n            <el-table-column align=\"center\" label=\"创建时间\" prop=\"phone\"/>\n\n            <el-table-column align=\"center\" label=\"更新时间\" prop=\"city\"/>\n            <el-table-column align=\"center\" label=\"操作\" >\n                <template  >\n                    <div class='flex table-handel'>\n                        <el-button type=\"text\"  style='margin:0;' class=\"text-info\" @click='edit' >修改</el-button>\n                    </div>\n                </template>\n            </el-table-column>\n        </el-table>\n        <!-- 弹窗 -->\n        <el-dialog :visible.sync=\"addType\" :title=\"dialogTitle\" border width=\"50%\">\n            <el-form ref=\"formData\"  label-width=\"120px\" label-position=\"right\" :model=\"formData\" :rules='formRules'>\n               \n                <el-form-item label=\"顺序号\"  prop=\"order\">\n                    <el-input v-model=\"formData.order\" />\n                </el-form-item>\n                 <el-form-item label=\"配置项名称\"  prop=\"item_name\">\n                    <el-input v-model=\"formData.item_name\" />\n                </el-form-item>\n                <div class='flex record-btn'  >\n                    <el-button :loading=\"loading\" type=\"primary\" @click=\"addTypes\">确认</el-button>\n                    <el-button  @click=\"addType = false\">取消</el-button>\n                </div>\n            </el-form>\n        </el-dialog>\n    </div>\n</template>\n<script>\nimport {create,typeList} from '@/api/api'\nexport default {\n    data(){\n        return{\n            formData:{\n                order:'',\n                item_name:'',\n                config_key:'diabetes_type'\n            },\n            formRules:{\n                order: [{ required: true, trigger: \"blur\", message: \"请填写顺序号\" }],\n                item_name: [{ required: true, trigger: \"blur\", message: \" 请填写配置项名称\" }]\n            },\n            loading:false, //添加配置项loading\n            listLoading:false,\n            list:'',\n            addType:false,  //弹窗是否显示\n            dialogTitle:'', //弹窗标题\n        }\n    },\n    created(){\n        this.getInfos()\n    },\n\n    methods:{\n        // 根据配置key获取配置详情\n        getInfos(){\n            this.listLoading = true\n            typeList({config_key:\"diabetes_type\"}).then(response => {\n                    console.log(response)\n                    this.listLoading = false\n                    if(response.code == 1000){\n                        this.list = response.data\n                    }else{\n                        this.$message({\n                            type: 'error',\n                            message: response.msg\n                        });\n                    }\n            }).catch((res) => {\n                    this.$message({\n                        type: 'error',\n                        message: res.message\n                    });\n            })\n        },\n        // 添加配置项\n        addTypes(){\n               this.$refs.formData.validate((valid) => {\n                    if(valid){\n                        this.loading = true\n                        create(this.formData).then(response => {\n                            this.loading=false\n                            console.log(response)\n\t\t\t\t\t\t\tif(response.code == 1000){\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message({\n                                    type: 'error',\n                                    message: response.msg\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((res) => {\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: res.message\n\t\t\t\t\t\t\t});\n\t\t\t\t\t})\n                    }\n               })\n        },\n        // 修改弹窗\n        edit(){\n            this.addType = true\n            this.dialogTitle = '修改配置项'\n        }\n    }\n}\n</script>\n<style scoped>\n    .filter-container{\n        margin-bottom:20px;\n    }\n    .record-btn{\n        display: flex;\n        justify-content: flex-end;\n    }\n</style>"],"mappings":"AA8CA,SAAAA,MAAA,EAAAC,QAAA;AACA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,KAAA;QACAC,SAAA;QACAC,UAAA;MACA;MACAC,SAAA;QACAH,KAAA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAL,SAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAC,OAAA;MAAA;MACAC,WAAA;MACAC,IAAA;MACAC,OAAA;MAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA;EACA;EAEAC,OAAA;IACA;IACAD,SAAA;MACA,KAAAL,WAAA;MACAX,QAAA;QAAAK,UAAA;MAAA,GAAAa,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,QAAA;QACA,KAAAR,WAAA;QACA,IAAAQ,QAAA,CAAAG,IAAA;UACA,KAAAV,IAAA,GAAAO,QAAA,CAAAlB,IAAA;QACA;UACA,KAAAsB,QAAA;YACAC,IAAA;YACAf,OAAA,EAAAU,QAAA,CAAAM;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAJ,QAAA;UACAC,IAAA;UACAf,OAAA,EAAAkB,GAAA,CAAAlB;QACA;MACA;IACA;IACA;IACAmB,SAAA;MACA,KAAAC,KAAA,CAAA3B,QAAA,CAAA4B,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAArB,OAAA;UACAX,MAAA,MAAAG,QAAA,EAAAgB,IAAA,CAAAC,QAAA;YACA,KAAAT,OAAA;YACAU,OAAA,CAAAC,GAAA,CAAAF,QAAA;YACA,IAAAA,QAAA,CAAAG,IAAA,WAEA;cACA,KAAAC,QAAA;gBACAC,IAAA;gBACAf,OAAA,EAAAU,QAAA,CAAAM;cACA;YACA;UACA,GAAAC,KAAA,CAAAC,GAAA;YACA,KAAAJ,QAAA;cACAC,IAAA;cACAf,OAAA,EAAAkB,GAAA,CAAAlB;YACA;UACA;QACA;MACA;IACA;IACA;IACAuB,KAAA;MACA,KAAAnB,OAAA;MACA,KAAAC,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}