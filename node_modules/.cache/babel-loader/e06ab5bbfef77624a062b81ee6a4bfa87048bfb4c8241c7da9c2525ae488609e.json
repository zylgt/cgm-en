{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _defineProperty = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = void 0;\nconst EventEmitter_js_1 = require(\"../../common/EventEmitter.js\");\nconst decorators_js_1 = require(\"../../util/decorators.js\");\nconst disposable_js_1 = require(\"../../util/disposable.js\");\nconst Realm_js_1 = require(\"./Realm.js\");\nconst UserContext_js_1 = require(\"./UserContext.js\");\n/**\n * @internal\n */\nlet Browser = ((_ref, _Browser, _closed, _reason, _disposables, _userContexts, _sharedWorkers, _Browser_brand) => {\n  let _classSuper = EventEmitter_js_1.EventEmitter;\n  let _instanceExtraInitializers = [];\n  let _dispose_decorators;\n  let _close_decorators;\n  let _addPreloadScript_decorators;\n  let _removeIntercept_decorators;\n  let _removePreloadScript_decorators;\n  let _createUserContext_decorators;\n  return _closed = /*#__PURE__*/new WeakMap(), _reason = /*#__PURE__*/new WeakMap(), _disposables = /*#__PURE__*/new WeakMap(), _userContexts = /*#__PURE__*/new WeakMap(), _sharedWorkers = /*#__PURE__*/new WeakMap(), _Browser_brand = /*#__PURE__*/new WeakSet(), _ref = (_dispose_decorators = [decorators_js_1.inertIfDisposed], _close_decorators = [(0, decorators_js_1.throwIfDisposed)(browser => {\n    // SAFETY: By definition of `disposed`, `#reason` is defined.\n    return _classPrivateFieldGet(_reason, browser);\n  })], _addPreloadScript_decorators = [(0, decorators_js_1.throwIfDisposed)(browser => {\n    // SAFETY: By definition of `disposed`, `#reason` is defined.\n    return _classPrivateFieldGet(_reason, browser);\n  })], _removeIntercept_decorators = [(0, decorators_js_1.throwIfDisposed)(browser => {\n    // SAFETY: By definition of `disposed`, `#reason` is defined.\n    return _classPrivateFieldGet(_reason, browser);\n  })], _removePreloadScript_decorators = [(0, decorators_js_1.throwIfDisposed)(browser => {\n    // SAFETY: By definition of `disposed`, `#reason` is defined.\n    return _classPrivateFieldGet(_reason, browser);\n  })], _createUserContext_decorators = [(0, decorators_js_1.throwIfDisposed)(browser => {\n    // SAFETY: By definition of `disposed`, `#reason` is defined.\n    return _classPrivateFieldGet(_reason, browser);\n  })], disposable_js_1.disposeSymbol), (_Browser = class Browser extends _classSuper {\n    static async from(session) {\n      const browser = new Browser(session);\n      await _assertClassBrand(_Browser_brand, browser, _initialize).call(browser);\n      return browser;\n    }\n    constructor(session) {\n      super();\n      _classPrivateMethodInitSpec(this, _Browser_brand);\n      _classPrivateFieldInitSpec(this, _closed, (__runInitializers(this, _instanceExtraInitializers), false));\n      _classPrivateFieldInitSpec(this, _reason, void 0);\n      _classPrivateFieldInitSpec(this, _disposables, new disposable_js_1.DisposableStack());\n      _classPrivateFieldInitSpec(this, _userContexts, new Map());\n      _defineProperty(this, \"session\", void 0);\n      _classPrivateFieldInitSpec(this, _sharedWorkers, new Map());\n      this.session = session;\n    }\n    get closed() {\n      return _classPrivateFieldGet(_closed, this);\n    }\n    get defaultUserContext() {\n      // SAFETY: A UserContext is always created for the default context.\n      return _classPrivateFieldGet(_userContexts, this).get(UserContext_js_1.UserContext.DEFAULT);\n    }\n    get disconnected() {\n      return _classPrivateFieldGet(_reason, this) !== undefined;\n    }\n    get disposed() {\n      return this.disconnected;\n    }\n    get userContexts() {\n      return _classPrivateFieldGet(_userContexts, this).values();\n    }\n    dispose(reason, closed = false) {\n      _classPrivateFieldSet(_closed, this, closed);\n      _classPrivateFieldSet(_reason, this, reason);\n      this[disposable_js_1.disposeSymbol]();\n    }\n    async close() {\n      try {\n        await this.session.send('browser.close', {});\n      } finally {\n        this.dispose('Browser already closed.', true);\n      }\n    }\n    async addPreloadScript(functionDeclaration, options = {}) {\n      const {\n        result: {\n          script\n        }\n      } = await this.session.send('script.addPreloadScript', {\n        functionDeclaration,\n        ...options,\n        contexts: options.contexts?.map(context => {\n          return context.id;\n        })\n      });\n      return script;\n    }\n    async removeIntercept(intercept) {\n      await this.session.send('network.removeIntercept', {\n        intercept\n      });\n    }\n    async removePreloadScript(script) {\n      await this.session.send('script.removePreloadScript', {\n        script\n      });\n    }\n    async createUserContext() {\n      const {\n        result: {\n          userContext: context\n        }\n      } = await this.session.send('browser.createUserContext', {});\n      return _assertClassBrand(_Browser_brand, this, _createUserContext).call(this, context);\n    }\n    [_ref]() {\n      _classPrivateFieldGet(_reason, this) ?? _classPrivateFieldSet(_reason, this, 'Browser was disconnected, probably because the session ended.');\n      if (this.closed) {\n        this.emit('closed', {\n          reason: _classPrivateFieldGet(_reason, this)\n        });\n      }\n      this.emit('disconnected', {\n        reason: _classPrivateFieldGet(_reason, this)\n      });\n      _classPrivateFieldGet(_disposables, this).dispose();\n      super[disposable_js_1.disposeSymbol]();\n    }\n  }, (() => {\n    const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n    __esDecorate(_Browser, null, _dispose_decorators, {\n      kind: \"method\",\n      name: \"dispose\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"dispose\" in obj,\n        get: obj => obj.dispose\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_Browser, null, _close_decorators, {\n      kind: \"method\",\n      name: \"close\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"close\" in obj,\n        get: obj => obj.close\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_Browser, null, _addPreloadScript_decorators, {\n      kind: \"method\",\n      name: \"addPreloadScript\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"addPreloadScript\" in obj,\n        get: obj => obj.addPreloadScript\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_Browser, null, _removeIntercept_decorators, {\n      kind: \"method\",\n      name: \"removeIntercept\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"removeIntercept\" in obj,\n        get: obj => obj.removeIntercept\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_Browser, null, _removePreloadScript_decorators, {\n      kind: \"method\",\n      name: \"removePreloadScript\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"removePreloadScript\" in obj,\n        get: obj => obj.removePreloadScript\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    __esDecorate(_Browser, null, _createUserContext_decorators, {\n      kind: \"method\",\n      name: \"createUserContext\",\n      static: false,\n      private: false,\n      access: {\n        has: obj => \"createUserContext\" in obj,\n        get: obj => obj.createUserContext\n      },\n      metadata: _metadata\n    }, null, _instanceExtraInitializers);\n    if (_metadata) Object.defineProperty(_Browser, Symbol.metadata, {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _metadata\n    });\n  })(), _Browser);\n  async function _initialize() {\n    const sessionEmitter = _classPrivateFieldGet(_disposables, this).use(new EventEmitter_js_1.EventEmitter(this.session));\n    sessionEmitter.once('ended', ({\n      reason\n    }) => {\n      this.dispose(reason);\n    });\n    sessionEmitter.on('script.realmCreated', info => {\n      if (info.type !== 'shared-worker') {\n        return;\n      }\n      _classPrivateFieldGet(_sharedWorkers, this).set(info.realm, Realm_js_1.SharedWorkerRealm.from(this, info.realm, info.origin));\n    });\n    await _assertClassBrand(_Browser_brand, this, _syncUserContexts).call(this);\n    await _assertClassBrand(_Browser_brand, this, _syncBrowsingContexts).call(this);\n  }\n  async function _syncUserContexts() {\n    const {\n      result: {\n        userContexts\n      }\n    } = await this.session.send('browser.getUserContexts', {});\n    for (const context of userContexts) {\n      _assertClassBrand(_Browser_brand, this, _createUserContext).call(this, context.userContext);\n    }\n  }\n  async function _syncBrowsingContexts() {\n    // In case contexts are created or destroyed during `getTree`, we use this\n    // set to detect them.\n    const contextIds = new Set();\n    let contexts;\n    {\n      const env_1 = {\n        stack: [],\n        error: void 0,\n        hasError: false\n      };\n      try {\n        const sessionEmitter = __addDisposableResource(env_1, new EventEmitter_js_1.EventEmitter(this.session), false);\n        sessionEmitter.on('browsingContext.contextCreated', info => {\n          contextIds.add(info.context);\n        });\n        const {\n          result\n        } = await this.session.send('browsingContext.getTree', {});\n        contexts = result.contexts;\n      } catch (e_1) {\n        env_1.error = e_1;\n        env_1.hasError = true;\n      } finally {\n        __disposeResources(env_1);\n      }\n    }\n    // Simulating events so contexts are created naturally.\n    for (const info of contexts) {\n      if (!contextIds.has(info.context)) {\n        this.session.emit('browsingContext.contextCreated', info);\n      }\n      if (info.children) {\n        contexts.push(...info.children);\n      }\n    }\n  }\n  function _createUserContext(id) {\n    const userContext = UserContext_js_1.UserContext.create(this, id);\n    _classPrivateFieldGet(_userContexts, this).set(userContext.id, userContext);\n    const userContextEmitter = _classPrivateFieldGet(_disposables, this).use(new EventEmitter_js_1.EventEmitter(userContext));\n    userContextEmitter.once('closed', () => {\n      userContextEmitter.removeAllListeners();\n      _classPrivateFieldGet(_userContexts, this).delete(userContext.id);\n    });\n    return userContext;\n  }\n})();\nexports.Browser = Browser;","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_defineProperty","_classPrivateFieldInitSpec","_classPrivateFieldSet","_classPrivateFieldGet","_assertClassBrand","EventEmitter_js_1","decorators_js_1","disposable_js_1","Realm_js_1","UserContext_js_1","Browser","_ref","_Browser","_closed","_reason","_disposables","_userContexts","_sharedWorkers","_Browser_brand","EventEmitter","_dispose_decorators","inertIfDisposed","_close_decorators","throwIfDisposed","browser","_addPreloadScript_decorators","_removeIntercept_decorators","_removePreloadScript_decorators","_createUserContext_decorators","disposeSymbol","_classSuper","from","session","_initialize","call","constructor","__runInitializers","_instanceExtraInitializers","DisposableStack","Map","closed","defaultUserContext","get","UserContext","DEFAULT","disconnected","undefined","disposed","userContexts","values","dispose","reason","close","send","addPreloadScript","functionDeclaration","options","result","script","contexts","map","context","id","removeIntercept","intercept","removePreloadScript","createUserContext","userContext","_createUserContext","emit","__esDecorate","kind","name","static","private","access","has","obj","metadata","_metadata","sessionEmitter","use","once","on","info","type","set","realm","SharedWorkerRealm","origin","_syncUserContexts","_syncBrowsingContexts","contextIds","Set","__addDisposableResource","env_1","add","children","push","create","userContextEmitter","removeAllListeners","delete","exports"],"sources":["../../../../../src/bidi/core/Browser.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}