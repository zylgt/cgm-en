{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookies from 'js-cookie';\nimport { removeToken } from '@/utils/auth';\nimport { changepassword } from '@/api/api';\nexport default {\n  data() {\n    return {\n      language: Cookies.get('language') ? Cookies.get('language') : navigator.language,\n      menu: '',\n      name: Cookies.get(\"username\") ? Cookies.get(\"username\").charAt(0) : '游',\n      loading: false,\n      changeDialog: false,\n      formData: {\n        password: '',\n        new_password: ''\n      },\n      formRules: {\n        password: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入原始密码\"\n        }],\n        new_password: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入新密码\"\n        }]\n      }\n    };\n  },\n  created() {\n    this.menu = this.$router.options.routes[1].children;\n  },\n  methods: {\n    userCommand(command) {\n      if (command == 'signout') {\n        this.$message({\n          type: 'success',\n          message: '退出成功'\n        });\n        this.$router.push('/login');\n        removeToken();\n      } else {\n        this.changeDialog = true;\n      }\n    },\n    languageCommand(commoand) {\n      this.language = commoand;\n      if (commoand == 'en') {\n        this.$i18n.locale = 'en';\n        Cookies.set('language', 'en');\n      } else {\n        this.$i18n.locale = 'zh-cn';\n        Cookies.set('language', 'zh-cn');\n      }\n    },\n    // 修改密码\n    changePassword() {\n      this.$refs.formData.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          changepassword({\n            new_password: this.$md5(this.formData.new_password),\n            password: this.$md5(this.formData.password)\n          }).then(response => {\n            this.loading = false;\n            if (response.code == 1000) {\n              this.$message({\n                type: 'success',\n                message: '修改成功'\n              });\n              this.$router.push('/login');\n            } else {\n              this.$message({\n                type: 'error',\n                message: response.msg\n              });\n            }\n          }).catch(res => {\n            this.$message({\n              type: 'error',\n              message: res.message\n            });\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["Cookies","removeToken","changepassword","data","language","get","navigator","menu","name","charAt","loading","changeDialog","formData","password","new_password","formRules","required","trigger","message","created","$router","options","routes","children","methods","userCommand","command","$message","type","push","languageCommand","commoand","$i18n","locale","set","changePassword","$refs","validate","valid","$md5","then","response","code","msg","catch","res"],"sources":["src/views/layout/layout.vue"],"sourcesContent":["<template>\n    <el-container class='layout'>\n        <el-header class='header'>\n            <div class='header-title' >{{ $t(\"message.themeTitle\") }}</div>\n            <div class='header-other '>\n                <!-- <div class='language' >\n                    <el-dropdown  @command=\"languageCommand\" >\n                        <span class=\"el-dropdown-link\">\n                            {{language=='en'?'English':'中文'}}<i class=\"el-icon-arrow-down el-icon--right\"></i>\n                        </span>\n                        <el-dropdown-menu slot=\"dropdown\">\n                            <el-dropdown-item command=\"zh-cn\">中文</el-dropdown-item>\n                            <el-dropdown-item command=\"en\">English</el-dropdown-item>\n                        </el-dropdown-menu>\n                    </el-dropdown>\n                </div> -->\n                <div class='header-user' >\n                    <el-dropdown  @command=\"userCommand\" >\n                        <div class='user-info' >\n                            <!-- <img src=\"~@/assets/image/avatar.png\" class=\"avatars\"> -->\n                            <el-avatar size='medium'>{{name}} </el-avatar>\n                            <i class=\"el-icon-more\"></i>\n                        </div>\n                        <el-dropdown-menu slot=\"dropdown\">\n                            <el-dropdown-item command=\"change\">{{$t(\"message.changePassword\")}}</el-dropdown-item>\n                            <el-dropdown-item command=\"signout\">{{$t(\"message.logout\")}}</el-dropdown-item>\n                        </el-dropdown-menu>\n                    </el-dropdown>\n                </div>\n            </div>\n        </el-header>\n        <el-container>\n            <el-aside class='menu' width='280px;' >\n                <el-menu style=\"min-height: 100%;\" theme=\"dark\" router :default-active=\"$route.path\">\n                        <el-menu-item v-for=\"item in menu\" :key='item.name'  :index='item.path'  >\n                            <i :class=\"item.meta.icon\"></i>\n                            {{$t('message.route.'+item.meta.title)}}\n                        </el-menu-item>\n                </el-menu>\n            </el-aside>\n            <el-main class='main' >\n                <el-card class='box-card' >\n                    <router-view></router-view>\n                </el-card>\n            </el-main>\n        </el-container>\n         <!-- 弹窗 -->\n        <el-dialog :visible.sync=\"changeDialog\" title=\"修改密码\" border width=\"50%\">\n            <el-form ref=\"formData\"  label-width=\"120px\" label-position=\"right\" :model=\"formData\" :rules='formRules' >\n               \n                <el-form-item label=\"旧密码\"  prop=\"password\">\n                    <el-input v-model=\"formData.password\" />\n                </el-form-item>\n                 <el-form-item label=\"新密码\"  prop=\"new_password\">\n                    <el-input v-model=\"formData.new_password\" />\n                </el-form-item>\n                <div class='flex record-btn'  >\n                    <el-button :loading=\"loading\" type=\"primary\" @click=\"changePassword\">确认</el-button>\n                    <el-button  @click=\"changeDialog = false\">取消</el-button>\n                </div>\n            </el-form>\n        </el-dialog>\n    </el-container>\n</template>\n<script>\nimport Cookies from 'js-cookie'\nimport {removeToken} from '@/utils/auth'\nimport {changepassword} from '@/api/api'\nexport default {\n    data(){\n        return{\n            language: Cookies.get('language')?Cookies.get('language'):navigator.language,\n            menu:'',\n            name: Cookies.get(\"username\")?Cookies.get(\"username\").charAt(0):'游',\n            loading:false,\n            changeDialog:false,\n            formData:{\n                password:'',\n                new_password:''\n            },\n            formRules:{\n                password: [{ required: true, trigger: \"blur\", message: \"请输入原始密码\" }],\n                new_password: [{ required: true, trigger: \"blur\", message: \"请输入新密码\" }],\n            }\n        }\n    },\n    created(){\n        this.menu = this.$router.options.routes[1].children\n    },\n    methods:{\n        userCommand(command){\n            if(command=='signout'){\n                this.$message({\n                    type: 'success',\n                    message: '退出成功'\n                });\n                this.$router.push('/login');\n                removeToken()\n            }else{\n                this.changeDialog = true\n            }\n            \n        },\n        languageCommand(commoand){\n             this.language=commoand\n            if(commoand=='en'){\n                this.$i18n.locale='en'\n                Cookies.set('language','en')\n            }else{\n                this.$i18n.locale='zh-cn'\n                Cookies.set('language','zh-cn')\n            }\n        },\n        // 修改密码\n        changePassword(){\n            this.$refs.formData.validate((valid) => {\n                if(valid){\n                    this.loading = true\n                    changepassword({new_password:this.$md5(this.formData.new_password),password:this.$md5(this.formData.password)}).then(response => {\n                            this.loading=false\n\t\t\t\t\t\t\tif(response.code == 1000){\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\tmessage: '修改成功',\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.$message({\n                                    type: 'error',\n                                    message: response.msg\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((res) => {\n\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: res.message\n\t\t\t\t\t\t\t});\n\t\t\t\t\t})\n                }\n            })\n        }\n    },\n\n    \n}\n</script>\n<style  scoped>\n    .layout{\n        height:100%;\n    }\n    .header{\n        height:84px;\n        display: flex;\n        align-items: center;\n    }\n    .header-title{\n        font-size:18px;\n        color:#409EFF;\n        line-height: 60px;\n        width:230px;\n        font-weight: 800;\n    }\n    .header-other{\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n        height:100%;\n        flex-grow: 1;\n    }\n    .language{\n        width:140px;\n        position: relative;\n    }\n    .el-dropdown-link{\n        font-size:16px;\n    }\n    .header-user{\n        width:140px;\n        height: 30px;\n        position: relative;\n    }\n    .user-info{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .avatars{\n        width:30px;\n        height:30px;\n        border-radius:50%;\n        display: block;\n    }\n    .el-avatar{\n        font-size: 24px;\n    }\n    .contain{\n        width:100%;\n        display: flex;\n        flex-grow: 1;\n    }\n    .menu{\n        width:280px;\n        box-shadow:2px 0 6px rgba(0,21,41,.01);\n        \n    }\n    .el-menu{\n        border-right:1px solid #eee;\n    }\n    .main{\n        background:#f0f0f0;\n    }\n    .record-btn{\n        display: flex;\n        justify-content: flex-end;\n    }\n</style>"],"mappings":";AAiEA,OAAAA,OAAA;AACA,SAAAC,WAAA;AACA,SAAAC,cAAA;AACA;EACAC,KAAA;IACA;MACAC,QAAA,EAAAJ,OAAA,CAAAK,GAAA,eAAAL,OAAA,CAAAK,GAAA,eAAAC,SAAA,CAAAF,QAAA;MACAG,IAAA;MACAC,IAAA,EAAAR,OAAA,CAAAK,GAAA,eAAAL,OAAA,CAAAK,GAAA,aAAAI,MAAA;MACAC,OAAA;MACAC,YAAA;MACAC,QAAA;QACAC,QAAA;QACAC,YAAA;MACA;MACAC,SAAA;QACAF,QAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,YAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAZ,IAAA,QAAAa,OAAA,CAAAC,OAAA,CAAAC,MAAA,IAAAC,QAAA;EACA;EACAC,OAAA;IACAC,YAAAC,OAAA;MACA,IAAAA,OAAA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAV,OAAA;QACA;QACA,KAAAE,OAAA,CAAAS,IAAA;QACA5B,WAAA;MACA;QACA,KAAAU,YAAA;MACA;IAEA;IACAmB,gBAAAC,QAAA;MACA,KAAA3B,QAAA,GAAA2B,QAAA;MACA,IAAAA,QAAA;QACA,KAAAC,KAAA,CAAAC,MAAA;QACAjC,OAAA,CAAAkC,GAAA;MACA;QACA,KAAAF,KAAA,CAAAC,MAAA;QACAjC,OAAA,CAAAkC,GAAA;MACA;IACA;IACA;IACAC,eAAA;MACA,KAAAC,KAAA,CAAAxB,QAAA,CAAAyB,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAA5B,OAAA;UACAR,cAAA;YAAAY,YAAA,OAAAyB,IAAA,MAAA3B,QAAA,CAAAE,YAAA;YAAAD,QAAA,OAAA0B,IAAA,MAAA3B,QAAA,CAAAC,QAAA;UAAA,GAAA2B,IAAA,CAAAC,QAAA;YACA,KAAA/B,OAAA;YACA,IAAA+B,QAAA,CAAAC,IAAA;cACA,KAAAf,QAAA;gBACAC,IAAA;gBACAV,OAAA;cACA;cACA,KAAAE,OAAA,CAAAS,IAAA;YACA;cACA,KAAAF,QAAA;gBACAC,IAAA;gBACAV,OAAA,EAAAuB,QAAA,CAAAE;cACA;YACA;UACA,GAAAC,KAAA,CAAAC,GAAA;YACA,KAAAlB,QAAA;cACAC,IAAA;cACAV,OAAA,EAAA2B,GAAA,CAAA3B;YACA;UACA;QACA;MACA;IACA;EACA;AAGA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}