{"ast":null,"code":"import axios from 'axios';\nimport { Message, MessageBox, Notification } from 'element-ui';\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8';\n// 创建axios实例\nconst request = axios.create({\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\n  baseURL: process.env['VUE_APP_API_ROOT'],\n  // 超时\n  timeout: 60000\n});\n// request拦截器\nrequest.interceptors.request.use(config => {\n  console.log(config);\n}, error => {\n  console.log(error);\n  Promise.reject(error);\n});\n\n// 响应拦截器\nrequest.interceptors.response.use(async res => {\n  console.log(res);\n  // 未设置状态码则默认成功状态\n  // const code = res.data.code || 200\n  // // 获取错误信息\n  // const msg = errorCode[code] || res.data.msg || errorCode['default']\n  // if (code === 401) {\n  //   MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\n  //       confirmButtonText: '重新登录',\n  //       cancelButtonText: '取消',\n  //       type: 'warning'\n  //     }\n  //   ).then(() => {\n  //     store.dispatch('LogOut').then(() => {\n  //       location.href = '/login'\n  //     })\n  //   }).catch(() => {\n  //   })\n  // } else if (code === 500) {\n  //   Message({\n  //     message: msg,\n  //     type: 'error'\n  //   })\n  //   return Promise.reject(new Error(msg))\n  // } else if (code === 416) {\n  //   // 需要滑动验证\n  //   let result = {}\n  //   await Verification().then(async value => {\n  //     if (!res.config.params) {\n  //       res.config.params = {}\n  //     }\n  //     res.config.params.slideCode = value\n  //     if (res.config.data) {\n  //       res.config.data = JSON.parse(res.config.data)\n  //     }\n  //     result = await request.request(res.config)\n  //   }, error => {\n  //     console.log(error)\n  //     return Promise.reject('error')\n  //   })\n  //   return Promise.resolve(result)\n  // } else if (code !== 200) {\n  //   Notification.error({\n  //     title: msg\n  //   })\n  //   return Promise.reject('error')\n  // } else {\n  //   return res.data\n  // }\n}, error => {\n  console.log('err' + error);\n  let {\n    message\n  } = error;\n  if (message == 'Network Error') {\n    message = '后端接口连接异常';\n  } else if (message.includes('timeout')) {\n    message = '系统接口请求超时';\n  } else if (message.includes('Request failed with status code')) {\n    message = '系统接口' + message.substr(message.length - 3) + '异常';\n  }\n  Message({\n    message: message,\n    type: 'error',\n    duration: 5 * 1000\n  });\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["axios","Message","MessageBox","Notification","defaults","headers","request","create","baseURL","process","env","timeout","interceptors","use","config","console","log","error","Promise","reject","response","res","message","includes","substr","length","type","duration"],"sources":["/Users/hexuemin/Desktop/jiuan/CGM/CGM3Admin/src/api/index.js"],"sourcesContent":["import axios from 'axios'\nimport {Message, MessageBox, Notification} from 'element-ui'\n\n\n\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'\n// 创建axios实例\nconst request = axios.create({\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\n  baseURL: process.env['VUE_APP_API_ROOT'],\n  // 超时\n  timeout: 60000\n})\n// request拦截器\nrequest.interceptors.request.use(config => {\n    console.log(config)\n}, error => {\n  console.log(error)\n  Promise.reject(error)\n})\n\n// 响应拦截器\nrequest.interceptors.response.use(async res => {\n    console.log(res)\n    // 未设置状态码则默认成功状态\n    // const code = res.data.code || 200\n    // // 获取错误信息\n    // const msg = errorCode[code] || res.data.msg || errorCode['default']\n    // if (code === 401) {\n    //   MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\n    //       confirmButtonText: '重新登录',\n    //       cancelButtonText: '取消',\n    //       type: 'warning'\n    //     }\n    //   ).then(() => {\n    //     store.dispatch('LogOut').then(() => {\n    //       location.href = '/login'\n    //     })\n    //   }).catch(() => {\n    //   })\n    // } else if (code === 500) {\n    //   Message({\n    //     message: msg,\n    //     type: 'error'\n    //   })\n    //   return Promise.reject(new Error(msg))\n    // } else if (code === 416) {\n    //   // 需要滑动验证\n    //   let result = {}\n    //   await Verification().then(async value => {\n    //     if (!res.config.params) {\n    //       res.config.params = {}\n    //     }\n    //     res.config.params.slideCode = value\n    //     if (res.config.data) {\n    //       res.config.data = JSON.parse(res.config.data)\n    //     }\n    //     result = await request.request(res.config)\n    //   }, error => {\n    //     console.log(error)\n    //     return Promise.reject('error')\n    //   })\n    //   return Promise.resolve(result)\n    // } else if (code !== 200) {\n    //   Notification.error({\n    //     title: msg\n    //   })\n    //   return Promise.reject('error')\n    // } else {\n    //   return res.data\n    // }\n  },\n  error => {\n    console.log('err' + error)\n    let {message} = error\n    if (message == 'Network Error') {\n      message = '后端接口连接异常'\n    } else if (message.includes('timeout')) {\n      message = '系统接口请求超时'\n    } else if (message.includes('Request failed with status code')) {\n      message = '系统接口' + message.substr(message.length - 3) + '异常'\n    }\n    Message({\n      message: message,\n      type: 'error',\n      duration: 5 * 1000\n    })\n    return Promise.reject(error)\n  }\n)\n\nexport default request\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,OAAO,EAAEC,UAAU,EAAEC,YAAY,QAAO,YAAY;AAI5DH,KAAK,CAACI,QAAQ,CAACC,OAAO,CAAC,cAAc,CAAC,GAAG,gCAAgC;AACzE;AACA,MAAMC,OAAO,GAAGN,KAAK,CAACO,MAAM,CAAC;EAC3B;EACAC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EACxC;EACAC,OAAO,EAAE;AACX,CAAC,CAAC;AACF;AACAL,OAAO,CAACM,YAAY,CAACN,OAAO,CAACO,GAAG,CAACC,MAAM,IAAI;EACvCC,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC;AACvB,CAAC,EAAEG,KAAK,IAAI;EACVF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;EAClBC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AACvB,CAAC,CAAC;;AAEF;AACAX,OAAO,CAACM,YAAY,CAACQ,QAAQ,CAACP,GAAG,CAAC,MAAMQ,GAAG,IAAI;EAC3CN,OAAO,CAACC,GAAG,CAACK,GAAG,CAAC;EAChB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF,CAAC,EACDJ,KAAK,IAAI;EACPF,OAAO,CAACC,GAAG,CAAC,KAAK,GAAGC,KAAK,CAAC;EAC1B,IAAI;IAACK;EAAO,CAAC,GAAGL,KAAK;EACrB,IAAIK,OAAO,IAAI,eAAe,EAAE;IAC9BA,OAAO,GAAG,UAAU;EACtB,CAAC,MAAM,IAAIA,OAAO,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;IACtCD,OAAO,GAAG,UAAU;EACtB,CAAC,MAAM,IAAIA,OAAO,CAACC,QAAQ,CAAC,iCAAiC,CAAC,EAAE;IAC9DD,OAAO,GAAG,MAAM,GAAGA,OAAO,CAACE,MAAM,CAACF,OAAO,CAACG,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;EAC9D;EACAxB,OAAO,CAAC;IACNqB,OAAO,EAAEA,OAAO;IAChBI,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,CAAC,GAAG;EAChB,CAAC,CAAC;EACF,OAAOT,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAeX,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}