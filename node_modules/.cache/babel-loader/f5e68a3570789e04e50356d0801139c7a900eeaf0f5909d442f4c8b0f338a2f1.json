{"ast":null,"code":"import { getWeb, setWeb } from '@/api/api';\nimport { formatDate } from '@/utils/formatTime';\nexport default {\n  data() {\n    return {\n      formData: {\n        user_agreement_url: '',\n        privacy_policy_url: '',\n        delete_account_url: '',\n        version: ''\n      },\n      loading: false,\n      //添加配置项loading\n      listLoading: true,\n      list: [],\n      addSetting: false //弹窗是否显示\n    };\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    // 获取网页协议\n    getList() {\n      getWeb().then(response => {\n        this.listLoading = false;\n        if (response.code == 1000) {\n          // this.list.push(response.data)\n          this.list = response.data;\n          console.log(formatDate(response.data[0].create_ts, \"YYYY-mm-dd HH:MM:SS\"));\n        } else {\n          this.$message({\n            type: 'error',\n            message: response.msg\n          });\n        }\n      }).catch(res => {\n        this.$message({\n          type: 'error',\n          message: res.message\n        });\n      });\n    },\n    // 添加网页协议\n    edit(info) {\n      this.formData = info;\n      this.addSetting = true;\n    },\n    addSettings() {\n      this.loading = true;\n      setWeb(this.formData).then(response => {\n        this.loading = false;\n        if (response.code == 1000) {\n          this.addSetting = false;\n          this.$message({\n            message: '添加成功',\n            type: 'success'\n          });\n          this.getList();\n        } else {\n          this.$message({\n            type: 'error',\n            message: response.msg\n          });\n        }\n      }).catch(res => {\n        this.$message({\n          type: 'error',\n          message: res.message\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["getWeb","setWeb","formatDate","data","formData","user_agreement_url","privacy_policy_url","delete_account_url","version","loading","listLoading","list","addSetting","created","getList","methods","then","response","code","console","log","create_ts","$message","type","message","msg","catch","res","edit","info","addSettings"],"sources":["src/views/web.vue"],"sourcesContent":["<template>\n    <div>\n        <!-- 查询和其他操作 -->\n        <div class=\"filter-container\">\n          <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-plus\" @click='addSetting = true,formData = list[0]' >新增</el-button>\n        </div>\n        <!-- 查询结果 -->\n        <el-table v-loading=\"listLoading\" :data=\"list\" header-row-class-name='headerBg' element-loading-text=\"正在查询中。。。\" border fit highlight-current-row  >\n       \n            <el-table-column align=\"center\" label=\"版本号\" prop=\"version\"/>\n            <el-table-column align=\"center\" label=\"用户服务协议\" >\n                <template slot-scope=\"scope\">\n                     <el-link :href=\"scope.row.user_agreement_url\" type=\"primary\" target=\"_blank\">{{scope.row.user_agreement_url}}</el-link>\n                </template>\n            </el-table-column>\n             <el-table-column align=\"center\" label=\"隐私政策\" >\n                <template slot-scope=\"scope\">\n                     <el-link :href=\"scope.row.privacy_policy_url\" type=\"primary\" target=\"_blank\">{{scope.row.privacy_policy_url}}</el-link>\n                </template>\n            </el-table-column>\n             <el-table-column align=\"center\" label=\"删除账号条款\" >\n                <template slot-scope=\"scope\">\n                     <el-link :href=\"scope.row.delete_account_url\" type=\"primary\" target=\"_blank\">{{scope.row.delete_account_url}}</el-link>\n                </template>\n            </el-table-column>\n            <el-table-column align=\"center\" label=\"创建时间\" prop=\"ts\"/>\n            <!-- <el-table-column align=\"center\" label=\"操作\" >\n                <template  slot-scope=\"scope\">\n                    <div class='flex table-handel'>\n                        <el-button type=\"text\"  style='margin:0;' class=\"text-info\" @click='edit(scope.row)' >修改</el-button>\n                    </div>\n                </template>\n            </el-table-column> -->\n        </el-table>\n        <!-- 弹窗 -->\n        <el-dialog :visible.sync=\"addSetting\" title=\"新建网页配置\" border width=\"50%\">\n            <el-form ref=\"formData\"  label-width=\"120px\" label-position=\"right\" :model=\"formData\" >\n               \n                <el-form-item label=\"用户服务协议\"  prop=\"order\">\n                    <el-input v-model=\"formData.user_agreement_url\" />\n                </el-form-item>\n                 <el-form-item label=\"隐私政策\"  prop=\"item_name\">\n                    <el-input v-model=\"formData.privacy_policy_url\" />\n                </el-form-item>\n                <el-form-item label=\"删除账号条款\"  prop=\"item_name\">\n                    <el-input v-model=\"formData.delete_account_url\" />\n                </el-form-item>\n                <div class='flex record-btn'  >\n                    <el-button :loading=\"loading\" type=\"primary\" @click=\"addSettings\">确认</el-button>\n                    <el-button  @click=\"addSetting = false\">取消</el-button>\n                </div>\n            </el-form>\n        </el-dialog>\n    </div>\n</template>\n<script>\nimport {getWeb,setWeb} from '@/api/api'\nimport {formatDate} from '@/utils/formatTime'\nexport default {\n    data(){\n        return{\n            formData:{\n                user_agreement_url:'',\n                privacy_policy_url:'',\n                delete_account_url:'',\n                version:''\n            },\n            loading:false, //添加配置项loading\n            listLoading:true,\n            list:[],\n            addSetting:false,  //弹窗是否显示\n        }\n    },\n    created(){\n        this.getList()\n    },\n\n    methods:{\n        // 获取网页协议\n        getList(){\n            getWeb().then(response => {\n                    this.listLoading = false\n                    if(response.code == 1000){\n                        // this.list.push(response.data)\n                        this.list =  response.data\n                        console.log(formatDate(response.data[0].create_ts,\"YYYY-mm-dd HH:MM:SS\"))\n                    }else{\n                        this.$message({\n                            type: 'error',\n                            message: response.msg\n                        });\n                    }\n            }).catch((res) => {\n                    this.$message({\n                        type: 'error',\n                        message: res.message\n                    });\n            })\n        },\n        // 添加网页协议\n        edit(info){\n            this.formData = info\n            this.addSetting = true\n        },\n        addSettings(){\n            this.loading = true\n            setWeb(this.formData).then(response => {\n                    this.loading=false\n                    if(response.code == 1000){\n                        this.addSetting = false\n                        this.$message({\n                            message: '添加成功',\n                            type: 'success'\n                        });\n                        this.getList()\n                    }else{\n                        this.$message({\n                            type: 'error',\n                            message: response.msg\n                        });\n                    }\n            }).catch((res) => {\n                    this.$message({\n                        type: 'error',\n                        message: res.message\n                    });\n            })\n        }\n    }\n}\n</script>\n<style scoped>\n    .filter-container{\n        margin-bottom:20px;\n    }\n    .record-btn{\n        display: flex;\n        justify-content: flex-end;\n    }\n</style>"],"mappings":"AAwDA,SAAAA,MAAA,EAAAC,MAAA;AACA,SAAAC,UAAA;AACA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,kBAAA;QACAC,kBAAA;QACAC,kBAAA;QACAC,OAAA;MACA;MACAC,OAAA;MAAA;MACAC,WAAA;MACAC,IAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EACA;EAEAC,OAAA;IACA;IACAD,QAAA;MACAd,MAAA,GAAAgB,IAAA,CAAAC,QAAA;QACA,KAAAP,WAAA;QACA,IAAAO,QAAA,CAAAC,IAAA;UACA;UACA,KAAAP,IAAA,GAAAM,QAAA,CAAAd,IAAA;UACAgB,OAAA,CAAAC,GAAA,CAAAlB,UAAA,CAAAe,QAAA,CAAAd,IAAA,IAAAkB,SAAA;QACA;UACA,KAAAC,QAAA;YACAC,IAAA;YACAC,OAAA,EAAAP,QAAA,CAAAQ;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAL,QAAA;UACAC,IAAA;UACAC,OAAA,EAAAG,GAAA,CAAAH;QACA;MACA;IACA;IACA;IACAI,KAAAC,IAAA;MACA,KAAAzB,QAAA,GAAAyB,IAAA;MACA,KAAAjB,UAAA;IACA;IACAkB,YAAA;MACA,KAAArB,OAAA;MACAR,MAAA,MAAAG,QAAA,EAAAY,IAAA,CAAAC,QAAA;QACA,KAAAR,OAAA;QACA,IAAAQ,QAAA,CAAAC,IAAA;UACA,KAAAN,UAAA;UACA,KAAAU,QAAA;YACAE,OAAA;YACAD,IAAA;UACA;UACA,KAAAT,OAAA;QACA;UACA,KAAAQ,QAAA;YACAC,IAAA;YACAC,OAAA,EAAAP,QAAA,CAAAQ;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAL,QAAA;UACAC,IAAA;UACAC,OAAA,EAAAG,GAAA,CAAAH;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}