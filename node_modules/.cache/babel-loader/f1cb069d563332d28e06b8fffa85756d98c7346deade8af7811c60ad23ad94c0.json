{"ast":null,"code":"import _classPrivateMethodInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js\";\nimport _classPrivateFieldInitSpec from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _assertClassBrand from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/assertClassBrand.js\";\nimport _classPrivateFieldGet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nimport _classPrivateFieldSet from \"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport \"core-js/modules/es.array.push.js\";\n/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { LazyArg } from '../common/LazyArg.js';\nimport { scriptInjector } from '../common/ScriptInjector.js';\nimport { PuppeteerURL, SOURCE_URL_REGEX, debugError, getSourcePuppeteerURLIfAvailable, getSourceUrlComment, isString } from '../common/util.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { DisposableStack, disposeSymbol } from '../util/disposable.js';\nimport { stringifyFunction } from '../util/Function.js';\nimport { Mutex } from '../util/Mutex.js';\nimport { ARIAQueryHandler } from './AriaQueryHandler.js';\nimport { Binding } from './Binding.js';\nimport { CdpElementHandle } from './ElementHandle.js';\nimport { CdpJSHandle } from './JSHandle.js';\nimport { addPageBinding, createEvaluationError, valueFromRemoteObject } from './utils.js';\nconst ariaQuerySelectorBinding = new Binding('__ariaQuerySelector', ARIAQueryHandler.queryOne);\nconst ariaQuerySelectorAllBinding = new Binding('__ariaQuerySelectorAll', async (element, selector) => {\n  const results = ARIAQueryHandler.queryAll(element, selector);\n  return await element.realm.evaluateHandle((...elements) => {\n    return elements;\n  }, ...(await AsyncIterableUtil.collect(results)));\n});\n/**\n * @internal\n */\nvar _client = /*#__PURE__*/new WeakMap();\nvar _world = /*#__PURE__*/new WeakMap();\nvar _id = /*#__PURE__*/new WeakMap();\nvar _name = /*#__PURE__*/new WeakMap();\nvar _disposables = /*#__PURE__*/new WeakMap();\nvar _bindings = /*#__PURE__*/new WeakMap();\nvar _mutex = /*#__PURE__*/new WeakMap();\nvar _ExecutionContext_brand = /*#__PURE__*/new WeakSet();\nvar _bindingsInstalled = /*#__PURE__*/new WeakMap();\nvar _puppeteerUtil = /*#__PURE__*/new WeakMap();\nexport class ExecutionContext extends EventEmitter {\n  constructor(client, contextPayload, world) {\n    super();\n    _classPrivateMethodInitSpec(this, _ExecutionContext_brand);\n    _classPrivateFieldInitSpec(this, _client, void 0);\n    _classPrivateFieldInitSpec(this, _world, void 0);\n    _classPrivateFieldInitSpec(this, _id, void 0);\n    _classPrivateFieldInitSpec(this, _name, void 0);\n    _classPrivateFieldInitSpec(this, _disposables, new DisposableStack());\n    // Contains mapping from functions that should be bound to Puppeteer functions.\n    _classPrivateFieldInitSpec(this, _bindings, new Map());\n    // If multiple waitFor are set up asynchronously, we need to wait for the\n    // first one to set up the binding in the page before running the others.\n    _classPrivateFieldInitSpec(this, _mutex, new Mutex());\n    _classPrivateFieldInitSpec(this, _bindingsInstalled, false);\n    _classPrivateFieldInitSpec(this, _puppeteerUtil, void 0);\n    _classPrivateFieldSet(_client, this, client);\n    _classPrivateFieldSet(_world, this, world);\n    _classPrivateFieldSet(_id, this, contextPayload.id);\n    if (contextPayload.name) {\n      _classPrivateFieldSet(_name, this, contextPayload.name);\n    }\n    const clientEmitter = _classPrivateFieldGet(_disposables, this).use(new EventEmitter(_classPrivateFieldGet(_client, this)));\n    clientEmitter.on('Runtime.bindingCalled', _assertClassBrand(_ExecutionContext_brand, this, _onBindingCalled).bind(this));\n    clientEmitter.on('Runtime.executionContextDestroyed', async event => {\n      if (event.executionContextId === _classPrivateFieldGet(_id, this)) {\n        this[disposeSymbol]();\n      }\n    });\n    clientEmitter.on('Runtime.executionContextsCleared', async () => {\n      this[disposeSymbol]();\n    });\n    clientEmitter.on('Runtime.consoleAPICalled', _assertClassBrand(_ExecutionContext_brand, this, _onConsoleAPI).bind(this));\n    clientEmitter.on(CDPSessionEvent.Disconnected, () => {\n      this[disposeSymbol]();\n    });\n  }\n  get id() {\n    return _classPrivateFieldGet(_id, this);\n  }\n  get puppeteerUtil() {\n    let promise = Promise.resolve();\n    if (!_classPrivateFieldGet(_bindingsInstalled, this)) {\n      promise = Promise.all([_assertClassBrand(_ExecutionContext_brand, this, _addBindingWithoutThrowing).call(this, ariaQuerySelectorBinding), _assertClassBrand(_ExecutionContext_brand, this, _addBindingWithoutThrowing).call(this, ariaQuerySelectorAllBinding)]);\n      _classPrivateFieldSet(_bindingsInstalled, this, true);\n    }\n    scriptInjector.inject(script => {\n      if (_classPrivateFieldGet(_puppeteerUtil, this)) {\n        void _classPrivateFieldGet(_puppeteerUtil, this).then(handle => {\n          void handle.dispose();\n        });\n      }\n      _classPrivateFieldSet(_puppeteerUtil, this, promise.then(() => {\n        return this.evaluateHandle(script);\n      }));\n    }, !_classPrivateFieldGet(_puppeteerUtil, this));\n    return _classPrivateFieldGet(_puppeteerUtil, this);\n  }\n  /**\n   * Evaluates the given function.\n   *\n   * @example\n   *\n   * ```ts\n   * const executionContext = await page.mainFrame().executionContext();\n   * const result = await executionContext.evaluate(() => Promise.resolve(8 * 7))* ;\n   * console.log(result); // prints \"56\"\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function:\n   *\n   * ```ts\n   * console.log(await executionContext.evaluate('1 + 2')); // prints \"3\"\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const oneHandle = await executionContext.evaluateHandle(() => 1);\n   * const twoHandle = await executionContext.evaluateHandle(() => 2);\n   * const result = await executionContext.evaluate(\n   *   (a, b) => a + b,\n   *   oneHandle,\n   *   twoHandle\n   * );\n   * await oneHandle.dispose();\n   * await twoHandle.dispose();\n   * console.log(result); // prints '3'.\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns The result of evaluating the function. If the result is an object,\n   * a vanilla object containing the serializable properties of the result is\n   * returned.\n   */\n  async evaluate(pageFunction, ...args) {\n    return await _assertClassBrand(_ExecutionContext_brand, this, _evaluate).call(this, true, pageFunction, ...args);\n  }\n  /**\n   * Evaluates the given function.\n   *\n   * Unlike {@link ExecutionContext.evaluate | evaluate}, this method returns a\n   * handle to the result of the function.\n   *\n   * This method may be better suited if the object cannot be serialized (e.g.\n   * `Map`) and requires further manipulation.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = await page.mainFrame().executionContext();\n   * const handle: JSHandle<typeof globalThis> = await context.evaluateHandle(\n   *   () => Promise.resolve(self)\n   * );\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function.\n   *\n   * ```ts\n   * const handle: JSHandle<number> = await context.evaluateHandle('1 + 2');\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const bodyHandle: ElementHandle<HTMLBodyElement> =\n   *   await context.evaluateHandle(() => {\n   *     return document.body;\n   *   });\n   * const stringHandle: JSHandle<string> = await context.evaluateHandle(\n   *   body => body.innerHTML,\n   *   body\n   * );\n   * console.log(await stringHandle.jsonValue()); // prints body's innerHTML\n   * // Always dispose your garbage! :)\n   * await bodyHandle.dispose();\n   * await stringHandle.dispose();\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns A {@link JSHandle | handle} to the result of evaluating the\n   * function. If the result is a `Node`, then this will return an\n   * {@link ElementHandle | element handle}.\n   */\n  async evaluateHandle(pageFunction, ...args) {\n    return await _assertClassBrand(_ExecutionContext_brand, this, _evaluate).call(this, false, pageFunction, ...args);\n  }\n  [disposeSymbol]() {\n    _classPrivateFieldGet(_disposables, this).dispose();\n    this.emit('disposed', undefined);\n  }\n}\nasync function _addBinding(binding) {\n  const env_1 = {\n    stack: [],\n    error: void 0,\n    hasError: false\n  };\n  try {\n    if (_classPrivateFieldGet(_bindings, this).has(binding.name)) {\n      return;\n    }\n    const _ = __addDisposableResource(env_1, await _classPrivateFieldGet(_mutex, this).acquire(), false);\n    try {\n      await _classPrivateFieldGet(_client, this).send('Runtime.addBinding', _classPrivateFieldGet(_name, this) ? {\n        name: binding.name,\n        executionContextName: _classPrivateFieldGet(_name, this)\n      } : {\n        name: binding.name,\n        executionContextId: _classPrivateFieldGet(_id, this)\n      });\n      await this.evaluate(addPageBinding, 'internal', binding.name);\n      _classPrivateFieldGet(_bindings, this).set(binding.name, binding);\n    } catch (error) {\n      // We could have tried to evaluate in a context which was already\n      // destroyed. This happens, for example, if the page is navigated while\n      // we are trying to add the binding\n      if (error instanceof Error) {\n        // Destroyed context.\n        if (error.message.includes('Execution context was destroyed')) {\n          return;\n        }\n        // Missing context.\n        if (error.message.includes('Cannot find context with specified id')) {\n          return;\n        }\n      }\n      debugError(error);\n    }\n  } catch (e_1) {\n    env_1.error = e_1;\n    env_1.hasError = true;\n  } finally {\n    __disposeResources(env_1);\n  }\n}\nasync function _onBindingCalled(event) {\n  let payload;\n  try {\n    payload = JSON.parse(event.payload);\n  } catch {\n    // The binding was either called by something in the page or it was\n    // called before our wrapper was initialized.\n    return;\n  }\n  const {\n    type,\n    name,\n    seq,\n    args,\n    isTrivial\n  } = payload;\n  if (type !== 'internal') {\n    this.emit('bindingcalled', event);\n    return;\n  }\n  if (!_classPrivateFieldGet(_bindings, this).has(name)) {\n    this.emit('bindingcalled', event);\n    return;\n  }\n  try {\n    if (event.executionContextId !== _classPrivateFieldGet(_id, this)) {\n      return;\n    }\n    const binding = _classPrivateFieldGet(_bindings, this).get(name);\n    await binding?.run(this, seq, args, isTrivial);\n  } catch (err) {\n    debugError(err);\n  }\n}\nfunction _onConsoleAPI(event) {\n  if (event.executionContextId !== _classPrivateFieldGet(_id, this)) {\n    return;\n  }\n  this.emit('consoleapicalled', event);\n}\nasync function _addBindingWithoutThrowing(binding) {\n  try {\n    await _assertClassBrand(_ExecutionContext_brand, this, _addBinding).call(this, binding);\n  } catch (err) {\n    // If the binding cannot be added, then either the browser doesn't support\n    // bindings (e.g. Firefox) or the context is broken. Either breakage is\n    // okay, so we ignore the error.\n    debugError(err);\n  }\n}\nasync function _evaluate(returnByValue, pageFunction, ...args) {\n  const sourceUrlComment = getSourceUrlComment(getSourcePuppeteerURLIfAvailable(pageFunction)?.toString() ?? PuppeteerURL.INTERNAL_URL);\n  if (isString(pageFunction)) {\n    const contextId = _classPrivateFieldGet(_id, this);\n    const expression = pageFunction;\n    const expressionWithSourceUrl = SOURCE_URL_REGEX.test(expression) ? expression : `${expression}\\n${sourceUrlComment}\\n`;\n    const {\n      exceptionDetails,\n      result: remoteObject\n    } = await _classPrivateFieldGet(_client, this).send('Runtime.evaluate', {\n      expression: expressionWithSourceUrl,\n      contextId,\n      returnByValue,\n      awaitPromise: true,\n      userGesture: true\n    }).catch(rewriteError);\n    if (exceptionDetails) {\n      throw createEvaluationError(exceptionDetails);\n    }\n    return returnByValue ? valueFromRemoteObject(remoteObject) : _classPrivateFieldGet(_world, this).createCdpHandle(remoteObject);\n  }\n  const functionDeclaration = stringifyFunction(pageFunction);\n  const functionDeclarationWithSourceUrl = SOURCE_URL_REGEX.test(functionDeclaration) ? functionDeclaration : `${functionDeclaration}\\n${sourceUrlComment}\\n`;\n  let callFunctionOnPromise;\n  try {\n    callFunctionOnPromise = _classPrivateFieldGet(_client, this).send('Runtime.callFunctionOn', {\n      functionDeclaration: functionDeclarationWithSourceUrl,\n      executionContextId: _classPrivateFieldGet(_id, this),\n      arguments: args.length ? await Promise.all(args.map(convertArgument.bind(this))) : [],\n      returnByValue,\n      awaitPromise: true,\n      userGesture: true\n    });\n  } catch (error) {\n    if (error instanceof TypeError && error.message.startsWith('Converting circular structure to JSON')) {\n      error.message += ' Recursive objects are not allowed.';\n    }\n    throw error;\n  }\n  const {\n    exceptionDetails,\n    result: remoteObject\n  } = await callFunctionOnPromise.catch(rewriteError);\n  if (exceptionDetails) {\n    throw createEvaluationError(exceptionDetails);\n  }\n  return returnByValue ? valueFromRemoteObject(remoteObject) : _classPrivateFieldGet(_world, this).createCdpHandle(remoteObject);\n  async function convertArgument(arg) {\n    if (arg instanceof LazyArg) {\n      arg = await arg.get(this);\n    }\n    if (typeof arg === 'bigint') {\n      // eslint-disable-line valid-typeof\n      return {\n        unserializableValue: `${arg.toString()}n`\n      };\n    }\n    if (Object.is(arg, -0)) {\n      return {\n        unserializableValue: '-0'\n      };\n    }\n    if (Object.is(arg, Infinity)) {\n      return {\n        unserializableValue: 'Infinity'\n      };\n    }\n    if (Object.is(arg, -Infinity)) {\n      return {\n        unserializableValue: '-Infinity'\n      };\n    }\n    if (Object.is(arg, NaN)) {\n      return {\n        unserializableValue: 'NaN'\n      };\n    }\n    const objectHandle = arg && (arg instanceof CdpJSHandle || arg instanceof CdpElementHandle) ? arg : null;\n    if (objectHandle) {\n      if (objectHandle.realm !== _classPrivateFieldGet(_world, this)) {\n        throw new Error('JSHandles can be evaluated only in the context they were created!');\n      }\n      if (objectHandle.disposed) {\n        throw new Error('JSHandle is disposed!');\n      }\n      if (objectHandle.remoteObject().unserializableValue) {\n        return {\n          unserializableValue: objectHandle.remoteObject().unserializableValue\n        };\n      }\n      if (!objectHandle.remoteObject().objectId) {\n        return {\n          value: objectHandle.remoteObject().value\n        };\n      }\n      return {\n        objectId: objectHandle.remoteObject().objectId\n      };\n    }\n    return {\n      value: arg\n    };\n  }\n}\nconst rewriteError = error => {\n  if (error.message.includes('Object reference chain is too long')) {\n    return {\n      result: {\n        type: 'undefined'\n      }\n    };\n  }\n  if (error.message.includes(\"Object couldn't be returned by value\")) {\n    return {\n      result: {\n        type: 'undefined'\n      }\n    };\n  }\n  if (error.message.endsWith('Cannot find context with specified id') || error.message.endsWith('Inspected target navigated or closed')) {\n    throw new Error('Execution context was destroyed, most likely because of a navigation.');\n  }\n  throw error;\n};","map":{"version":3,"names":["CDPSessionEvent","EventEmitter","LazyArg","scriptInjector","PuppeteerURL","SOURCE_URL_REGEX","debugError","getSourcePuppeteerURLIfAvailable","getSourceUrlComment","isString","AsyncIterableUtil","DisposableStack","disposeSymbol","stringifyFunction","Mutex","ARIAQueryHandler","Binding","CdpElementHandle","CdpJSHandle","addPageBinding","createEvaluationError","valueFromRemoteObject","ariaQuerySelectorBinding","queryOne","ariaQuerySelectorAllBinding","element","selector","results","queryAll","realm","evaluateHandle","elements","collect","_client","WeakMap","_world","_id","_name","_disposables","_bindings","_mutex","_ExecutionContext_brand","WeakSet","_bindingsInstalled","_puppeteerUtil","ExecutionContext","constructor","client","contextPayload","world","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","Map","_classPrivateFieldSet","id","name","clientEmitter","_classPrivateFieldGet","use","on","_assertClassBrand","_onBindingCalled","bind","event","executionContextId","_onConsoleAPI","Disconnected","puppeteerUtil","promise","Promise","resolve","all","_addBindingWithoutThrowing","call","inject","script","then","handle","dispose","evaluate","pageFunction","args","_evaluate","emit","undefined","_addBinding","binding","has","_","__addDisposableResource","env_1","acquire","send","executionContextName","set","error","Error","message","includes","payload","JSON","parse","type","seq","isTrivial","get","run","err","returnByValue","sourceUrlComment","toString","INTERNAL_URL","contextId","expression","expressionWithSourceUrl","test","exceptionDetails","result","remoteObject","awaitPromise","userGesture","catch","rewriteError","createCdpHandle","functionDeclaration","functionDeclarationWithSourceUrl","callFunctionOnPromise","arguments","length","map","convertArgument","TypeError","startsWith","arg","unserializableValue","Object","is","Infinity","NaN","objectHandle","disposed","objectId","value","endsWith"],"sources":["../../../../src/cdp/ExecutionContext.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}