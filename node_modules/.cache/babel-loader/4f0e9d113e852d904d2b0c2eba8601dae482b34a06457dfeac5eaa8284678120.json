{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2023 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CdpProcessor = void 0;\nconst protocol_js_1 = require(\"../../../protocol/protocol.js\");\nvar _browsingContextStorage = /*#__PURE__*/new WeakMap();\nvar _realmStorage = /*#__PURE__*/new WeakMap();\nvar _cdpConnection = /*#__PURE__*/new WeakMap();\nvar _browserCdpClient = /*#__PURE__*/new WeakMap();\nclass CdpProcessor {\n  constructor(browsingContextStorage, realmStorage, cdpConnection, browserCdpClient) {\n    _classPrivateFieldInitSpec(this, _browsingContextStorage, void 0);\n    _classPrivateFieldInitSpec(this, _realmStorage, void 0);\n    _classPrivateFieldInitSpec(this, _cdpConnection, void 0);\n    _classPrivateFieldInitSpec(this, _browserCdpClient, void 0);\n    _classPrivateFieldSet(_browsingContextStorage, this, browsingContextStorage);\n    _classPrivateFieldSet(_realmStorage, this, realmStorage);\n    _classPrivateFieldSet(_cdpConnection, this, cdpConnection);\n    _classPrivateFieldSet(_browserCdpClient, this, browserCdpClient);\n  }\n  getSession(params) {\n    const context = params.context;\n    const sessionId = _classPrivateFieldGet(_browsingContextStorage, this).getContext(context).cdpTarget.cdpSessionId;\n    if (sessionId === undefined) {\n      return {};\n    }\n    return {\n      session: sessionId\n    };\n  }\n  resolveRealm(params) {\n    const context = params.realm;\n    const realm = _classPrivateFieldGet(_realmStorage, this).getRealm({\n      realmId: context\n    });\n    if (realm === undefined) {\n      throw new protocol_js_1.UnknownErrorException(`Could not find realm ${params.realm}`);\n    }\n    return {\n      executionContextId: realm.executionContextId\n    };\n  }\n  async sendCommand(params) {\n    const client = params.session ? _classPrivateFieldGet(_cdpConnection, this).getCdpClient(params.session) : _classPrivateFieldGet(_browserCdpClient, this);\n    const result = await client.sendCommand(params.method, params.params);\n    return {\n      result,\n      session: params.session\n    };\n  }\n}\nexports.CdpProcessor = CdpProcessor;","map":{"version":3,"names":["_classPrivateFieldInitSpec","require","default","_classPrivateFieldGet","_classPrivateFieldSet","protocol_js_1","_browsingContextStorage","WeakMap","_realmStorage","_cdpConnection","_browserCdpClient","CdpProcessor","constructor","browsingContextStorage","realmStorage","cdpConnection","browserCdpClient","getSession","params","context","sessionId","getContext","cdpTarget","cdpSessionId","undefined","session","resolveRealm","realm","getRealm","realmId","UnknownErrorException","executionContextId","sendCommand","client","getCdpClient","result","method","exports"],"sources":["../../../../../src/bidiMapper/modules/cdp/CdpProcessor.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;AAAA,IAAAA,0BAAA,GAAAC,OAAA,8GAAAC,OAAA;AAAA,IAAAC,qBAAA,GAAAF,OAAA,0GAAAC,OAAA;AAAA,IAAAE,qBAAA,GAAAH,OAAA,0GAAAC,OAAA;;;;;AAiBA,MAAAG,aAAA,GAAAJ,OAAA;AAA8E,IAAAK,uBAAA,oBAAAC,OAAA;AAAA,IAAAC,aAAA,oBAAAD,OAAA;AAAA,IAAAE,cAAA,oBAAAF,OAAA;AAAA,IAAAG,iBAAA,oBAAAH,OAAA;AAK9E,MAAaI,YAAY;EAMvBC,YACEC,sBAA8C,EAC9CC,YAA0B,EAC1BC,aAA4B,EAC5BC,gBAA2B;IAAAhB,0BAAA,OAAAM,uBAAA;IAAAN,0BAAA,OAAAQ,aAAA;IAAAR,0BAAA,OAAAS,cAAA;IAAAT,0BAAA,OAAAU,iBAAA;IAE3BN,qBAAA,CAAAE,uBAAA,MAAI,EAA2BO,sBAAsB;IACrDT,qBAAA,CAAAI,aAAA,MAAI,EAAiBM,YAAY;IACjCV,qBAAA,CAAAK,cAAA,MAAI,EAAkBM,aAAa;IACnCX,qBAAA,CAAAM,iBAAA,MAAI,EAAqBM,gBAAgB;EAC3C;EAEAC,UAAUA,CAACC,MAAgC;IACzC,MAAMC,OAAO,GAAGD,MAAM,CAACC,OAAO;IAC9B,MAAMC,SAAS,GACbjB,qBAAA,CAAAG,uBAAA,MAAI,EAAyBe,UAAU,CAACF,OAAO,CAAC,CAACG,SAAS,CAACC,YAAY;IACzE,IAAIH,SAAS,KAAKI,SAAS,EAAE;MAC3B,OAAO,EAAE;IACX;IACA,OAAO;MAACC,OAAO,EAAEL;IAAS,CAAC;EAC7B;EAEAM,YAAYA,CAACR,MAAkC;IAC7C,MAAMC,OAAO,GAAGD,MAAM,CAACS,KAAK;IAC5B,MAAMA,KAAK,GAAGxB,qBAAA,CAAAK,aAAA,MAAI,EAAeoB,QAAQ,CAAC;MAACC,OAAO,EAAEV;IAAO,CAAC,CAAC;IAC7D,IAAIQ,KAAK,KAAKH,SAAS,EAAE;MACvB,MAAM,IAAInB,aAAA,CAAAyB,qBAAqB,CAAC,wBAAwBZ,MAAM,CAACS,KAAK,EAAE,CAAC;IACzE;IACA,OAAO;MAACI,kBAAkB,EAAEJ,KAAK,CAACI;IAAkB,CAAC;EACvD;EAEA,MAAMC,WAAWA,CACfd,MAAiC;IAEjC,MAAMe,MAAM,GAAGf,MAAM,CAACO,OAAO,GACzBtB,qBAAA,CAAAM,cAAA,MAAI,EAAgByB,YAAY,CAAChB,MAAM,CAACO,OAAO,CAAC,GAAAtB,qBAAA,CAAAO,iBAAA,EAChD,IAAI,CAAkB;IAC1B,MAAMyB,MAAM,GAAG,MAAMF,MAAM,CAACD,WAAW,CAACd,MAAM,CAACkB,MAAM,EAAElB,MAAM,CAACA,MAAM,CAAC;IACrE,OAAO;MACLiB,MAAM;MACNV,OAAO,EAAEP,MAAM,CAACO;KACjB;EACH;;AAhDFY,OAAA,CAAA1B,YAAA,GAAAA,YAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}