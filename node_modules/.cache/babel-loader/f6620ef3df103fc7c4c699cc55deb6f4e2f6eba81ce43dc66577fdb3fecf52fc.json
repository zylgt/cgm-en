{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateMethodInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _assertClassBrand = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/assertClassBrand.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nlet _disposable_js_1$disp;\nrequire(\"core-js/modules/es.array.push.js\");\nvar __addDisposableResource = this && this.__addDisposableResource || function (env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({\n      value: value,\n      dispose: dispose,\n      async: async\n    });\n  } else if (async) {\n    env.stack.push({\n      async: true\n    });\n  }\n  return value;\n};\nvar __disposeResources = this && this.__disposeResources || function (SuppressedError) {\n  return function (env) {\n    function fail(e) {\n      env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n      env.hasError = true;\n    }\n    function next() {\n      while (env.stack.length) {\n        var rec = env.stack.pop();\n        try {\n          var result = rec.dispose && rec.dispose.call(rec.value);\n          if (rec.async) return Promise.resolve(result).then(next, function (e) {\n            fail(e);\n            return next();\n          });\n        } catch (e) {\n          fail(e);\n        }\n      }\n      if (env.hasError) throw env.error;\n    }\n    return next();\n  };\n}(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExecutionContext = void 0;\nconst CDPSession_js_1 = require(\"../api/CDPSession.js\");\nconst EventEmitter_js_1 = require(\"../common/EventEmitter.js\");\nconst LazyArg_js_1 = require(\"../common/LazyArg.js\");\nconst ScriptInjector_js_1 = require(\"../common/ScriptInjector.js\");\nconst util_js_1 = require(\"../common/util.js\");\nconst AsyncIterableUtil_js_1 = require(\"../util/AsyncIterableUtil.js\");\nconst disposable_js_1 = require(\"../util/disposable.js\");\nconst Function_js_1 = require(\"../util/Function.js\");\nconst Mutex_js_1 = require(\"../util/Mutex.js\");\nconst AriaQueryHandler_js_1 = require(\"./AriaQueryHandler.js\");\nconst Binding_js_1 = require(\"./Binding.js\");\nconst ElementHandle_js_1 = require(\"./ElementHandle.js\");\nconst JSHandle_js_1 = require(\"./JSHandle.js\");\nconst utils_js_1 = require(\"./utils.js\");\nconst ariaQuerySelectorBinding = new Binding_js_1.Binding('__ariaQuerySelector', AriaQueryHandler_js_1.ARIAQueryHandler.queryOne);\nconst ariaQuerySelectorAllBinding = new Binding_js_1.Binding('__ariaQuerySelectorAll', async (element, selector) => {\n  const results = AriaQueryHandler_js_1.ARIAQueryHandler.queryAll(element, selector);\n  return await element.realm.evaluateHandle((...elements) => {\n    return elements;\n  }, ...(await AsyncIterableUtil_js_1.AsyncIterableUtil.collect(results)));\n});\n/**\n * @internal\n */\nvar _client = /*#__PURE__*/new WeakMap();\nvar _world = /*#__PURE__*/new WeakMap();\nvar _id = /*#__PURE__*/new WeakMap();\nvar _name = /*#__PURE__*/new WeakMap();\nvar _disposables = /*#__PURE__*/new WeakMap();\nvar _bindings = /*#__PURE__*/new WeakMap();\nvar _mutex = /*#__PURE__*/new WeakMap();\nvar _ExecutionContext_brand = /*#__PURE__*/new WeakSet();\nvar _bindingsInstalled = /*#__PURE__*/new WeakMap();\nvar _puppeteerUtil = /*#__PURE__*/new WeakMap();\n_disposable_js_1$disp = disposable_js_1.disposeSymbol;\nclass ExecutionContext extends EventEmitter_js_1.EventEmitter {\n  constructor(client, contextPayload, world) {\n    super();\n    _classPrivateMethodInitSpec(this, _ExecutionContext_brand);\n    _classPrivateFieldInitSpec(this, _client, void 0);\n    _classPrivateFieldInitSpec(this, _world, void 0);\n    _classPrivateFieldInitSpec(this, _id, void 0);\n    _classPrivateFieldInitSpec(this, _name, void 0);\n    _classPrivateFieldInitSpec(this, _disposables, new disposable_js_1.DisposableStack());\n    // Contains mapping from functions that should be bound to Puppeteer functions.\n    _classPrivateFieldInitSpec(this, _bindings, new Map());\n    // If multiple waitFor are set up asynchronously, we need to wait for the\n    // first one to set up the binding in the page before running the others.\n    _classPrivateFieldInitSpec(this, _mutex, new Mutex_js_1.Mutex());\n    _classPrivateFieldInitSpec(this, _bindingsInstalled, false);\n    _classPrivateFieldInitSpec(this, _puppeteerUtil, void 0);\n    _classPrivateFieldSet(_client, this, client);\n    _classPrivateFieldSet(_world, this, world);\n    _classPrivateFieldSet(_id, this, contextPayload.id);\n    if (contextPayload.name) {\n      _classPrivateFieldSet(_name, this, contextPayload.name);\n    }\n    const clientEmitter = _classPrivateFieldGet(_disposables, this).use(new EventEmitter_js_1.EventEmitter(_classPrivateFieldGet(_client, this)));\n    clientEmitter.on('Runtime.bindingCalled', _assertClassBrand(_ExecutionContext_brand, this, _onBindingCalled).bind(this));\n    clientEmitter.on('Runtime.executionContextDestroyed', async event => {\n      if (event.executionContextId === _classPrivateFieldGet(_id, this)) {\n        this[disposable_js_1.disposeSymbol]();\n      }\n    });\n    clientEmitter.on('Runtime.executionContextsCleared', async () => {\n      this[disposable_js_1.disposeSymbol]();\n    });\n    clientEmitter.on('Runtime.consoleAPICalled', _assertClassBrand(_ExecutionContext_brand, this, _onConsoleAPI).bind(this));\n    clientEmitter.on(CDPSession_js_1.CDPSessionEvent.Disconnected, () => {\n      this[disposable_js_1.disposeSymbol]();\n    });\n  }\n  get id() {\n    return _classPrivateFieldGet(_id, this);\n  }\n  get puppeteerUtil() {\n    let promise = Promise.resolve();\n    if (!_classPrivateFieldGet(_bindingsInstalled, this)) {\n      promise = Promise.all([_assertClassBrand(_ExecutionContext_brand, this, _addBindingWithoutThrowing).call(this, ariaQuerySelectorBinding), _assertClassBrand(_ExecutionContext_brand, this, _addBindingWithoutThrowing).call(this, ariaQuerySelectorAllBinding)]);\n      _classPrivateFieldSet(_bindingsInstalled, this, true);\n    }\n    ScriptInjector_js_1.scriptInjector.inject(script => {\n      if (_classPrivateFieldGet(_puppeteerUtil, this)) {\n        void _classPrivateFieldGet(_puppeteerUtil, this).then(handle => {\n          void handle.dispose();\n        });\n      }\n      _classPrivateFieldSet(_puppeteerUtil, this, promise.then(() => {\n        return this.evaluateHandle(script);\n      }));\n    }, !_classPrivateFieldGet(_puppeteerUtil, this));\n    return _classPrivateFieldGet(_puppeteerUtil, this);\n  }\n  /**\n   * Evaluates the given function.\n   *\n   * @example\n   *\n   * ```ts\n   * const executionContext = await page.mainFrame().executionContext();\n   * const result = await executionContext.evaluate(() => Promise.resolve(8 * 7))* ;\n   * console.log(result); // prints \"56\"\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function:\n   *\n   * ```ts\n   * console.log(await executionContext.evaluate('1 + 2')); // prints \"3\"\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const oneHandle = await executionContext.evaluateHandle(() => 1);\n   * const twoHandle = await executionContext.evaluateHandle(() => 2);\n   * const result = await executionContext.evaluate(\n   *   (a, b) => a + b,\n   *   oneHandle,\n   *   twoHandle\n   * );\n   * await oneHandle.dispose();\n   * await twoHandle.dispose();\n   * console.log(result); // prints '3'.\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns The result of evaluating the function. If the result is an object,\n   * a vanilla object containing the serializable properties of the result is\n   * returned.\n   */\n  async evaluate(pageFunction, ...args) {\n    return await _assertClassBrand(_ExecutionContext_brand, this, _evaluate).call(this, true, pageFunction, ...args);\n  }\n  /**\n   * Evaluates the given function.\n   *\n   * Unlike {@link ExecutionContext.evaluate | evaluate}, this method returns a\n   * handle to the result of the function.\n   *\n   * This method may be better suited if the object cannot be serialized (e.g.\n   * `Map`) and requires further manipulation.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = await page.mainFrame().executionContext();\n   * const handle: JSHandle<typeof globalThis> = await context.evaluateHandle(\n   *   () => Promise.resolve(self)\n   * );\n   * ```\n   *\n   * @example\n   * A string can also be passed in instead of a function.\n   *\n   * ```ts\n   * const handle: JSHandle<number> = await context.evaluateHandle('1 + 2');\n   * ```\n   *\n   * @example\n   * Handles can also be passed as `args`. They resolve to their referenced object:\n   *\n   * ```ts\n   * const bodyHandle: ElementHandle<HTMLBodyElement> =\n   *   await context.evaluateHandle(() => {\n   *     return document.body;\n   *   });\n   * const stringHandle: JSHandle<string> = await context.evaluateHandle(\n   *   body => body.innerHTML,\n   *   body\n   * );\n   * console.log(await stringHandle.jsonValue()); // prints body's innerHTML\n   * // Always dispose your garbage! :)\n   * await bodyHandle.dispose();\n   * await stringHandle.dispose();\n   * ```\n   *\n   * @param pageFunction - The function to evaluate.\n   * @param args - Additional arguments to pass into the function.\n   * @returns A {@link JSHandle | handle} to the result of evaluating the\n   * function. If the result is a `Node`, then this will return an\n   * {@link ElementHandle | element handle}.\n   */\n  async evaluateHandle(pageFunction, ...args) {\n    return await _assertClassBrand(_ExecutionContext_brand, this, _evaluate).call(this, false, pageFunction, ...args);\n  }\n  [_disposable_js_1$disp]() {\n    _classPrivateFieldGet(_disposables, this).dispose();\n    this.emit('disposed', undefined);\n  }\n}\nasync function _addBinding(binding) {\n  const env_1 = {\n    stack: [],\n    error: void 0,\n    hasError: false\n  };\n  try {\n    if (_classPrivateFieldGet(_bindings, this).has(binding.name)) {\n      return;\n    }\n    const _ = __addDisposableResource(env_1, await _classPrivateFieldGet(_mutex, this).acquire(), false);\n    try {\n      await _classPrivateFieldGet(_client, this).send('Runtime.addBinding', _classPrivateFieldGet(_name, this) ? {\n        name: binding.name,\n        executionContextName: _classPrivateFieldGet(_name, this)\n      } : {\n        name: binding.name,\n        executionContextId: _classPrivateFieldGet(_id, this)\n      });\n      await this.evaluate(utils_js_1.addPageBinding, 'internal', binding.name);\n      _classPrivateFieldGet(_bindings, this).set(binding.name, binding);\n    } catch (error) {\n      // We could have tried to evaluate in a context which was already\n      // destroyed. This happens, for example, if the page is navigated while\n      // we are trying to add the binding\n      if (error instanceof Error) {\n        // Destroyed context.\n        if (error.message.includes('Execution context was destroyed')) {\n          return;\n        }\n        // Missing context.\n        if (error.message.includes('Cannot find context with specified id')) {\n          return;\n        }\n      }\n      (0, util_js_1.debugError)(error);\n    }\n  } catch (e_1) {\n    env_1.error = e_1;\n    env_1.hasError = true;\n  } finally {\n    __disposeResources(env_1);\n  }\n}\nasync function _onBindingCalled(event) {\n  let payload;\n  try {\n    payload = JSON.parse(event.payload);\n  } catch {\n    // The binding was either called by something in the page or it was\n    // called before our wrapper was initialized.\n    return;\n  }\n  const {\n    type,\n    name,\n    seq,\n    args,\n    isTrivial\n  } = payload;\n  if (type !== 'internal') {\n    this.emit('bindingcalled', event);\n    return;\n  }\n  if (!_classPrivateFieldGet(_bindings, this).has(name)) {\n    this.emit('bindingcalled', event);\n    return;\n  }\n  try {\n    if (event.executionContextId !== _classPrivateFieldGet(_id, this)) {\n      return;\n    }\n    const binding = _classPrivateFieldGet(_bindings, this).get(name);\n    await binding?.run(this, seq, args, isTrivial);\n  } catch (err) {\n    (0, util_js_1.debugError)(err);\n  }\n}\nfunction _onConsoleAPI(event) {\n  if (event.executionContextId !== _classPrivateFieldGet(_id, this)) {\n    return;\n  }\n  this.emit('consoleapicalled', event);\n}\nasync function _addBindingWithoutThrowing(binding) {\n  try {\n    await _assertClassBrand(_ExecutionContext_brand, this, _addBinding).call(this, binding);\n  } catch (err) {\n    // If the binding cannot be added, then either the browser doesn't support\n    // bindings (e.g. Firefox) or the context is broken. Either breakage is\n    // okay, so we ignore the error.\n    (0, util_js_1.debugError)(err);\n  }\n}\nasync function _evaluate(returnByValue, pageFunction, ...args) {\n  const sourceUrlComment = (0, util_js_1.getSourceUrlComment)((0, util_js_1.getSourcePuppeteerURLIfAvailable)(pageFunction)?.toString() ?? util_js_1.PuppeteerURL.INTERNAL_URL);\n  if ((0, util_js_1.isString)(pageFunction)) {\n    const contextId = _classPrivateFieldGet(_id, this);\n    const expression = pageFunction;\n    const expressionWithSourceUrl = util_js_1.SOURCE_URL_REGEX.test(expression) ? expression : `${expression}\\n${sourceUrlComment}\\n`;\n    const {\n      exceptionDetails,\n      result: remoteObject\n    } = await _classPrivateFieldGet(_client, this).send('Runtime.evaluate', {\n      expression: expressionWithSourceUrl,\n      contextId,\n      returnByValue,\n      awaitPromise: true,\n      userGesture: true\n    }).catch(rewriteError);\n    if (exceptionDetails) {\n      throw (0, utils_js_1.createEvaluationError)(exceptionDetails);\n    }\n    return returnByValue ? (0, utils_js_1.valueFromRemoteObject)(remoteObject) : _classPrivateFieldGet(_world, this).createCdpHandle(remoteObject);\n  }\n  const functionDeclaration = (0, Function_js_1.stringifyFunction)(pageFunction);\n  const functionDeclarationWithSourceUrl = util_js_1.SOURCE_URL_REGEX.test(functionDeclaration) ? functionDeclaration : `${functionDeclaration}\\n${sourceUrlComment}\\n`;\n  let callFunctionOnPromise;\n  try {\n    callFunctionOnPromise = _classPrivateFieldGet(_client, this).send('Runtime.callFunctionOn', {\n      functionDeclaration: functionDeclarationWithSourceUrl,\n      executionContextId: _classPrivateFieldGet(_id, this),\n      arguments: args.length ? await Promise.all(args.map(convertArgument.bind(this))) : [],\n      returnByValue,\n      awaitPromise: true,\n      userGesture: true\n    });\n  } catch (error) {\n    if (error instanceof TypeError && error.message.startsWith('Converting circular structure to JSON')) {\n      error.message += ' Recursive objects are not allowed.';\n    }\n    throw error;\n  }\n  const {\n    exceptionDetails,\n    result: remoteObject\n  } = await callFunctionOnPromise.catch(rewriteError);\n  if (exceptionDetails) {\n    throw (0, utils_js_1.createEvaluationError)(exceptionDetails);\n  }\n  return returnByValue ? (0, utils_js_1.valueFromRemoteObject)(remoteObject) : _classPrivateFieldGet(_world, this).createCdpHandle(remoteObject);\n  async function convertArgument(arg) {\n    if (arg instanceof LazyArg_js_1.LazyArg) {\n      arg = await arg.get(this);\n    }\n    if (typeof arg === 'bigint') {\n      // eslint-disable-line valid-typeof\n      return {\n        unserializableValue: `${arg.toString()}n`\n      };\n    }\n    if (Object.is(arg, -0)) {\n      return {\n        unserializableValue: '-0'\n      };\n    }\n    if (Object.is(arg, Infinity)) {\n      return {\n        unserializableValue: 'Infinity'\n      };\n    }\n    if (Object.is(arg, -Infinity)) {\n      return {\n        unserializableValue: '-Infinity'\n      };\n    }\n    if (Object.is(arg, NaN)) {\n      return {\n        unserializableValue: 'NaN'\n      };\n    }\n    const objectHandle = arg && (arg instanceof JSHandle_js_1.CdpJSHandle || arg instanceof ElementHandle_js_1.CdpElementHandle) ? arg : null;\n    if (objectHandle) {\n      if (objectHandle.realm !== _classPrivateFieldGet(_world, this)) {\n        throw new Error('JSHandles can be evaluated only in the context they were created!');\n      }\n      if (objectHandle.disposed) {\n        throw new Error('JSHandle is disposed!');\n      }\n      if (objectHandle.remoteObject().unserializableValue) {\n        return {\n          unserializableValue: objectHandle.remoteObject().unserializableValue\n        };\n      }\n      if (!objectHandle.remoteObject().objectId) {\n        return {\n          value: objectHandle.remoteObject().value\n        };\n      }\n      return {\n        objectId: objectHandle.remoteObject().objectId\n      };\n    }\n    return {\n      value: arg\n    };\n  }\n}\nexports.ExecutionContext = ExecutionContext;\nconst rewriteError = error => {\n  if (error.message.includes('Object reference chain is too long')) {\n    return {\n      result: {\n        type: 'undefined'\n      }\n    };\n  }\n  if (error.message.includes(\"Object couldn't be returned by value\")) {\n    return {\n      result: {\n        type: 'undefined'\n      }\n    };\n  }\n  if (error.message.endsWith('Cannot find context with specified id') || error.message.endsWith('Inspected target navigated or closed')) {\n    throw new Error('Execution context was destroyed, most likely because of a navigation.');\n  }\n  throw error;\n};","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_classPrivateFieldInitSpec","_assertClassBrand","_classPrivateFieldGet","_classPrivateFieldSet","_disposable_js_1$disp","CDPSession_js_1","EventEmitter_js_1","LazyArg_js_1","ScriptInjector_js_1","util_js_1","AsyncIterableUtil_js_1","disposable_js_1","Function_js_1","Mutex_js_1","AriaQueryHandler_js_1","Binding_js_1","ElementHandle_js_1","JSHandle_js_1","utils_js_1","ariaQuerySelectorBinding","Binding","ARIAQueryHandler","queryOne","ariaQuerySelectorAllBinding","element","selector","results","queryAll","realm","evaluateHandle","elements","AsyncIterableUtil","collect","_client","WeakMap","_world","_id","_name","_disposables","_bindings","_mutex","_ExecutionContext_brand","WeakSet","_bindingsInstalled","_puppeteerUtil","disposeSymbol","ExecutionContext","EventEmitter","constructor","client","contextPayload","world","DisposableStack","Map","Mutex","id","name","clientEmitter","use","on","_onBindingCalled","bind","event","executionContextId","_onConsoleAPI","CDPSessionEvent","Disconnected","puppeteerUtil","promise","Promise","resolve","all","_addBindingWithoutThrowing","call","scriptInjector","inject","script","then","handle","dispose","evaluate","pageFunction","args","_evaluate","emit","undefined","_addBinding","binding","has","_","__addDisposableResource","env_1","acquire","send","executionContextName","addPageBinding","set","error","Error","message","includes","debugError","payload","JSON","parse","type","seq","isTrivial","get","run","err","returnByValue","sourceUrlComment","getSourceUrlComment","getSourcePuppeteerURLIfAvailable","toString","PuppeteerURL","INTERNAL_URL","isString","contextId","expression","expressionWithSourceUrl","SOURCE_URL_REGEX","test","exceptionDetails","result","remoteObject","awaitPromise","userGesture","catch","rewriteError","createEvaluationError","valueFromRemoteObject","createCdpHandle","functionDeclaration","stringifyFunction","functionDeclarationWithSourceUrl","callFunctionOnPromise","arguments","length","map","convertArgument","TypeError","startsWith","arg","LazyArg","unserializableValue","Object","is","Infinity","NaN","objectHandle","CdpJSHandle","CdpElementHandle","disposed","objectId","value","exports","endsWith"],"sources":["../../../../src/cdp/ExecutionContext.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}