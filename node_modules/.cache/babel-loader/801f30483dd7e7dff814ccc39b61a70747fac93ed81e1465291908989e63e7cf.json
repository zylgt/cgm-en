{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nvar _classPrivateFieldSet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldSet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FileChooser = void 0;\nconst assert_js_1 = require(\"../util/assert.js\");\n/**\n * File choosers let you react to the page requesting for a file.\n *\n * @remarks\n * `FileChooser` instances are returned via the {@link Page.waitForFileChooser} method.\n *\n * In browsers, only one file chooser can be opened at a time.\n * All file choosers must be accepted or canceled. Not doing so will prevent\n * subsequent file choosers from appearing.\n *\n * @example\n *\n * ```ts\n * const [fileChooser] = await Promise.all([\n *   page.waitForFileChooser(),\n *   page.click('#upload-file-button'), // some button that triggers file selection\n * ]);\n * await fileChooser.accept(['/tmp/myfile.pdf']);\n * ```\n *\n * @public\n */\nvar _element = /*#__PURE__*/new WeakMap();\nvar _multiple = /*#__PURE__*/new WeakMap();\nvar _handled = /*#__PURE__*/new WeakMap();\nclass FileChooser {\n  /**\n   * @internal\n   */\n  constructor(element, event) {\n    _classPrivateFieldInitSpec(this, _element, void 0);\n    _classPrivateFieldInitSpec(this, _multiple, void 0);\n    _classPrivateFieldInitSpec(this, _handled, false);\n    _classPrivateFieldSet(_element, this, element);\n    _classPrivateFieldSet(_multiple, this, event.mode !== 'selectSingle');\n  }\n  /**\n   * Whether file chooser allow for\n   * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#attr-multiple | multiple}\n   * file selection.\n   */\n  isMultiple() {\n    return _classPrivateFieldGet(_multiple, this);\n  }\n  /**\n   * Accept the file chooser request with the given file paths.\n   *\n   * @remarks This will not validate whether the file paths exists. Also, if a\n   * path is relative, then it is resolved against the\n   * {@link https://nodejs.org/api/process.html#process_process_cwd | current working directory}.\n   * For locals script connecting to remote chrome environments, paths must be\n   * absolute.\n   */\n  async accept(paths) {\n    (0, assert_js_1.assert)(!_classPrivateFieldGet(_handled, this), 'Cannot accept FileChooser which is already handled!');\n    _classPrivateFieldSet(_handled, this, true);\n    await _classPrivateFieldGet(_element, this).uploadFile(...paths);\n  }\n  /**\n   * Closes the file chooser without selecting any files.\n   */\n  async cancel() {\n    (0, assert_js_1.assert)(!_classPrivateFieldGet(_handled, this), 'Cannot cancel FileChooser which is already handled!');\n    _classPrivateFieldSet(_handled, this, true);\n    // XXX: These events should converted to trusted events. Perhaps do this\n    // in `DOM.setFileInputFiles`?\n    await _classPrivateFieldGet(_element, this).evaluate(element => {\n      element.dispatchEvent(new Event('cancel', {\n        bubbles: true\n      }));\n    });\n  }\n}\nexports.FileChooser = FileChooser;","map":{"version":3,"names":["_classPrivateFieldInitSpec","require","default","_classPrivateFieldGet","_classPrivateFieldSet","assert_js_1","_element","WeakMap","_multiple","_handled","FileChooser","constructor","element","event","mode","isMultiple","accept","paths","assert","uploadFile","cancel","evaluate","dispatchEvent","Event","bubbles","exports"],"sources":["../../../../src/common/FileChooser.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;AAAA,IAAAA,0BAAA,GAAAC,OAAA,8GAAAC,OAAA;AAAA,IAAAC,qBAAA,GAAAF,OAAA,0GAAAC,OAAA;AAAA,IAAAE,qBAAA,GAAAH,OAAA,0GAAAC,OAAA;;;;;AASA,MAAAG,WAAA,GAAAJ,OAAA;AAEA;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAK,QAAA,oBAAAC,OAAA;AAAA,IAAAC,SAAA,oBAAAD,OAAA;AAAA,IAAAE,QAAA,oBAAAF,OAAA;AAsBA,MAAaG,WAAW;EAKtB;;;EAGAC,YACEC,OAAwC,EACxCC,KAA2C;IAAAb,0BAAA,OAAAM,QAAA;IAAAN,0BAAA,OAAAQ,SAAA;IAAAR,0BAAA,OAAAS,QAAA,EAPlC,KAAK;IASdL,qBAAA,CAAAE,QAAA,MAAI,EAAYM,OAAO;IACvBR,qBAAA,CAAAI,SAAA,MAAI,EAAaK,KAAK,CAACC,IAAI,KAAK,cAAc;EAChD;EAEA;;;;;EAKAC,UAAUA,CAAA;IACR,OAAAZ,qBAAA,CAAAK,SAAA,EAAO,IAAI;EACb;EAEA;;;;;;;;;EASA,MAAMQ,MAAMA,CAACC,KAAe;IAC1B,IAAAZ,WAAA,CAAAa,MAAM,EACJ,CAAAf,qBAAA,CAAAM,QAAA,EAAC,IAAI,CAAS,EACd,qDAAqD,CACtD;IACDL,qBAAA,CAAAK,QAAA,MAAI,EAAY,IAAI;IACpB,MAAMN,qBAAA,CAAAG,QAAA,MAAI,EAAUa,UAAU,CAAC,GAAGF,KAAK,CAAC;EAC1C;EAEA;;;EAGA,MAAMG,MAAMA,CAAA;IACV,IAAAf,WAAA,CAAAa,MAAM,EACJ,CAAAf,qBAAA,CAAAM,QAAA,EAAC,IAAI,CAAS,EACd,qDAAqD,CACtD;IACDL,qBAAA,CAAAK,QAAA,MAAI,EAAY,IAAI;IACpB;IACA;IACA,MAAMN,qBAAA,CAAAG,QAAA,MAAI,EAAUe,QAAQ,CAACT,OAAO,IAAG;MACrCA,OAAO,CAACU,aAAa,CAAC,IAAIC,KAAK,CAAC,QAAQ,EAAE;QAACC,OAAO,EAAE;MAAI,CAAC,CAAC,CAAC;IAC7D,CAAC,CAAC;EACJ;;AAzDFC,OAAA,CAAAf,WAAA,GAAAA,WAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}