{"ast":null,"code":"\"use strict\";\n\nvar _classPrivateFieldInitSpec = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classPrivateFieldGet = require(\"/Users/hexuemin/Desktop/jiuan/CGM/CGMWeb/node_modules/@babel/runtime/helpers/classPrivateFieldGet2.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PreloadScriptStorage = void 0;\n/**\n * Container class for preload scripts.\n */\nvar _scripts = /*#__PURE__*/new WeakMap();\nclass PreloadScriptStorage {\n  constructor() {\n    /** Tracks all BiDi preload scripts.  */\n    _classPrivateFieldInitSpec(this, _scripts, new Set());\n  }\n  /**\n   * Finds all entries that match the given filter (OR logic).\n   */\n  find(filter) {\n    if (!filter) {\n      return [..._classPrivateFieldGet(_scripts, this)];\n    }\n    return [..._classPrivateFieldGet(_scripts, this)].filter(script => {\n      if (filter.id !== undefined && filter.id === script.id) {\n        return true;\n      }\n      if (filter.targetId !== undefined && script.targetIds.has(filter.targetId)) {\n        return true;\n      }\n      if (filter.global !== undefined && (\n      // Global scripts have no contexts\n      filter.global && script.contexts === undefined ||\n      // Non global scripts always have contexts\n      !filter.global && script.contexts !== undefined)) {\n        return true;\n      }\n      return false;\n    });\n  }\n  add(preloadScript) {\n    _classPrivateFieldGet(_scripts, this).add(preloadScript);\n  }\n  /** Deletes all BiDi preload script entries that match the given filter. */\n  remove(filter) {\n    for (const preloadScript of this.find(filter)) {\n      _classPrivateFieldGet(_scripts, this).delete(preloadScript);\n    }\n  }\n}\nexports.PreloadScriptStorage = PreloadScriptStorage;","map":{"version":3,"names":["_scripts","WeakMap","PreloadScriptStorage","constructor","_classPrivateFieldInitSpec","Set","find","filter","_classPrivateFieldGet","script","id","undefined","targetId","targetIds","has","global","contexts","add","preloadScript","remove","delete","exports"],"sources":["../../../../../src/bidiMapper/modules/script/PreloadScriptStorage.ts"],"sourcesContent":[null],"mappings":";;;;;;;;AA2BA;;;AAAA,IAAAA,QAAA,oBAAAC,OAAA;AAGA,MAAaC,oBAAoB;EAAAC,YAAA;IAC/B;IAAAC,0BAAA,OAAAJ,QAAA,EACoB,IAAIK,GAAG,EAAiB;EAAA;EAE5C;;;EAGAC,IAAIA,CAACC,MAA4B;IAC/B,IAAI,CAACA,MAAM,EAAE;MACX,OAAO,CAAC,GAAAC,qBAAA,CAAAR,QAAA,EAAG,IAAI,CAAS,CAAC;IAC3B;IAEA,OAAO,CAAC,GAAAQ,qBAAA,CAAAR,QAAA,EAAG,IAAI,CAAS,CAAC,CAACO,MAAM,CAAEE,MAAM,IAAI;MAC1C,IAAIF,MAAM,CAACG,EAAE,KAAKC,SAAS,IAAIJ,MAAM,CAACG,EAAE,KAAKD,MAAM,CAACC,EAAE,EAAE;QACtD,OAAO,IAAI;MACb;MACA,IACEH,MAAM,CAACK,QAAQ,KAAKD,SAAS,IAC7BF,MAAM,CAACI,SAAS,CAACC,GAAG,CAACP,MAAM,CAACK,QAAQ,CAAC,EACrC;QACA,OAAO,IAAI;MACb;MACA,IACEL,MAAM,CAACQ,MAAM,KAAKJ,SAAS;MAC3B;MACEJ,MAAM,CAACQ,MAAM,IAAIN,MAAM,CAACO,QAAQ,KAAKL,SAAS;MAC9C;MACC,CAACJ,MAAM,CAACQ,MAAM,IAAIN,MAAM,CAACO,QAAQ,KAAKL,SAAU,CAAC,EACpD;QACA,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC,CAAC;EACJ;EAEAM,GAAGA,CAACC,aAA4B;IAC9BV,qBAAA,CAAAR,QAAA,MAAI,EAAUiB,GAAG,CAACC,aAAa,CAAC;EAClC;EAEA;EACAC,MAAMA,CAACZ,MAA4B;IACjC,KAAK,MAAMW,aAAa,IAAI,IAAI,CAACZ,IAAI,CAACC,MAAM,CAAC,EAAE;MAC7CC,qBAAA,CAAAR,QAAA,MAAI,EAAUoB,MAAM,CAACF,aAAa,CAAC;IACrC;EACF;;AA5CFG,OAAA,CAAAnB,oBAAA,GAAAA,oBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}