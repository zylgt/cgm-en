{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookies from 'js-cookie';\nimport { removeToken } from '@/utils/auth';\nimport maskPhoneNumber from '@/utils/phone';\nimport Horizontal from \"./horizontal\";\nimport Vertical from \"./vertical\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  data() {\n    return {\n      height: 1080,\n      language: Cookies.get('language') ? Cookies.get('language') : navigator.language,\n      name: Cookies.get(\"username\") ? Cookies.get(\"username\").charAt(0) : '游',\n      menuList: [],\n      username: Cookies.get(\"username\") ? maskPhoneNumber(Cookies.get(\"username\")) : '游'\n    };\n  },\n  computed: {\n    ...mapGetters(['PageHeight'])\n  },\n  components: {\n    Horizontal,\n    Vertical\n  },\n  created() {\n    this.setSendChildren();\n  },\n  mounted() {},\n  methods: {\n    userCommand(command) {\n      if (command == 'signout') {\n        this.$message({\n          type: 'success',\n          message: '退出成功'\n        });\n        this.$websocket.close();\n        this.$router.push('/login');\n        removeToken();\n      } else {\n        this.changeDialog = true;\n      }\n    },\n    languageCommand(commoand) {\n      this.language = commoand;\n      if (commoand == 'en') {\n        this.$i18n.locale = 'en';\n        Cookies.set('language', 'en');\n      } else {\n        this.$i18n.locale = 'zh-cn';\n        Cookies.set('language', 'zh-cn');\n      }\n    },\n    // 传送当前子级数据到菜单中\n    setSendChildren() {\n      let path = this.$route.path;\n      let columnsAsideList = this.$router.options.routes[1].children;\n      const currentPathSplit = path.split(\"/\");\n      let currentData = {};\n      columnsAsideList.map((v, k) => {\n        if (v.path === `/${currentPathSplit[1]}`) {\n          v[\"k\"] = k;\n          currentData[\"item\"] = [{\n            ...v\n          }];\n          currentData[\"children\"] = [{\n            ...v\n          }];\n          if (v.children) {\n            currentData[\"children\"] = v.children;\n          } else {\n            currentData[\"children\"] = [];\n          }\n        }\n      });\n      this.menuList = currentData;\n      return currentData;\n    }\n  },\n  watch: {\n    // 监听路由的变化\n    $route: {\n      handler(to) {\n        this.setSendChildren(to.path);\n      },\n      deep: true\n    }\n  }\n};","map":{"version":3,"names":["Cookies","removeToken","maskPhoneNumber","Horizontal","Vertical","mapGetters","data","height","language","get","navigator","name","charAt","menuList","username","computed","components","created","setSendChildren","mounted","methods","userCommand","command","$message","type","message","$websocket","close","$router","push","changeDialog","languageCommand","commoand","$i18n","locale","set","path","$route","columnsAsideList","options","routes","children","currentPathSplit","split","currentData","map","v","k","watch","handler","to","deep"],"sources":["src/views/layout/layout.vue"],"sourcesContent":["<template>\n    <el-container class='layout'>\n        <el-header class='header' height='84px' >\n            <div class='header-title' >\n                <img src=\"~@/assets/image/logo.png\" alt=\"\" class='logo' >\n                iHealth CGM\n            </div>\n            <Horizontal/>\n            <div class='header-other '>\n                <div class='header-user' >\n                    <el-avatar size='medium'>{{name}} </el-avatar>\n                    <div class='username' >{{username}}</div>\n                    <el-dropdown  @command=\"userCommand\" >\n                        <div class='user-info' >\n                            <i class=\"el-icon-more user-more\"></i>\n                        </div>\n                        <el-dropdown-menu slot=\"dropdown\">\n                            <el-dropdown-item command=\"change\">{{$t(\"message.changePassword\")}}</el-dropdown-item>\n                            <el-dropdown-item command=\"signout\">{{$t(\"message.logout\")}}</el-dropdown-item>\n                        </el-dropdown-menu>\n                    </el-dropdown>\n                </div>\n            </div>\n        </el-header>\n        <el-container :style='{\"height\":PageHeight+\"px\"}'>\n            <Vertical :menuList='menuList' v-if='menuList.children.length>0' />\n            <el-main class='main'  >\n                 <router-view></router-view>\n            </el-main>\n        </el-container>\n      \n    </el-container>\n</template>\n<script>\nimport Cookies from 'js-cookie'\nimport {removeToken} from '@/utils/auth'\nimport maskPhoneNumber from '@/utils/phone'\nimport Horizontal from \"./horizontal\"\nimport Vertical from \"./vertical\"\nimport {mapGetters} from \"vuex\"\nexport default {\n    data(){\n        return{\n            height:1080,\n            language: Cookies.get('language')?Cookies.get('language'):navigator.language,\n            name: Cookies.get(\"username\")?Cookies.get(\"username\").charAt(0):'游',\n            menuList:[],\n            username:Cookies.get(\"username\")? maskPhoneNumber(Cookies.get(\"username\")) :'游'\n        }\n    },\n    computed:{\n         ...mapGetters([\n            'PageHeight']),\n    },\n    components:{\n        Horizontal,\n        Vertical\n    },\n    created(){\n        this.setSendChildren()\n    },\n    mounted(){\n    },\n    methods:{\n        userCommand(command){\n            if(command=='signout'){\n                this.$message({\n                    type: 'success',\n                    message: '退出成功'\n                });\n                this.$websocket.close()\n                this.$router.push('/login');\n                removeToken()\n            }else{\n                this.changeDialog = true\n            }\n            \n        },\n        languageCommand(commoand){\n             this.language=commoand\n            if(commoand=='en'){\n                this.$i18n.locale='en'\n                Cookies.set('language','en')\n            }else{\n                this.$i18n.locale='zh-cn'\n                Cookies.set('language','zh-cn')\n            }\n        },\n        // 传送当前子级数据到菜单中\n        setSendChildren() {\n            let path = this.$route.path\n            let columnsAsideList= this.$router.options.routes[1].children\n            const currentPathSplit = path.split(\"/\")\n            let currentData = {}\n            columnsAsideList.map((v, k) => {\n                if (v.path === `/${currentPathSplit[1]}`) {\n                    v[\"k\"] = k\n                    currentData[\"item\"] = [{ ...v }]\n                    currentData[\"children\"] = [{ ...v }]\n                    if (v.children){\n                        currentData[\"children\"] = v.children\n                    }else{\n                        currentData[\"children\"] = []\n                    }\n                }\n            })\n            this.menuList = currentData\n            return currentData\n        },\n    },\n    watch: {\n         // 监听路由的变化\n        $route: {\n            handler(to) {\n                this.setSendChildren(to.path)\n            },\n            deep: true\n        }\n    }\n\n    \n}\n</script>\n<style  scoped>\n    .layout{\n        height:100%;\n    }\n    .header{\n        height:84px;\n        display: flex;\n        align-items: center;\n        background: #fff;\n        justify-content: space-between;\n    }\n    .header-title{\n        font-size:24px;\n        color:var(--color-primary);\n        width:230px;\n        font-weight: 440;\n        display: flex;\n        align-items: center;\n    }\n    .logo{\n        margin:0 14px;\n    }\n    .header-other{\n        display: flex;\n        align-items: center;\n        justify-content: flex-end;\n        height:100%;\n    }\n    .language{\n        width:140px;\n        position: relative;\n    }\n    .el-dropdown-link{\n        font-size:var(--fontSize-big);\n    }\n    .header-user{\n        height: 30px;\n        position: relative;\n        display: flex;\n        align-items: center;\n    }\n    .username{\n        font-size:15px;\n        color:var(--color-black-60);\n        font-weight: 700;\n        margin:0 10px;\n    }\n    .user-info{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .user-more{\n        transform: rotate(90deg);\n        font-size:var(--fontSize-big);\n    }\n    .avatars{\n        width:30px;\n        height:30px;\n        border-radius:50%;\n        display: block;\n    }\n    .el-avatar{\n        font-size: 24px;\n    }\n    .contain{\n        width:100%;\n        display: flex;\n        flex-grow: 1;\n    }\n    .main{\n        background:#f7f7f7;\n        padding:30px;\n         overflow-y: auto;\n         height: 100%;\n    }\n    .record-btn{\n        display: flex;\n        justify-content: flex-end;\n    }\n    .box-card{\n        padding:30px 60px;\n    }\n    .el-container{\n        /* overflow-y: auto; */\n    }\n</style>"],"mappings":";AAkCA,OAAAA,OAAA;AACA,SAAAC,WAAA;AACA,OAAAC,eAAA;AACA,OAAAC,UAAA;AACA,OAAAC,QAAA;AACA,SAAAC,UAAA;AACA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,QAAA,EAAAR,OAAA,CAAAS,GAAA,eAAAT,OAAA,CAAAS,GAAA,eAAAC,SAAA,CAAAF,QAAA;MACAG,IAAA,EAAAX,OAAA,CAAAS,GAAA,eAAAT,OAAA,CAAAS,GAAA,aAAAG,MAAA;MACAC,QAAA;MACAC,QAAA,EAAAd,OAAA,CAAAS,GAAA,eAAAP,eAAA,CAAAF,OAAA,CAAAS,GAAA;IACA;EACA;EACAM,QAAA;IACA,GAAAV,UAAA,EACA;EACA;EACAW,UAAA;IACAb,UAAA;IACAC;EACA;EACAa,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,QAAA,GACA;EACAC,OAAA;IACAC,YAAAC,OAAA;MACA,IAAAA,OAAA;QACA,KAAAC,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;QACA,KAAAC,UAAA,CAAAC,KAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA5B,WAAA;MACA;QACA,KAAA6B,YAAA;MACA;IAEA;IACAC,gBAAAC,QAAA;MACA,KAAAxB,QAAA,GAAAwB,QAAA;MACA,IAAAA,QAAA;QACA,KAAAC,KAAA,CAAAC,MAAA;QACAlC,OAAA,CAAAmC,GAAA;MACA;QACA,KAAAF,KAAA,CAAAC,MAAA;QACAlC,OAAA,CAAAmC,GAAA;MACA;IACA;IACA;IACAjB,gBAAA;MACA,IAAAkB,IAAA,QAAAC,MAAA,CAAAD,IAAA;MACA,IAAAE,gBAAA,QAAAV,OAAA,CAAAW,OAAA,CAAAC,MAAA,IAAAC,QAAA;MACA,MAAAC,gBAAA,GAAAN,IAAA,CAAAO,KAAA;MACA,IAAAC,WAAA;MACAN,gBAAA,CAAAO,GAAA,EAAAC,CAAA,EAAAC,CAAA;QACA,IAAAD,CAAA,CAAAV,IAAA,SAAAM,gBAAA;UACAI,CAAA,QAAAC,CAAA;UACAH,WAAA;YAAA,GAAAE;UAAA;UACAF,WAAA;YAAA,GAAAE;UAAA;UACA,IAAAA,CAAA,CAAAL,QAAA;YACAG,WAAA,eAAAE,CAAA,CAAAL,QAAA;UACA;YACAG,WAAA;UACA;QACA;MACA;MACA,KAAA/B,QAAA,GAAA+B,WAAA;MACA,OAAAA,WAAA;IACA;EACA;EACAI,KAAA;IACA;IACAX,MAAA;MACAY,QAAAC,EAAA;QACA,KAAAhC,eAAA,CAAAgC,EAAA,CAAAd,IAAA;MACA;MACAe,IAAA;IACA;EACA;AAGA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}