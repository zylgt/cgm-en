"use strict";(self["webpackChunkCGM3"]=self["webpackChunkCGM3"]||[]).push([[894],{5894:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"userinfobox",attrs:{id:"old_userinfo"}},[e("el-header",{staticClass:"header",attrs:{height:"84px"}},[e("div",{staticClass:"header-title"},[e("img",{staticClass:"logo",attrs:{src:i(8239),alt:""}}),t._v(" iHealth CGM ")]),e("div",{staticClass:"header-other",on:{click:t.logout}},[t._v(" 退出 ")])]),e("div",{staticClass:"userinfo"},[e("div",{staticClass:"userinfo-title"},[t._m(0),e("div",{staticClass:"jump",on:{click:function(e){return t.saveSubmit(!0)}}},[t._v("跳过")])]),e("div",{staticClass:"tips"},[t._v("请填写您的健康信息，将为您制定个性化管理方案！")]),e("div",{staticClass:"step-box"},t._l(t.stepList,(function(i,a){return e("div",{key:a,class:[t.step>a?"active":"","step-item"]})})),0),e("div",{staticClass:"config"},[t.configs.length>t.step-1?e("div",t._l(t.configs,(function(a,s){return e("div",{key:a.config_key},[s+1==t.step?e("div",{staticClass:"config-title"},[t._v(t._s(a.config_name))]):t._e(),t._l(a.items,(function(a,r){return e("div",{key:a.item_key},[s+1==t.step?e("div",{staticClass:"config-item",on:{click:function(e){return t.changeConfig(s,r)}}},[e("div",{staticClass:"config-choose"},[a.checked?e("img",{staticClass:"choose-img",attrs:{src:i(1610),alt:""}}):e("img",{staticClass:"choose-img",attrs:{src:i(6264),alt:""}})]),e("div",{staticClass:"config-text"},[t._v(t._s(a.item_name))])]):t._e()])}))],2)})),0):e("div",{staticClass:"config-message"},[e("div",{staticClass:"config-title"},[t._v("基础信息")]),e("div",{staticClass:"message-box"},[e("el-form",{ref:"formData",attrs:{"label-width":"140px","label-position":"left",model:t.formData}},[e("el-form-item",{attrs:{label:"出生日期"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"未填写","picker-options":t.pickerOptions,"default-value":t.defaultBirthday,"prefix-icon":" ","value-format":"yyyy-MM-dd"},model:{value:t.formData.birthdate,callback:function(e){t.$set(t.formData,"birthdate",e)},expression:"formData.birthdate"}}),e("i",{staticClass:"el-icon-arrow-down picker-date-icon"})],1),e("el-form-item",{attrs:{label:"性别"}},[e("el-select",{attrs:{placeholder:"未填写"},model:{value:t.formData.gender,callback:function(e){t.$set(t.formData,"gender",e)},expression:"formData.gender"}},[e("el-option",{attrs:{label:"男",value:0}},[e("div",{class:[t.formData.gender?"":"active","select-item"]},[t._v("男")])]),e("el-option",{attrs:{label:"女",value:1}},[e("div",[t._v("女")])])],1)],1),e("el-form-item",{attrs:{label:"身高"}},[e("el-select",{attrs:{placeholder:"未填写"},model:{value:t.formData.height,callback:function(e){t.$set(t.formData,"height",e)},expression:"formData.height"}},t._l(t.heightArray,(function(i){return e("el-option",{key:i,attrs:{label:i+"cm",value:i}},[e("div",{class:[175!=i||t.formData.height?"":"active","select-item"]},[t._v(t._s(i)+"cm")])])})),1)],1),e("el-form-item",{attrs:{label:"体重"}},[e("el-select",{attrs:{placeholder:"未填写"},model:{value:t.formData.weight,callback:function(e){t.$set(t.formData,"weight",e)},expression:"formData.weight"}},t._l(t.weightArray,(function(i){return e("el-option",{key:i,attrs:{label:i+"kg",value:i}},[e("div",{class:[60!=i||t.formData.weight?"":"active","select-item"]},[t._v(t._s(i)+"cm")])])})),1)],1),t.diagnosisShow?e("el-form-item",{attrs:{label:"确诊日期"}},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","prefix-icon":" ",placeholder:"未填写","picker-options":t.diagnosisPickerOptions},model:{value:t.formData.diagnosis_date,callback:function(e){t.$set(t.formData,"diagnosis_date",e)},expression:"formData.diagnosis_date"}}),e("i",{staticClass:"el-icon-arrow-down picker-date-icon"})],1):t._e()],1)],1)]),t.step>1?e("div",{staticClass:"config-btn"},[e("el-button",{attrs:{type:"info",round:""},on:{click:t.prevStep}},[t._v("上一步")]),t.step==t.configs.length+1?e("el-button",{attrs:{type:"primary",round:"",loading:t.loading},on:{click:function(e){return t.saveSubmit(!0)}}},[t._v("完成配置")]):e("el-button",{attrs:{type:"primary",round:"",loading:t.loading},on:{click:t.nextStep}},[t._v("下一步")])],1):t._e(),t.step<=1?e("div",{staticClass:"configs-btn"},[e("el-button",{attrs:{type:"primary",round:"",loading:t.loading},on:{click:t.nextStep}},[t._v("下一步")])],1):t._e()])])],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"userinfo-label"},[e("div",{staticClass:"userinf-diver"}),e("div",{staticClass:"userinfo-text"},[t._v("个人信息")])])}],r=(i(4114),i(9569)),n=i(5462),o=i(6265),l={data(){return{stepList:[],step:1,configs:[],loading:!1,pageLoading:!0,formData:{diabetes_type:null,treatment_regimen:[],comorbidities:[],complications:[],birthdate:null,weight:null,height:null,gender:null,diagnosis_date:null,nickname:(0,o.A)(n.A.get("username")),avatar:null},heightArray:[],weightArray:[],defaultBirthday:(new Date).setFullYear((new Date).getFullYear()-40),pickerOptions:{disabledDate(t){return t.getTime()>(new Date).setFullYear((new Date).getFullYear()-4)||t.getTime()<new Date("1900-01-01")}},diagnosisPickerOptions:{disabledDate(t){return t.getTime()<new Date("1900-01-01")||t.getTime()>new Date}}}},computed:{diagnosisShow(){return this.formData.diabetes_type&&0!=this.formData.diabetes_type}},created(){this.getConfig();for(var t=50;t<=255;t++)this.heightArray.push(t);for(t=10;t<=200;t++)this.weightArray.push(t)},methods:{getConfig(){(0,r.Qx)({}).then((t=>{1e3==t.code?(this.stepList=t.data.length+1,this.configs=t.data,this.getInfo()):this.$message({type:"error",message:t.msg})})).catch((t=>{console.log(t)}))},changeConfig(t,e){let i=this.configs[t].items[e];this.formData;if("diabetes_type"==this.configs[t].config_key||0==i.item_key)this.configs[t].items.forEach((t=>{t.checked=!1})),i.checked=!0,"diabetes_type"==this.configs[t].config_key?this.formData.diabetes_type=i.item_key:this.formData[this.configs[t].config_key]=[0];else{i.checked=!i.checked,this.configs[t].items.forEach((t=>{0==t.item_key&&(t.checked=!1)}));let e=this.configs[t].items.filter((t=>t.checked)),a=[];e.forEach((t=>{a.push(t.item_key)})),this.formData[this.configs[t].config_key]=a}this.$set(this.configs[t].items,e,i)},nextStep(){this.step<this.configs.length+1&&(this.step+=1),this.saveSubmit(!1)},prevStep(){this.step>=1&&(this.step-=1)},saveSubmit(t){this.loading=!0,this.formData.height=this.formData.height?Number(this.formData.height):null,this.formData.weight=this.formData.weight?Number(this.formData.weight):null,this.formData.gender=this.formData.gender?Number(this.formData.gender):null,(0,r.M5)(this.formData).then((e=>{this.loading=!1,1e3==e.code?t&&this.$router.push("/"):this.$message({type:"error",message:e.msg})})).catch((t=>{console.log(t)}))},getInfo(){let t=this.configs;(0,r.Vp)().then((e=>{this.pageLoading=!1,1e3==e.code?(this.formData=e.data,t.forEach(((t,i)=>{t.items.forEach((i=>{"diabetes_type"==t.config_key?i.item_key==e.data[t.config_key]&&(i.checked=!0):e.data[t.config_key].length>0&&e.data[t.config_key].forEach((t=>{t==i.item_key&&(i.checked=!0)}))})),this.$set(this.configs,i,t)}))):this.$message({type:"error",message:e.msg})})).catch((t=>{this.pageLoading=!1,console.log(t)}))},logout(){this.$router.push("/login"),removeToken()}}},c=l,g=i(1656),d=(0,g.A)(c,a,s,!1,null,"33f617a3",null),f=d.exports},9569:function(t,e,i){i.d(e,{GQ:function(){return r},M5:function(){return u},Qx:function(){return f},TB:function(){return d},Vp:function(){return h},_E:function(){return l},_d:function(){return n},ct:function(){return s},fR:function(){return o},wO:function(){return c},xw:function(){return g}});var a=i(4751);function s(t){return(0,a.A)({url:"/webuser/login/account",method:"POST",data:t})}function r(t){return(0,a.A)({url:"/webuser/login/phone",method:"POST",data:t})}function n(t){return(0,a.A)({url:"/webuser/regist/phone",method:"POST",data:t})}function o(t){return(0,a.A)({url:"/user/sendsmscode",method:"POST",data:t})}function l(t){return(0,a.A)({url:"/user/verifysmscode",method:"POST",data:t})}function c(t){return(0,a.A)({url:"/user/changepassword",method:"POST",data:t})}function g(t){return(0,a.A)({url:"/user/resetpassword",method:"POST",data:t})}function d(t){return(0,a.A)({url:"/protocol/last",method:"POST",data:t})}function f(t){return(0,a.A)({url:"/user/profile/configs",method:"POST",data:t})}function u(t){return(0,a.A)({url:"/user/profile/save",method:"POST",data:t})}function h(t){return(0,a.A)({url:"/user/profile/get",method:"POST",data:t})}},6265:function(t,e){function i(t){return t.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}e.A=i},8239:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAtCAYAAADV2ImkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANySURBVHgB7ZnPTxNBFMffLiWWWKRVEKlGQBIgwYTikmBiDN2LRAWVo17Qg3pUgn8A3CGe7UW46BGMJAYuLfFkAroHTYQo1gsGFK1piSSUHd+b7m6XstA2pKWb7CfZ7PzYmfnOe2+GhifAHgQmw15wQ0B0QQBU8EIxECGmJkFRrsqRvT4RMhtIqOgRHwGwx8CKJBR2qYrh2lPqNhtB8dGdXSakmfAtJgrPD03obqIqY4NKjzylNxiCpZm5ASawcShBVCbcVXq6J6jMBQfehBvEMuEblDDqFutQrsuKSBUUG4YSRygXnvI3j1tBmAQbgIdQFlHsTbAJGAkDIgZxAOxDUGT2Etwggs1wBBcaR3ChcQQXmqIK9le4odNn/ctVOu6F5kpPtimsBQ+3tUCfv5aXpy93gd/t3tE/1t4Gt8+ehnyRUOz9pnrLvr66WgjWnMg2hbXgyNo6LMY3eLkuQyxRWe6CSpcLDoLkq4KhlibIlz1WZZBIJiEXSHwvWoc2sPAnhs9fQ5CkuX/6xyqs/Ns0xlBo9PlP8TBYiieMMeZxS4kEN1wmlha+U3+GD9RpPnZUmyj16NalhV92SVgv54uOnG+F4Mlq3kfvJfRSPLkNLy5KfGM6HlfaQ+RBj1a+QZvw+fiY4bZWY8NmcvLrg3MNOEna4nUVbs0aXphHq4aWo7w++vkL32xk7ReMLX5Nbcp9hJ8Hc3ySVSM/18GDmwgtfzfazXPp48hreQt+onyClc20S0Od7ZrgKuhEtz7T6gTT3g/xcJHb53/HuCdywRw2ZCCzV/ISvB9hkzV1SGh3TTX0vn3H66EcBefCge7h1yurXJxuQX574ONxlRmHlvr8FjdNfGvLsj0blhYm11Dg87IpFDL7Kb7IuqN4L5MwcuPwx0WY1jYSkS/BAoZE6ooUUGQSN5Kalw4pfU/fDGHI0Xz6mnxDWE6Y6jrChdkIAxvh/JYoNI7gQuMILjSO4EJDgqNgE/AvnCIyxubAJghcsArjYBMw3/GKpww6ZiNhLAShhGEMoh96go380DFgg1DiMJXJ9OaClSuygv+OvwelCmrT83XGtYYN4xgj/WR6KBHwVsDMKOt/j9r0th33MCXwyPR4c0zQx3BI8LUZG2EbrFG5lk4qEsJ+AzF/F8QvApgIKUpmVGU8ZavAJuab+2VLg/0HewZV0gjTFH8AAAAASUVORK5CYII="},6264:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADTSURBVHgBrZUJDoMwDAQ3BIR6/P+nPWgLqRfZKK0IlzzSqvfENYkJKBMljaSWVJIgSZJe85IMcz8MM+9RcFLZGhQ/dbGilNVdML9YCVZ7Q1Z1/BNedwqtMLbpA6240g/4eMZxrGXTC9Jmz49SaybRlouyhdaktmU8oCtQFuFLpNSrSiN4C0coHeBLorSHL71JE3wYT1Wlwg4+cMBMV744xnbw1vzsUbaBg2HvQIEW9IC2MZemg+LF0Wdf4F/YetLYtjtWhnQOz3Gjclsgv510KOyaL+goLybr/6pLAAAAAElFTkSuQmCC"},1610:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIFSURBVHgBtZW/UxNREMe/+4KjODBzWikZmaOyJAP25AqHsbCwxEYqKeU/IPwHWmoFDZQWFI5jcdAncLQ0nghRGwyTABlI7rF7w80k716O8Os7k+zdvt1P9t7b2xB6qPDVd9QQZhHRlCYUCHDFr4GQTUjQy1Eb68ErL7Tlkx2oPjBinikOLhNRafPl1GImuPDNd1WOfFxUdwWFUVt7ndXTLUCtcJV4bwgVxYXJVsrNgHxN/NhYgNauGTl8bwBvR/OYfOTEH9FOvYGV3T2sVf/Z4Q8xz7ZEF1vw04wYGXyAL5PjeMrWpupJE3OV7dgaqkVHekypHIq2xCxo8sOfOUaeypCjBjGrNOidufJ65EkmtBM+8yyf8nOvFxVZDmxmNI9+9eJxutVJ0bh0hWsuPB8eQr9KDtWQq3BHEnBoOiv/a+hXO42GzR0qfvcC01s+6B+88ms/5dMxuK03zIXV3X38aTZxmaocs1b9mwa39bKK7mOJr7tKrLdaeF/ezoQLdI5jemg9HkIT3/0Sj78FW4T0tLRf0ill3v/KwSFWf++hftZKJ2i9uDntlWJwwfcdOqUtohsNIWYi3Joujsl13G6B59V0pD1ZwDUlucJI7lODnt8a/6qVJ1DroO9U1p53AfnQSetP0TE+Bm+8rgagXklSPZsi5eIh5Xb+mfITBZG06QmWTGCicz80zzxVqvYSAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=894.a3aa483d.js.map