{"version":3,"file":"js/849.40b3a7a3.js","mappings":"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","sources":["webpack://CGM3/./src/views/components/Empty/empty.vue","webpack://CGM3/./src/views/components/Empty/empty.vue?497c","webpack://CGM3/./src/utils/algorithm/TIR.js","webpack://CGM3/./src/views/report/components/Progress.vue","webpack://CGM3/src/views/report/components/Progress.vue","webpack://CGM3/./src/views/report/components/Progress.vue?21d5","webpack://CGM3/./src/views/report/components/Progress.vue?1d58","webpack://CGM3/./src/views/report/mixin.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"empty\"},[_c('img',{staticClass:\"empty-icon\",attrs:{\"src\":require(\"@/assets/image/empty-icon.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"empty-text\"},[_vm._v(\"暂无数据\")])])\n}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./empty.vue?vue&type=template&id=c30a6362&scoped=true\"\nvar script = {}\nimport style0 from \"./empty.vue?vue&type=style&index=0&id=c30a6362&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c30a6362\",\n  null\n  \n)\n\nexport default component.exports","/* 本文件提供计算TIR的方法\n */\n\n/**\n * 用于表示TIR分布的结果\n *\n * @class TIRResult\n */\nclass TIRResult {\n  constructor(veryHighCount, highCount, normalCount, lowCount, veryLowCount,arrayLength) {\n    this.veryHighRate = veryHighCount / arrayLength;\n    this.highRate = highCount / arrayLength;\n    this.normalRate = normalCount / arrayLength;\n    this.lowRate = lowCount / arrayLength;\n    this.veryLowRate = veryLowCount / arrayLength;\n    this.veryHighDuration = veryHighCount\n    this.highDuration = highCount\n    this.normalDuration = normalCount\n    this.lowDuration = lowCount\n    this.veryLowDuration = veryLowCount\n  }\n}\n\n/**\n * 用于计算TIR分布\n *\n * @class TIRUtils\n */\nclass TIRUtils {\n  static getTIRResult(dataArray, normalHigh = 180, normalLow = 70) {\n    // 检查dataArray是否是数组且不为空\n    if (!Array.isArray(dataArray) || dataArray.length === 0) {\n      return null;\n    }\n\n    // 检查dataArray的所有元素是否都是数值\n    if (!dataArray.every(element => typeof element === 'number')) {\n      return null;\n    }\n\n    // 过滤出数组中属于40到400之间的数值\n    let filteredArray = dataArray.filter(val => val >= 40 && val <= 400);\n    if (filteredArray.length === 0) {\n      return null;\n    }\n\n    const arrayLength = filteredArray.length;\n\n    const x1 = 250;\n    const x2 = normalHigh;\n    const x3 = normalLow;\n    const x4 = 54;\n\n    // 初始化计数器\n    let veryHighCount = 0.0;\n    let highCount = 0.0;\n    let normalCount = 0.0;\n    let lowCount = 0.0;\n    let veryLowCount = 0.0;\n\n    // 遍历数组，统计各区间的数量\n    filteredArray.forEach(value => {\n      if (value > x1) {\n        veryHighCount++;\n      } else if (value > x2 && value <= x1) {\n        highCount++;\n      } else if (value >= x3 && value <= x2) {\n        normalCount++;\n      } else if (value >= x4 && value < x3) {\n        lowCount++;\n      } else if (value < x4) {\n        veryLowCount++;\n      }\n    });\n\n    return new TIRResult(\n      veryHighCount,\n      highCount,\n      normalCount,\n      lowCount,\n      veryLowCount,\n      arrayLength\n    );\n  }\n}\n\nexport {TIRResult, TIRUtils};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"opacity-mask\"}),_c('div',{staticClass:\"progress-box\"},[_c('img',{staticClass:\"data-loading\",attrs:{\"src\":require(\"@/assets/image/data-loading.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"cgm-progress\"},[_c('div',{staticClass:\"cgm-bg-progress\"},[_c('div',{staticClass:\"cgm-resulr-progress\",style:({\"width\":_vm.percentage*4+\"px\"})})]),_c('div',{staticClass:\"progress-result\"},[_vm._v(_vm._s(_vm.percentage)+\"%\")])]),_c('div',{staticClass:\"tips\"},[_vm._v(\"正在加载，请稍等\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class='progress' >\n       <div class='opacity-mask' ></div>\n       <div class='progress-box' >\n            <img src=\"~@/assets/image/data-loading.png\" alt=\"\" class='data-loading'>\n            <div class='cgm-progress' >\n                <div class='cgm-bg-progress' >\n                    <div class='cgm-resulr-progress' :style='{\"width\":percentage*4+\"px\"}'></div>\n                </div>\n                <div class='progress-result' >{{percentage}}%</div>\n            </div>\n            <div class='tips' >正在加载，请稍等</div>\n        </div> \n    </div>\n</template>\n<script>\nexport default {\n    props:{\n        percentage:{\n            type:Number\n        }\n    },\n\n}\n</script>\n<style  scoped>\n    .opacity-mask{\n        width:100%;\n        height:100%;\n        background:rgba(0,0,0,0);\n        position: fixed;\n        left:0;\n        top:0;\n        z-index:9;\n    }\n    .progress-box{\n        width:100%;\n        height:540px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        background:#fff;\n        border-radius:10px;\n    }\n    .data-loading{\n        width:80px;\n        height:80px;\n        margin-bottom:30px;\n        -webkit-animation: rotate 1s linear;\n        -moz-animation: rotate 1s linear;\n        animation: rotate 1s linear;\n        -webkit-animation-iteration-count: infinite;\n        -moz-animation-iteration-count: infinite;\n        animation-iteration-count: infinite;\n    }\n    .tips{\n        text-align: center;\n        margin-top:30px;\n        color:var(--color-primary);\n        font-size:var(--fontSize-max);\n    }\n      @keyframes rotate {\n        0% {\n        transform: rotate(0deg);\n        }\n    \n        50% {\n            transform: rotate(180deg);\n        }\n    \n        100% {\n            transform: rotate(360deg);\n        }\n    }\n    .cgm-progress{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .cgm-bg-progress{\n        width:400px;\n        margin-right:10px;\n        position: relative;\n        border-radius:80px;\n        background:#eaeaea;\n        height:12px;\n    }\n    .cgm-resulr-progress{\n        height: 12px;\n        border-radius:80px;\n        background:var(--color-primary);\n    }\n    .progress-result{\n        font-size:var(--fontSize-max);\n        color:var(--color-primary);\n        width:50px;\n    }\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Progress.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Progress.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Progress.vue?vue&type=template&id=273283a2&scoped=true\"\nimport script from \"./Progress.vue?vue&type=script&lang=js\"\nexport * from \"./Progress.vue?vue&type=script&lang=js\"\nimport style0 from \"./Progress.vue?vue&type=style&index=0&id=273283a2&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"273283a2\",\n  null\n  \n)\n\nexport default component.exports","import {formatDate,formatTime} from '@/utils/formatTime'\nimport {mapGetters} from \"vuex\"\nimport Progress from '@/views/report/components/Progress'\nimport {getAgpInfo,getEvent} from '@/api/dataApi'\nvar progressTimer = null //请求进度条定时器\nexport default{\n    data(){\n        return{\n            pickerOptions: {\n                shortcuts: [{\n                    text: '最近7天',\n                    onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n                    picker.$emit('pick', [start, end]);\n                    }\n                },{\n                    text: '最近14天',\n                    onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 14);\n                    picker.$emit('pick', [start, end]);\n                    }\n                }, {\n                    text: '最近30天',\n                    onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n                    picker.$emit('pick', [start, end]);\n                    }\n                }, {\n                    text: '最近90天',\n                    onClick(picker) {\n                    const end = new Date();\n                    const start = new Date();\n                    start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n                    picker.$emit('pick', [start, end]);\n                    }\n                }]\n            },  //日期选择快速选项\n            agpDate:['',''], //日期选中值\n            dayDate:14,//天数\n            checkAll:false, //下载打印全选\n            isIndeterminate: true, //全选框配置\n            downloadList:['AGP报告','每日分析','多日血糖分析','报告解读','饮食分析'], //下载，打印选项\n            checkedDowns:[], //复选框选中项\n            dialogVisible:false, //下载打印弹窗开关\n            dialogType:\"\", // print 打印 download 下载\n            empty:true,\n            downProgress:0,\n            progressShow:false\n        }\n    },\n    components: {\n        Progress\n    },\n    computed:{\n        ...mapGetters([\n           'unit','targetScope']),\n    },\n    mounted() {\n        let end_ts = new Date()\n        let start_ts = new Date().setDate(end_ts.getDate() - 13)\n        this.chooseDay(new Date(start_ts),end_ts)\n        this.agpDate = [formatDate(start_ts,\"YYYY-mm-dd\"), formatDate(end_ts,\"YYYY-mm-dd\")] \n        this.chooseGetData()\n    },\n    methods: {\n         // 选择时间\n        changeDate(e){\n            this.chooseDay(new Date(e[0]), new Date(e[1]))\n            this.chooseGetData()\n        },\n        // 选择天数\n        chooseDay(date1,date2){\n            let s_date = date1.setHours(0,0,0)/1000\n            let e_date = date2.setHours(23,59,59)/1000\n            let oneDay = 24 * 60 * 60 ; // 每天的毫秒数\n            let diff = Math.abs(s_date - e_date); // 计算差值的绝对值\n            this.dayDate  = Math.ceil(diff / oneDay)\n        },\n        // 判断从哪里拉取数据\n        chooseGetData(){\n            if( _.indexOf(this.$store.state.report.chooseDateList,this.agpDate.join('/'))==-1){\n                this.getData()\n                this.getEventList()\n            }else{\n                let result  = this.$store.state.report.data[this.agpDate.join('/')]\n                let events  = this.$store.state.report.events[this.agpDate.join('/')]\n                if(result.length>0){\n                    this.empty = false\n                }else{\n                    this.empty = true\n                }\n                this.handelTemplateDay(result)\n                this.handelEventDay(events)\n                this.info =  this.$store.state.report.info[this.agpDate.join('/')]\n            }\n        },\n        // 从云拉取数据\n        getData(){\n            let that = this\n            this.progressShow = true\n            this.downProgress = 0\n            progressTimer = setInterval(function(){\n               let downProgress = that.downProgress\n               downProgress += 1\n               if(downProgress>=90){\n                    downProgress = 90\n               }\n               that.downProgress = downProgress\n            },100)\n            let s = new Date(this.agpDate[0])\n            let e = new Date(this.agpDate[1])\n            let start_ts = s.setHours(0,0,0)/1000\n            let end_ts = e.setHours(23,59,59)/1000\n            getAgpInfo({start_ts:start_ts,end_ts:end_ts}).then(response => {\n                    clearInterval(progressTimer)\n                    this.downProgress = 100\n                    setTimeout(function(){that.progressShow = false},30)\n                    if(response.code == 1000){\n                        if(response.data.devices.length>0){\n                            response.data.devices.forEach(item=>{\n                                item.upDate = formatDate(item.update_ts*1000,\"YYYY年mm月dd日\")\n                            })\n                        }\n                        let params = {\n                            nickname:response.data.nickname,\n                            diabetes_type:response.data.diabetes_type,\n                            age:response.data.age,\n                            diabetes_year:response.data.diabetes_year,\n                            glucose_range_lower_limit:response.data.glucose_range_lower_limit,\n                            glucose_range_lupper_limit:response.data.glucose_range_lupper_limit,\n                            device:response.data.devices\n                        }\n                        this.$store.dispatch('setInfo',{key:this.agpDate.join('/'),value:params}) //处理完数据存vuex\n                        this.$store.dispatch('setTargetScope',[response.data.glucose_range_lower_limit,response.data.glucose_range_lupper_limit])\n                        this.$store.dispatch('setUnit',response.data.glucose_unit==0?'mmol/L':'mg/dL')\n                        this.info = params\n\n                        let arrayData = response.data.datas\n                       \n                        if(arrayData.length>0){\n                            console.log(formatTime(new Date()),'得到数据')   \n                            this.empty = false\n                            this.handelTemplateDay(this.handleData(arrayData,start_ts,end_ts))\n                            this.$store.dispatch('setChooseDateList',this.agpDate.join('/'))\n                        }else{\n                            this.empty = true\n                        }\n\n                    }else{\n                        this.$message({\n                            type: 'error',\n                            message: response.msg\n                        });\n                    }\n            }).catch((res) => {\n                clearInterval(progressTimer)\n                that.downProgress = 100\n                this.progressShow = false\n                console.log(res)\n            })\n        },\n        // 云拉取事件\n        getEventList(){\n            let s = new Date(this.agpDate[0])\n            let e = new Date(this.agpDate[1])\n            let start_ts = s.setHours(0,0,0)/1000\n            let end_ts = e.setHours(23,59,59)/1000\n            getEvent({event_type:-1,start_ts:start_ts,end_ts:end_ts}).then(response => {\n                if(response.code == 1000){\n                    this.$store.dispatch('setEvents',{key:this.agpDate.join('/'),value:response.data}) //处理完数据存vuex\n                    this.handelEventDay(response.data)\n\n                }else{\n                    this.$message({\n                        type: 'error',\n                        message: response.msg\n                    });\n                }\n            }).catch((res) => {\n            })\n        },\n        processArray(arr, interval) {\n            let result = [];\n\n            for (let i = 0; i < arr.length - 1; i++) {\n                result.push(arr[i]);\n\n                let diff = arr[i + 1].DataTs - arr[i].DataTs;\n                let addTs = arr[i].DataTs + interval;\n                while (diff > interval) {\n                result.push({DataTs: addTs, value: undefined});\n                diff = arr[i + 1].DataTs - addTs;\n                addTs += interval;\n                }\n            }\n            result.push(arr[arr.length - 1]);\n\n            return result;\n        },\n\n        filterArray  (data) {\n            const result = [];\n\n            const seenTimes = new Set();\n            let levelLowInvalidMg = 20\n            let levelHighInvalidMg = 800\n            let levelTooLowMg = 40\n            let levelTooHighMg = 400\n            data.forEach(item => {\n                const timeStr = formatDate(item.DataTs*1000,'YYYY-mm-dd HH:MM')\n\n                if (!seenTimes.has(timeStr)) {\n                seenTimes.add(timeStr);\n                if (item.value > levelLowInvalidMg || item.value < levelHighInvalidMg) {\n                    result.push({...item, value: undefined});\n                } else if (item.value < levelTooLowMg) {\n                    result.push({\n                    ...item,\n                    value: levelTooLowMg,\n                    });\n                } else if (item.value > levelTooHighMg) {\n                    result.push({\n                    ...item,\n                    value: levelTooHighMg,\n                    });\n                } else {\n                    result.push(item);\n                }\n                }\n            });\n\n            return result;\n        },\n\n        handleData (objects, s_ts, e_ts)  {\n            let measuringInterval = 60\n            objects = this.processArray(objects, measuringInterval);\n            objects = this.filterArray(objects);\n\n            let startTs = objects[0].DataTs;\n            while (startTs - measuringInterval >= s_ts) {\n                objects.unshift({\n                DataTs: startTs - measuringInterval,\n                value: undefined,\n                });\n                startTs = startTs - measuringInterval;\n            }\n\n            let endTs = objects[objects.length - 1].DataTs;\n            while (endTs + measuringInterval < e_ts) {\n                objects.push({\n                DataTs: endTs + measuringInterval,\n                value: undefined,\n                });\n                endTs = endTs + measuringInterval;\n            }\n            this.$store.dispatch('setData',{key:this.agpDate.join('/'),value:objects}) //处理完数据存vuex\n            return objects;\n        },\n         // 全部事件分割为每天事件\n        handelEventDay(datas){\n            let data = _.clone(datas)\n            // let data = _.concat(_.clone(datas),_.clone(datas))\n            let unit = this.unit\n            let eventList ={};\n            let sameList = {}\n            let repeatNum = 1\n            data.forEach(item=>{\n                let key = formatDate(item.event_ts*1000,'YYYY-mm-dd')\n                let zeroTs = new Date(key).setHours(0,0,0)/1000\n                item.xIndex = (item.event_ts-zeroTs)/60\n                if(sameList[item.event_ts]){\n                    repeatNum++\n                    sameList[item.event_ts].push(item)\n                }else{\n                    repeatNum = 1\n                    sameList[item.event_ts] = [item]\n                }\n                item.yPosition = unit=='mmol/L'?1*repeatNum:18*repeatNum\n                if(eventList[key]){\n                    eventList[key].push(item)\n                }else{\n                    eventList[key] = [item]\n                }\n            })\n            this.eventList = eventList\n        },\n        upload(){\n            this.$router.push('/upLoad')\n        },\n          // 选择下载。打印的内容\n        handleCheckedCitiesChange(val){\n            let checkedCount = val.length;\n            this.checkAll = checkedCount === this.downloadList.length;\n            this.isIndeterminate = checkedCount > 0 && checkedCount < this.downloadList.length;\n        },\n        // 全选\n        handleCheckAllChange(val){\n            this.checkedDowns = val ? this.downloadList : [];\n            this.isIndeterminate = false;\n        },\n          // 打印\n        async print(){\n            this.dialogVisible = true\n            this.dialogType='print'\n        },\n        // 导出pdf\n        handleExport() {\n            this.dialogVisible = true\n            this.dialogType='export'\n        },\n    },\n   \n\n}"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticClass","attrs","require","_v","script","component","TIRResult","constructor","veryHighCount","highCount","normalCount","lowCount","veryLowCount","arrayLength","veryHighRate","highRate","normalRate","lowRate","veryLowRate","veryHighDuration","highDuration","normalDuration","lowDuration","veryLowDuration","TIRUtils","getTIRResult","dataArray","normalHigh","normalLow","Array","isArray","length","every","element","filteredArray","filter","val","x1","x2","x3","x4","forEach","value","style","percentage","_s","props","type","Number","progressTimer","data","pickerOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","agpDate","dayDate","checkAll","isIndeterminate","downloadList","checkedDowns","dialogVisible","dialogType","empty","downProgress","progressShow","components","Progress","computed","mapGetters","mounted","end_ts","start_ts","setDate","getDate","chooseDay","formatDate","chooseGetData","methods","changeDate","e","date1","date2","s_date","setHours","e_date","oneDay","diff","Math","abs","ceil","_","indexOf","$store","state","report","chooseDateList","join","getData","getEventList","result","events","handelTemplateDay","handelEventDay","info","that","setInterval","s","getAgpInfo","then","response","clearInterval","setTimeout","code","devices","item","upDate","update_ts","params","nickname","diabetes_type","age","diabetes_year","glucose_range_lower_limit","glucose_range_lupper_limit","device","dispatch","key","glucose_unit","arrayData","datas","console","log","formatTime","handleData","$message","message","msg","catch","res","getEvent","event_type","processArray","arr","interval","i","push","DataTs","addTs","undefined","filterArray","seenTimes","Set","levelLowInvalidMg","levelHighInvalidMg","levelTooLowMg","levelTooHighMg","timeStr","has","add","objects","s_ts","e_ts","measuringInterval","startTs","unshift","endTs","clone","unit","eventList","sameList","repeatNum","event_ts","zeroTs","xIndex","yPosition","upload","$router","handleCheckedCitiesChange","checkedCount","handleCheckAllChange","print","handleExport"],"sourceRoot":""}